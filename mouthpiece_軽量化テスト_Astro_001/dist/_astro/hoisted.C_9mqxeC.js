(function(){const e=document.getElementById("back-to-top");window.addEventListener("scroll",function(){window.pageYOffset>300?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})})();fetch("/common_data/data/site-common-texts.json").then(e=>e.json()).then(e=>{const i=document.getElementById("site-logo");i&&e.サイト名&&(i.textContent=e.サイト名);const s=document.getElementById("header-logo-icon");s&&e.ファビコン画像パス&&(s.src=e.ファビコン画像パス);const t=document.querySelector(".copyright");t&&e.サイト名&&(t.textContent="© 2025 "+e.サイト名)}).catch(e=>{console.error("Error loading common site data:",e)});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})});function B(){const e=new URLSearchParams(window.location.search);e.toString()&&document.querySelectorAll('a[href^="/"], a[href^="./"], a[href^="../"], a[href]:not([href^="http"]):not([href^="#"])').forEach(s=>{try{const t=new URL(s.href,window.location.origin);for(const[c,n]of e)t.searchParams.has(c)||t.searchParams.set(c,n);s.href=t.toString()}catch{const c=s.href.includes("?")?"&":"?";s.href=s.href+c+e.toString()}})}document.addEventListener("DOMContentLoaded",function(){B();const e=document.querySelectorAll(".comparison-tab-menu-item"),i=document.querySelector(".comparison-table table");function s(t){if(!i)return;const c=document.querySelector(".comparison-table"),n=i.querySelectorAll("th"),l=i.querySelectorAll("tbody tr"),a={tab1:[0,1,2,3,10],tab2:[0,4,5,6,10],tab3:[0,7,8,9,10]},d=a[t]||a.tab1;c.setAttribute("data-active-tab",t);const o=window.dataManager?window.dataManager.getClinicHeaderConfig():null,u={tab1:[o&&o.比較表ヘッダー1||"クリニック",o&&o.比較表ヘッダー2||"総合評価",o&&o.比較表ヘッダー3||"費用",o&&o.比較表ヘッダー4||"特徴",o&&o.比較表ヘッダー11||"公式サイト"],tab2:[o&&o.比較表ヘッダー1||"クリニック",o&&o.比較表ヘッダー5||"矯正範囲",o&&o.比較表ヘッダー6||"目安期間",o&&o.比較表ヘッダー7||"通院頻度",o&&o.比較表ヘッダー11||"公式サイト"],tab3:[o&&o.比較表ヘッダー1||"クリニック",o&&o.比較表ヘッダー8||"実績/症例数",o&&o.比較表ヘッダー9||"ワイヤー矯正の紹介",o&&o.比較表ヘッダー10||"サポート",o&&o.比較表ヘッダー11||"公式サイト"]},p=u[t]||u.tab1;requestAnimationFrame(()=>{let g=0;n.forEach((r,m)=>{d.includes(m)&&g<p.length&&(r.textContent=p[g],g++)}),n.forEach((r,m)=>{d.includes(m)?(r.removeAttribute("style"),r.classList.remove("th-none"),r.classList.remove("td-none")):(r.style.display="none",r.style.visibility="hidden",r.style.width="0",r.style.padding="0",r.style.border="0",r.classList.add("th-none"))}),l.forEach(r=>{r.querySelectorAll("td").forEach((f,y)=>{d.includes(y)?(f.removeAttribute("style"),f.classList.remove("th-none"),f.classList.remove("td-none")):(f.style.display="none",f.style.visibility="hidden",f.style.width="0",f.style.padding="0",f.style.border="0",f.classList.add("td-none"))})})})}e.forEach(t=>{t.addEventListener("click",function(){e.forEach(n=>n.classList.remove("tab-active")),this.classList.add("tab-active");const c=this.getAttribute("data-tab");s(c)})}),s("tab1")});window.toggleDisclaimer=function(e){if(console.log(">>> toggleDisclaimer called:",e),e==="dio-campaign-first-choice"){const n=document.getElementById("dio-campaign-first-choice-content"),l=document.getElementById("dio-campaign-first-choice-arrow");if(n&&l){n.style.display==="none"||!n.style.display?(n.style.display="block",l.style.transform="rotate(180deg)"):(n.style.display="none",l.style.transform="rotate(0deg)");return}if(document.getElementById("dio-campaign-first-choice-content"),document.getElementById("dio-campaign-first-choice-arrow"),!(n&&l)){const a=e.split("-")[0]||"dio",d=document.getElementById(a+"-content"),o=document.getElementById(a+"-arrow");if(d&&o){window.getComputedStyle(d).display==="none"?(d.style.display="block",o.style.transform="rotate(180deg)",console.log("→ Fallback general accordion opened:",a)):(d.style.display="none",o.style.transform="rotate(0deg)",console.log("→ Fallback general accordion closed:",a));return}}if(n&&l){try{const r=document.getElementById("main-content"),m=n.closest(".disclaimer-accordion"),f=document.getElementById("first-choice-recommendation-section"),h=document.querySelector("#first-choice-recommendation-section .first-choice-recommendation-section")||f,C=(()=>{let w=m;for(;w&&w!==document.body;){if(w.id==="main-content")return!0;w=w.parentElement}return!1})(),v=h&&m&&m.parentElement!==h;console.log("Relocation check:",{hasAnchor:!!h,isInMain:C,needsMove:v}),v&&(h.appendChild(m),console.log("Relocated first-choice accordion under .first-choice-recommendation-section"))}catch(r){console.warn("Relocation error:",r)}const a=window.getComputedStyle(n),d=a.display;console.log("First choice accordion - current display:",d,"| visibility:",a.visibility,"| opacity:",a.opacity);const o=n.closest(".disclaimer-accordion"),u=n.closest("section"),p=[];let g=n.parentElement;for(;g&&g!==document.body;){const r=window.getComputedStyle(g);if(r.display==="none"||r.visibility==="hidden"||r.opacity==="0"||r.maxHeight==="0px"||r.height==="0px"){const f={tag:g.tagName,cls:g.className,id:g.id,display:r.display,visibility:r.visibility,opacity:r.opacity,height:r.height,maxHeight:r.maxHeight};p.push(f),g.classList.add("force-ancestor-show"),g.classList.contains("hidden")&&(g.classList.remove("hidden"),g.setAttribute("data-removed-hidden","1")),g.hasAttribute("hidden")&&(g.removeAttribute("hidden"),g.setAttribute("data-removed-hidden-attr","1")),g.getAttribute("aria-hidden")==="true"&&(g.setAttribute("aria-hidden","false"),g.setAttribute("data-changed-aria-hidden","1"))}g=g.parentElement}if(p.length)try{console.log(`Ancestors with potential hidden styles (text):
`+JSON.stringify(p,null,2))}catch{console.log("Ancestors with potential hidden styles:",p)}if(d==="none"){o&&(o.style.display="block",o.style.visibility="visible",o.style.opacity="1",o.style.position="relative",o.style.zIndex="9999"),u&&(u.style.display=u.style.display||"block"),n.classList.add("force-show"),n.style.display="block",n.style.visibility="visible",n.style.opacity="1",n.style.maxHeight="none",n.style.height="auto",l.style.transform="rotate(180deg)",console.log("→ First choice accordion opened (applied force-show + inline styles)");try{const m=n.getBoundingClientRect();console.log("First choice content rect after open:",{top:m.top,left:m.left,width:m.width,height:m.height})}catch{}const r=document.getElementById("main-content");if(r&&window.getComputedStyle(r).display==="none"){const m=n.closest(".disclaimer-accordion"),f=document.querySelector("#first-choice-recommendation-section .first-choice-recommendation-section");m&&r.contains(m)&&(f?(f.appendChild(m),console.log("Relocated first-choice accordion (during open) under .first-choice-recommendation-section")):(r.parentNode.insertBefore(m,r.nextSibling),console.log("Relocated first-choice accordion (during open) outside main-content")))}try{(()=>{const y=n.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-80;window.scrollTo({top:y,behavior:"auto"}),setTimeout(()=>{const h=n.getBoundingClientRect();if(console.log("After scroll check:",{pageYOffset:window.pageYOffset,rectTop:h.top,rectHeight:h.height}),h.top<-10||h.top>window.innerHeight){const C=h.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-80;window.scrollTo({top:C,behavior:"auto"})}},120)})()}catch{}}else{n.classList.remove("force-show"),n.style.display="none",n.style.visibility="",n.style.opacity="",n.style.maxHeight="",n.style.height="",l.style.transform="rotate(0deg)",console.log("→ First choice accordion closed");try{const m=n.getBoundingClientRect();console.log("First choice content rect after close:",{top:m.top,left:m.left,width:m.width,height:m.height})}catch{}let r=n.parentElement;for(;r&&r!==document.body;)r.classList.contains("force-ancestor-show")&&(r.classList.remove("force-ancestor-show"),r.getAttribute("data-removed-hidden")==="1"&&(r.classList.add("hidden"),r.removeAttribute("data-removed-hidden")),r.getAttribute("data-removed-hidden-attr")==="1"&&(r.setAttribute("hidden",""),r.removeAttribute("data-removed-hidden-attr")),r.getAttribute("data-changed-aria-hidden")==="1"&&(r.setAttribute("aria-hidden","true"),r.removeAttribute("data-changed-aria-hidden"))),r=r.parentElement}}else console.warn("First choice elements not found:",{hasContent:!!n,hasArrow:!!l});return}const i=e+"-content",s=e+"-arrow",t=document.getElementById(i),c=document.getElementById(s);if(console.log("Looking for:",i,"→",t?"FOUND":"NOT FOUND"),console.log("Looking for:",s,"→",c?"FOUND":"NOT FOUND"),t&&c)if(window.getComputedStyle(t).display==="none"){const a=[];let d=t.parentElement;for(;d&&d!==document.body;){const o=window.getComputedStyle(d);if(o.display==="none"||o.visibility==="hidden"||o.opacity==="0"||o.maxHeight==="0px"||o.height==="0px"){const p={tag:d.tagName,cls:d.className,id:d.id,display:o.display,visibility:o.visibility,opacity:o.opacity,height:o.height,maxHeight:o.maxHeight};a.push(p),d.classList.add("force-ancestor-show"),d.classList.contains("hidden")&&(d.classList.remove("hidden"),d.setAttribute("data-removed-hidden","1")),d.hasAttribute("hidden")&&(d.removeAttribute("hidden"),d.setAttribute("data-removed-hidden-attr","1")),d.getAttribute("aria-hidden")==="true"&&(d.setAttribute("aria-hidden","false"),d.setAttribute("data-changed-aria-hidden","1"))}d=d.parentElement}if(a.length)try{console.log(`Ancestors (general) with potential hidden styles (text):
`+JSON.stringify(a,null,2))}catch{console.log("Ancestors (general):",a)}t.style.display="block",t.style.visibility="visible",t.style.opacity="1",c.style.transform="rotate(180deg)",console.log("→ General accordion opened:",e);try{const o=t.getBoundingClientRect();console.log("General content rect after open:",{top:o.top,left:o.left,width:o.width,height:o.height}),(()=>{const g=t.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-80;window.scrollTo({top:g,behavior:"auto"}),setTimeout(()=>{const r=t.getBoundingClientRect();console.log("After scroll check (general):",{pageYOffset:window.pageYOffset,rectTop:r.top,rectHeight:r.height})},120)})()}catch{}}else{t.style.display="none",t.style.visibility="",t.style.opacity="",c.style.transform="rotate(0deg)",console.log("→ General accordion closed:",e);let a=t.parentElement;for(;a&&a!==document.body;)a.classList.contains("force-ancestor-show")&&(a.classList.remove("force-ancestor-show"),a.getAttribute("data-removed-hidden")==="1"&&(a.classList.add("hidden"),a.removeAttribute("data-removed-hidden")),a.getAttribute("data-removed-hidden-attr")==="1"&&(a.setAttribute("hidden",""),a.removeAttribute("data-removed-hidden-attr")),a.getAttribute("data-changed-aria-hidden")==="1"&&(a.setAttribute("aria-hidden","true"),a.removeAttribute("data-changed-aria-hidden"))),a=a.parentElement}};document.querySelectorAll(".medical-columns-section .toc-link, .medical-columns-section .contact-link").forEach(e=>{e.addEventListener("click",function(i){if(this.style.opacity="0.7",setTimeout(()=>{this.style.opacity="1"},150),this.classList.contains("toc-link")&&this.getAttribute("href").startsWith("#")){i.preventDefault();const s=this.getAttribute("href").substring(1),t=document.getElementById(s);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}})});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("ranking-disclaimer-button");e&&e.addEventListener("click",toggleRankingDisclaimer);const i=document.getElementById("comparison-disclaimer-button");i&&i.addEventListener("click",toggleComparisonDisclaimer);const s=document.querySelectorAll(".tips-container .tab"),t=document.querySelectorAll(".tips-container .tab-content");s.forEach(c=>{c.addEventListener("click",function(){const n=this.getAttribute("data-tab");s.forEach(l=>{l.style.backgroundColor="#F1F1F1",l.style.color="#4C4C4C"}),this.style.backgroundColor="#2CC7C5",this.style.color="white",t.forEach(l=>{l.getAttribute("data-tab")===n?l.style.display="block":l.style.display="none"})})})});(function(){try{let i=function(d,o){const u=Array.from(o).map(g=>{try{return typeof g=="string"?g:JSON.stringify(g)}catch{return String(g)}}).join(" "),p="["+d+"] "+u+`
`;l.textContent+=p};var e=i;const t=new URLSearchParams(window.location.search).get("debug")==="1";if(window.__DEBUG__=t,!t)return;const c=document.createElement("div");c.id="debug-log-panel",c.style.cssText="position:fixed;bottom:0;left:0;right:0;max-height:35vh;overflow:auto;background:#111;color:#0f0;font:12px/1.4 monospace;z-index:99999;border-top:1px solid #333;padding:6px;opacity:0.95;";const n=document.createElement("div");n.innerHTML='<strong style="color:#fff">DEBUG LOG</strong> <button id="dbg-clear" style="margin-left:8px;">clear</button> <button id="dbg-hide" style="margin-left:4px;">hide</button>',n.style.cssText="margin-bottom:4px;";const l=document.createElement("pre");l.id="debug-log",l.style.margin="0",c.appendChild(n),c.appendChild(l),document.body.appendChild(c);const a={log:console.log,error:console.error,warn:console.warn,info:console.info};console.log=function(){i("LOG",arguments),a.log.apply(console,arguments)},console.error=function(){i("ERR",arguments),a.error.apply(console,arguments)},console.warn=function(){i("WRN",arguments),a.warn.apply(console,arguments)},console.info=function(){i("INF",arguments),a.info.apply(console,arguments)},document.getElementById("dbg-clear").onclick=function(){l.textContent=""},document.getElementById("dbg-hide").onclick=function(){c.style.display="none"},console.log("[DEBUG] panel ready"),document.addEventListener("DOMContentLoaded",function(){console.log("[DEBUG] DOMContentLoaded fired")}),window.addEventListener("load",function(){console.log("[DEBUG] window load fired")}),setTimeout(function(){console.log("[DEBUG] runtime check",{hasApp:!!window.app,hasDataManager:!!(window.app&&window.app.dataManager),caseSection:!!document.getElementById("case-section"),caseSlides:document.querySelectorAll(".case-slide").length})},500)}catch{}})();(function(){const i=document.getElementById("back-to-top");if(!i)return;function s(){const n=document.documentElement,l=window.pageYOffset||n.scrollTop||0,a=n.scrollHeight-n.clientHeight||1;l/a*100>=6.5?i.style.display="flex":i.style.display="none"}function t(){const n=document.querySelector(".scroll-bottom-modal");let l=20;if(n&&n.classList&&n.classList.contains("show")){const a=n.getBoundingClientRect();a&&a.height?l=Math.max(20,Math.round(a.height)+16):l=96}i.style.bottom=l+"px"}window.addEventListener("scroll",()=>{s(),t()},{passive:!0}),window.addEventListener("resize",()=>{s(),t()}),s(),t(),new MutationObserver(()=>{t()}).observe(document.body,{childList:!0,subtree:!0,attributes:!0}),document.addEventListener("click",n=>{n.target&&n.target.closest&&n.target.closest(".scroll-modal-close")&&setTimeout(t,50)}),i.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})})();(function(){const i=document.getElementById("pr-line");if(!i)return;const s=()=>{const t=window.app?.dataManager||window.dataManager;if(!t||!t.clinicTexts||!t.clinics||t.clinics.length===0)return!1;const c=[];if(t.clinics.forEach(l=>{const a=t.getClinicText(l.code||l.name,"pr","").trim();a&&c.push(a)}),c.length===0)return!1;let n="PR "+c[0];for(let l=1;l<c.length;l++)n+="<br>"+c[l];return i.innerHTML=n,!0};if(!s()){let t=0;const c=setInterval(()=>{(s()||++t>60)&&clearInterval(c)},250)}})();document.addEventListener("click",function(e){const i=e.target.closest("a");if(i&&i.href)if(console.log("Link clicked:",i.href),i.href.includes("/redirect.html")){e.preventDefault();const s=new URL(i.href),t=s.hash?s.hash.substring(1):"";if(t.startsWith("params="))try{const c=decodeURIComponent(t.substring(7)),n=JSON.parse(c),l=new URL(window.location.href),a={};for(const[d,o]of l.searchParams)a[d]=o;n.original_params=a,console.log("💾 保存するパラメータ:",n),localStorage.setItem("redirectParams",JSON.stringify(n)),console.log("Saved redirect params to localStorage:",n),window.open(i.href,"_blank","noopener")}catch(c){console.error("Failed to save redirect params:",c)}else{const c=s.searchParams.get("clinic_id"),n=s.searchParams.get("rank"),l=s.searchParams.get("region_id");if(c){const a={clinic_id:c,rank:n||"1",region_id:l||"013"};localStorage.setItem("redirectParams",JSON.stringify(a)),console.log("Saved redirect params from URL to localStorage:",a),window.open(i.href,"_blank","noopener")}}}else console.log("Direct URL link clicked:",i.href)});function A(e){if(!e)return;const i=e.code||window.app?.dataManager?.getClinicCodeById?.(e.id)||window.dataManager?.getClinicCodeById?.(e.id),s=window.app?.dataManager||window.dataManager,t=(s&&typeof s.getClinicText=="function"?s.getClinicText(i,"ブランド名",e.name):null)||e.name||"Oh my teeth",c=e.code||clinicIdToSlugMap[e.id]||clinicNameToSlugMap[t]||clinicNameToSlugMap[e.name]||"omt";window.__DEBUG__&&console.log("[DEBUG] setFirstChoiceClinic: clinicSlug",c,"clinicName",t,"clinicData",e),document.getElementById("first-choice-region-text");const n=document.getElementById("first-choice-clinic-name"),l=document.getElementById("first-choice-title-clinic-name");document.getElementById("first-choice-banner-image"),document.getElementById("first-choice-info-logo");const a=document.getElementById("first-choice-campaign-text"),d=document.getElementById("first-choice-achievement-text"),o=document.getElementById("first-choice-cta-link"),u=document.getElementById("first-choice-cta-text");n&&(n.textContent=t),l&&(l.textContent=t),u&&(u.textContent=`${t}の公式サイト`);const p=window.app?.dataManager||window.dataManager;if(p&&typeof p.getClinicText=="function"){const g=e.code||c,r=p.getClinicText(g,"INFORMATIONキャンペーンテキスト","期間限定キャンペーン<br>実施中");a&&(a.innerHTML=r);const m=p.getClinicText(g,"INFORMATIONサブテキスト","＼月額・総額がリーズナブルなクリニック／");d&&(d.textContent=m);const f=new URLSearchParams(window.location.search).get("region_id")||"013",y=window.app&&window.app.urlHandler?window.app.urlHandler.getClinicUrlWithRegionId(e.id):`/injection-lipolysis001/go/${c}/?region_id=${f}`;o&&(o.href=y)}else{const g=T(c);a&&(a.innerHTML=g.campaign),d&&(d.textContent=g.achievement),o&&(o.href=g.ctaUrl)}if(S(c),k(e),window.dataManager&&window.dataManager.getClinicText)e.code,window.__DEBUG__&&console.log("[DEBUG] setFirstChoiceClinic: calling setCaseSection with clinicSlug",c),E();else{const g=T(c);window.__DEBUG__&&console.log("[DEBUG] setFirstChoiceClinic: calling setCaseSection (fallback) with clinicSlug",c),E(c,g.points)}}function E(e,i){const s=document.getElementById("case-section");if(!s){window.__DEBUG__&&console.log("[DEBUG] setCaseSection: #case-section not found");return}s.style.display="none",window.__DEBUG__&&console.log("[DEBUG] setCaseSection: hidden top case-section to avoid duplication")}function k(e){const i=document.getElementById("first-choice-disclaimer-title"),s=document.getElementById("dio-campaign-first-choice-arrow"),t=document.getElementById("dio-campaign-first-choice-content");s&&s.closest("button.disclaimer-header");const c=t?t.querySelector("div"):null;if(!e)return;const n=e.name||"ディオクリニック",l=e.code||"dio";i&&(i.textContent=`${n}の確認事項`),s&&(s.style.transform="rotate(0deg)"),t&&(t.style.display="none",t.classList.remove("force-show"),t.style.visibility="",t.style.opacity="");const a=window.app?.dataManager||window.dataManager;if(a&&typeof a.getClinicText=="function"&&c){const d=a.getClinicText(l,"INFORMATION確認事項","");if(d){const o=d.split("<br>").map(u=>u.trim()).filter(u=>u).map(u=>`<p>${u}</p>`).join(`
                        `);c.innerHTML=o}}}function _(e){const i=window.app?.dataManager||window.dataManager;if(i&&i.clinics){const s=i.clinics.find(t=>t.code===e);if(s)return s.name}return e}function T(e){const i=window.app?.dataManager||window.dataManager;return i&&typeof i.getClinicText=="function"?(_(e),{campaign:clinicInfo.INFORMATIONキャンペーンテキスト||"期間限定キャンペーン<br>実施中",achievement:"＼"+(clinicInfo["実績/症例数"]||"実績多数")+"／",ctaUrl:clinicInfo.公式サイトURL||`https://www.example.com/go/${e}/`}):{campaign:"期間限定キャンペーン<br>実施中",achievement:"＼実績多数／",ctaUrl:`https://www.example.com/go/${e}/`}}function S(e){const i=document.getElementById("first-choice-points");if(!i)return;const s=window.app?.dataManager||window.dataManager;if(!s){console.error("DataManager not found");return}const t=window.slugToNameMap&&window.slugToNameMap[e]||e,c=s.getClinicText(t,"POINT1タイトル",""),n=s.getClinicText(t,"POINT1内容",""),l=s.getClinicText(t,"POINT2タイトル",""),a=s.getClinicText(t,"POINT2内容",""),d=s.getClinicText(t,"POINT3タイトル",""),o=s.getClinicText(t,"POINT3内容",""),u=[{title:c,description:n},{title:l,description:a},{title:d,description:o}],p=`https://www.xn--ecki4eoz3204ct89aepry34c.com/go/${e}/?max_scroll=100&region_id=013`,g=["fa-lightbulb","fa-mobile-alt","fa-yen-sign"];let r="";u.forEach((f,y)=>{const h=g[y]||"fa-clock";r+=`
                      <div class="ribbon_point_title2_s">
                          <i class="fas ${h} point-icon-inline"></i>
                          <strong>${s.processDecoTags?s.processDecoTags(f.title):f.title}</strong>
                      </div>
                      <div class="ribbon_point_txt">
                          <p style="font-size:14px;">${s.processDecoTags?s.processDecoTags(f.description):f.description}</p>
                      </div>
                  `});const m=document.getElementById("first-choice-official-link");if(m){const f=s.getClinicText(t,"公式サイトURL","https://omt.jp/");m.innerHTML=`【公式】<a href="${p}" target="_blank" rel="noopener"><strong>${f}</strong></a>`}i.innerHTML=r+(i.innerHTML.match(/<div class="ribbon_point_link"[\s\S]*?<\/div>/)?.[0]||"")}function b(){if(!window.app||!window.app.dataManager){window.__DEBUG__&&console.log("[DEBUG] updateFirstChoiceClinic: app/dataManager not ready");return}const e=window.app.urlHandler?window.app.urlHandler.getRegionId():"013";window.__DEBUG__&&console.log("[DEBUG] updateFirstChoiceClinic: regionId",e);const i=window.app.dataManager.getRankingByRegionId(e);if(!i||!i.ranks){window.__DEBUG__&&console.log("[DEBUG] updateFirstChoiceClinic: no ranking for region",e,i),console.log("No ranking data found for region:",e);return}const s=i.ranks.no1;if(window.__DEBUG__&&console.log("[DEBUG] updateFirstChoiceClinic: firstPlaceClinicId",s),!s){console.log("No first place clinic found");return}const c=window.app.dataManager.getAllClinics().find(n=>n.id===s);window.__DEBUG__&&console.log("[DEBUG] updateFirstChoiceClinic: firstClinic resolved",c),c&&(A(c),c.code==="dio"&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"first_clinic_is_dio"}),console.log("GTM Event: first_clinic_is_dio")))}document.addEventListener("DOMContentLoaded",function(){b()});let L=0;const M=10;function I(){if(window.app&&window.app.dataManager&&window.app.dataManager.getAllClinics().length>0){b();return}L++,L<M&&setTimeout(I,500)}setTimeout(I,100);function x(){if(!window.app||!window.app.urlHandler){setTimeout(x,500);return}let e=window.app.urlHandler.getRegionId();setInterval(()=>{const i=window.app.urlHandler?window.app.urlHandler.getRegionId():"013";i!==e&&(e=i,console.log("Region changed to:",i),setTimeout(()=>b(),100))},1e3)}x();window.addEventListener("load",function(){setTimeout(()=>b(),1e3)});window.onclick=function(e){const i=document.getElementById("disclaimer-modal");e.target==i&&(i.style.display="none")};(function(){const e=document.querySelectorAll(".tips-container .tab"),i=document.querySelectorAll(".tips-container .tab-content");function s(t){e.forEach((c,n)=>{n===t?(c.classList.add("active"),c.style.backgroundColor="#2B5797",c.style.color="white"):(c.classList.remove("active"),c.style.backgroundColor="#CCCCCC",c.style.color="#333")}),i.forEach((c,n)=>{n===t?c.style.display="block":c.style.display="none"})}e.forEach((t,c)=>{t.addEventListener("click",()=>s(c))})})();"fonts"in document&&document.fonts.ready.then(function(){document.documentElement.classList.add("fonts-loaded")});
