<!DOCTYPE html>
<html lang="ja">
<head>
    <script src="../common_data/js/gtm-loader.js" defer></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025å¹´æœ€æ–°ç‰ˆï½œãŠã™ã™ã‚æ¯”è¼ƒãƒ©ãƒ³ã‚­ãƒ³ã‚°</title>
    <!-- Vercel deployment: 2025-07-21 23:40 -->
    <!-- Map modal feature added: 2024-01-29 15:30 -->
    <meta name="description" content="å…¨å›½ã®äººæ°—ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã‚’å¾¹åº•æ¯”è¼ƒï¼æ–™é‡‘ãƒ»ç‰¹å¾´ãƒ»å£ã‚³ãƒŸãƒ»ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ãªã©ã‚’ã‚ã‹ã‚Šã‚„ã™ãä¸€è¦§ã§ã”ç´¹ä»‹ã€‚ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã‚¯ãƒªãƒ‹ãƒƒã‚¯é¸ã³ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <style>
        * { box-sizing: border-box; }
        *::before, *::after { box-sizing: inherit; }
        html { color-scheme: light; }
        body {
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #ffffff;
            color: #333333;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            width: 100%;
        }
        body > *:not(.sidebar-menu):not(.sidebar-overlay):not(.map-modal):not(.disclaimer-modal):not(.banner-modal):not(.scroll-bottom-modal) {
            width: 100%;
            max-width: 768px;
            margin: 0 auto;
        }
        img {
            max-width: 100%;
            display: block;
            height: auto;
        }
        a { color: inherit; text-decoration: none; }
        .container {
            width: 100%;
            max-width: 768px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .site-header {
            position: sticky;
            top: 0;
            background-color: #ffffff;
            z-index: 1000;
            border-bottom: 1px solid #f0f0f0;
        }
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px;
        }
        .logo-main {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .logo-icon img {
            width: 40px;
            height: 40px;
        }
        .site-logo {
            margin: 0;
            font-size: 1.1rem;
            font-weight: 700;
            letter-spacing: 0.02em;
        }
        .hero-section {
            position: relative;
            margin: 0;
        }
        .hero-image-wrapper {
            position: relative;
            width: 100%;
            max-width: 768px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 12px;
            background: #f9f9f9;
            aspect-ratio: 1500 / 928;
        }
        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        @media (max-width: 768px) {
            .container { padding: 0 12px; }
            .header-content { padding: 12px; }
            .site-logo { font-size: 1rem; }
        }
    </style>
    <!-- é‡è¦ãªãƒªã‚½ãƒ¼ã‚¹ã®preload -->
    <link rel="preload" as="image" href="images/mv.webp" fetchpriority="high" type="image/webp">
    <link rel="preload" as="style" href="styles.css?v=2025080101">
    
    <!-- Google Fontsã¯ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã›ãšã€é€šå¸¸ã®ãƒ­ãƒ¼ãƒ‰ã®ã¿ã«ã™ã‚‹ -->
    <!-- ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="styles.css?v=2025081417" media="print" onload="this.media='all'" fetchpriority="high">
    <noscript><link rel="stylesheet" href="styles.css?v=2025081417"></noscript>
    <link rel="icon" type="image/png" href="../common_data/images/favicon.png" id="favicon">
    <!-- Critical CSS -->
    <!-- Font loading detection -->
    <script>'fonts' in document&&document.fonts.ready.then(function(){document.documentElement.classList.add('fonts-loaded')})</script>
    
</head>
<body>
    
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="site-header">
            <div class="header-content">
                <div class="logo-section">
                    <a href="/" class="logo-link">
                        <div class="logo-main">
                            <span class="logo-icon"><img src="../common_data/images/favicon.png" alt="åŒ»ç™‚ãƒ€ã‚¤ã‚¨ãƒƒãƒˆæ¯”è¼ƒ.com" id="header-logo-icon"></span>
                            <h1 class="site-logo" id="site-logo">ãŠã™ã™ã‚æ¯”è¼ƒ.com</h1>
                        </div>
                    </a>
                </div>
                <nav class="header-nav">
                    <button class="hamburger-menu" id="hamburger-menu" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                </nav>
            </div>
        </header>

        <!-- ãƒ¡ã‚¤ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ« -->
        <section class="hero-section">
            <div class="hero-image-wrapper">
                <picture>
                    <img src="images/mv.webp" alt="ãŠã™ã™ã‚æ¯”è¼ƒãƒ©ãƒ³ã‚­ãƒ³ã‚° - 2025å¹´æœ€æ–°ç‰ˆ" class="hero-image" loading="eager" fetchpriority="high" decoding="async" width="1500" height="928">
                </picture>
                <div id="mv-region-name" style="position:absolute;top: 8%;left: 1%;width: clamp(60px, 15vw, 115px);text-align: center;color: #808080;font-size: clamp(14px, 3.5vw, 27px);font-weight: 600;z-index:10;pointer-events:none;padding: clamp(4px, 1vw, 8px);border-radius: 8px;"></div>
                <div id="mv-left-appeal-text" style="position:absolute;top: 25%;left: 14%;text-align: center;color: #808080;font-size: clamp(14px, 3.2vw, 25px);font-weight: 700;z-index:10;pointer-events:none;padding: clamp(6px, 1.5vw, 12px);"></div>
                <svg id="mv-main-svg-text" style="position:absolute;top: 35%;left:39%;transform:translateX(-50%);z-index:10;pointer-events:none;overflow: visible;width: 60vw;height: 10vh;">
                    <text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#ff94ae" stroke="white" stroke-width="6px" paint-order="stroke" style="font-size: clamp(14px, 8vw, 56px);font-weight: 700;">
                        <tspan id="mv-region-text"></tspan>
                    </text>
                </svg>
                <svg id="mv-appeal1-text" style="position:absolute;top: 52%;left:39%;transform:translateX(-50%);z-index:10;pointer-events:none;overflow: visible;width: 60vw;height: 10vh;">
                    <text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#ff94ae" stroke="white" stroke-width="6px" paint-order="stroke" style="font-size: clamp(14px, 8vw, 62px); font-weight: 700;">
                        
                    </text>
                </svg>
            </div>
            <div id="pr-line" style="text-align: right; padding: 5px 20px; color: #808080; font-size: 10px; font-weight: normal; max-width: 768px; margin: 0 auto;"></div>
        </section>

        <main>

            <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section class="clinic-rankings ranking-section">
                <div class="ranking-header-banner">
                    <img src="images/ranking_header_banner.webp" alt="" class="ranking-banner-image" loading="lazy" decoding="async">
                </div>
                <div id="rank-region-name" style="position:absolute;top: 6%;left: 52%;white-space: nowrap;transform: translateX(-50%);text-align: center;color: rgb(255, 255, 255);font-size: clamp(14px, 5.2vw, 37px);font-weight: 600;z-index:10;pointer-events:none;"></div>
                <div id="ranking-list" class="ranking-container">
                    <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                </div>
            </section>

            <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸‹ã®æ³¨æ„äº‹é … -->
            <section id="ranking-disclaimers-section" class="disclaimers-section" style="padding: 0px 10px; background: #ffffff;">
                <div class="container" style="max-width: 768px; margin: 0 auto;">
                    <!-- æ³¨æ„äº‹é …ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ -->
                    <div class="disclaimer-accordion" style="margin-top: 15px;">
                        <!-- ç¬¬1æ®µéš: å„ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®æ³¨æ„äº‹é … -->
                        <div class="main-disclaimer">
                            <button id="ranking-disclaimer-button" class="main-disclaimer-header ranking-disclaimer-header" style="width: 100%; text-align: left; padding: 8px 12px; background-color: #ffffff; border: 1px solid #f0f0f0; border-radius: 3px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <span style="font-size: 10px; font-weight: 500; color: #666;">å„ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®æ³¨æ„äº‹é …</span>
                                <span id="ranking-main-arrow" style="font-size: 8px; color: rgb(153, 153, 153); transition: transform 0.2s; transform: rotate(0deg);">â–¼</span>
                            </button>
                            <div id="ranking-disclaimers-content" class="main-disclaimer-content" style="display: none; padding: 5px; background-color: rgb(252, 252, 252); border-right: 1px solid rgb(240, 240, 240); border-bottom: 1px solid rgb(240, 240, 240); border-left: 1px solid rgb(240, 240, 240); border-image: initial; border-top: none; border-radius: 0px 0px 3px 3px; margin-top: -5px;">
                                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹æ³¨é‡ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‚©ã¿ã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã®Tips -->
            <div class="container tips-container" style="max-width: 768px; margin: 20px auto; padding: 0 10px; position: relative;">
                <div class="tips-section" style="width: 100%;">
                    <div style="display: flex; flex-direction: column;">
                        <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                        <div class="tabs" style="display: flex; gap: 5px; margin-bottom: 0;">
                            <div class="tab active" data-tab="0" style="flex: 1; background-color: #2CC7C5; color: white; padding: 10px 15px; text-align: center; cursor: pointer; border-radius: 4px 4px 0 0; font-weight: 600; transition: all 0.3s ease; font-size: 14px; display: flex; align-items: center; justify-content: center;">
                                <span class="tab-text"></span>
                            </div>
                            <div class="tab" data-tab="1" style="flex: 1; background-color: #F1F1F1; color: #4C4C4C; padding: 10px 15px; text-align: center; cursor: pointer; border-radius: 4px 4px 0 0; font-weight: 600; transition: all 0.3s ease; font-size: 14px; display: flex; align-items: center; justify-content: center;">
                                <span class="tab-text"></span>
                            </div>
                            <div class="tab" data-tab="2" style="flex: 1; background-color: #F1F1F1; color: #4C4C4C; padding: 10px 15px; text-align: center; cursor: pointer; border-radius: 4px 4px 0 0; font-weight: 600; transition: all 0.3s ease; font-size: 14px; display: flex; align-items: center; justify-content: center;">
                                <span class="tab-text"></span>
                            </div>
                        </div>

                        <!-- ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ³ãƒ†ãƒŠ -->
                        <div class="tab-contents" style="position: relative; background-color: #FFFFFF; border: 1px solid #E0E0E0; border-radius: 0 0 4px 4px; padding: 15px;">
                            <!-- ã‚¿ãƒ–1: åŠ¹æœ -->
                            <div class="tab-content active" data-tab="0" style="display: block;">
                                <div style="width: 100%; margin-bottom: 15px;">
                                    <img src="images/Tips1.webp" alt="åŠ¹æœ" style="width: 100%; height: auto; border-radius: 4px;" loading="lazy" decoding="async">
                                </div>
                                <p style="font-size: 14px; line-height: 1.8; color: #4C4C4C; margin-bottom: 15px;">
                                    
                                </p>
                            </div>

                            <!-- ã‚¿ãƒ–2: ã‚¯ãƒªãƒ‹ãƒƒã‚¯é¸ã³ -->
                            <div class="tab-content" data-tab="1" style="display: none;">
                                <div style="width: 100%; margin-bottom: 15px;">
                                    <img src="images/Tips2.webp" alt="ã‚¯ãƒªãƒ‹ãƒƒã‚¯é¸ã³ã®ãƒã‚¤ãƒ³ãƒˆ" style="width: 100%; height: auto; border-radius: 4px;" loading="lazy" decoding="async">
                                </div>
                                <p style="font-size: 14px; line-height: 1.8; color: #4C4C4C; margin-bottom: 15px;">
                                    
                                </p>
                            </div>

                            <!-- ã‚¿ãƒ–3: ä»ŠãŒãŠã™ã™ã‚ -->
                            <div class="tab-content" data-tab="2" style="display: none;">
                                <div style="width: 100%; margin-bottom: 15px;">
                                    <img src="images/Tips3.webp" alt="ä»ŠãŒãŠã™ã™ã‚ã®ç†ç”±" style="width: 100%; height: auto; border-radius: 4px;" loading="lazy" decoding="async">
                                </div>
                                <p style="font-size: 14px; line-height: 1.8; color: #4C4C4C; margin-bottom: 15px;">
                                    
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                // Tips section tab functionality
                (function() {
                    const tabs = document.querySelectorAll('.tips-container .tab');
                    const tabContents = document.querySelectorAll('.tips-container .tab-content');

                    function updateTabs(index) {
                        // Update tabs
                        tabs.forEach((tab, i) => {
                            if (i === index) {
                                tab.classList.add('active');
                                tab.style.backgroundColor = '#2B5797';
                                tab.style.color = 'white';
                            } else {
                                tab.classList.remove('active');
                                tab.style.backgroundColor = '#CCCCCC';
                                tab.style.color = '#333';
                            }
                        });
                        
                        // Update tab contents
                        tabContents.forEach((content, i) => {
                            if (i === index) {
                                content.style.display = 'block';
                            } else {
                                content.style.display = 'none';
                            }
                        });
                    }

                    // Tab click handlers
                    tabs.forEach((tab, index) => {
                        tab.addEventListener('click', () => updateTabs(index));
                    });
                })();
            </script>
        
        <script>
        // è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function showDisclaimerInfo(type) {
            const modal = document.getElementById('disclaimer-modal');
            const modalBody = document.getElementById('disclaimer-modal-body');
            
            const disclaimers = {
                'dio-success-rate': {
                    title: 'ãƒ€ã‚¤ã‚¨ãƒƒãƒˆæˆåŠŸç‡99ï¼…ã«ã¤ã„ã¦',
                    content: 'â€»æœ€çµ‚ä½“é‡æ¸¬å®š2023/2/1ï½2023/7/31ã§è–¬ãªã—ã€é£Ÿäº‹æŒ‡å°ãªã—ã‚’é™¤ãã€3ãƒ¶æœˆã‚³ãƒ¼ã‚¹ï¼ˆãƒ“ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ¼/ãƒªãƒ”ãƒ¼ãƒˆé™¤ãï¼‰ã®å¥‘ç´„çµ‚äº†è€…ãŒå¯¾è±¡ã€‚åŠ¹æœã«ã¯å€‹äººå·®ãŒã‚ã‚Šã¾ã™ã€‚åˆå›ä½“é‡50kgä»¥ä¸Šoråˆå›BMI25ä»¥ä¸Šã®æ–¹é™å®šã€‚'
                }
            };
            
            const info = disclaimers[type];
            if (info) {
                modalBody.innerHTML = `
                    <h3 style="margin-top: 0; color: #333;">${info.title}</h3>
                    <p style="font-size: 14px; line-height: 1.6; color: #666;">${info.content}</p>
                `;
                modal.style.display = 'block';
            }
        }
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹é–¢æ•°
        function closeDisclaimerInfo() {
            document.getElementById('disclaimer-modal').style.display = 'none';
        }
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å¤–å´ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰é–‰ã˜ã‚‹
        window.onclick = function(event) {
            const modal = document.getElementById('disclaimer-modal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
        </script>

            <!-- æ¯”è¼ƒè¡¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section class="comparison-section">
                <div class="comparison-header">
                    <h2 class="comparison-title"><span id="comparison-region-name">åœ°åŸŸ</span></h2>
                    <h3 class="comparison-subtitle">ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã‚’<span class="accent-text">å¾¹åº•æ¯”è¼ƒ</span></h3>
                </div>
                
                <div class="comparison-table" id="comparison-tab-menu" data-active-tab="tab1">
                    <div class="comparison-tab-menu">
                        <div class="comparison-tab-menu-item tab-active" data-tab="tab1">ç·åˆ</div>
                        <div class="comparison-tab-menu-item" data-tab="tab2">æ–½è¡“å†…å®¹</div>
                        <div class="comparison-tab-menu-item" data-tab="tab3">ã‚µãƒ¼ãƒ“ã‚¹</div>
                    </div>
                    <table id="comparison-table">
                        <thead>
                            <tr id="comparison-header-row">
                                <!-- Headers will be dynamically generated from site-common-texts.json -->
                                <th>ã‚¯ãƒªãƒ‹ãƒƒã‚¯</th>
                                <th class="" style="">ç·åˆè©•ä¾¡</th>
                                <th class="" style="">è²»ç”¨</th>
                                <th class="" style="">ç‰¹å¾´</th>
                                <th>å…¬å¼ã‚µã‚¤ãƒˆ</th>
                                <th class="th-none" style="display: none;"></th>
                                <th class="th-none" style="display: none;"></th>
                                <th class="th-none" style="display: none;"></th>
                                <th class="th-none" style="display: none;"></th>
                                <th class="th-none" style="display: none;"></th>
                                <th class="th-none" style="display: none;"></th>
                                <th class="th-none" style="display: none;">è©³ç´°</th>
                            </tr>
                        </thead>
                        <tbody id="comparison-tbody">
                            <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹æ¯”è¼ƒè¡¨ã®å†…å®¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
                        </tbody>
                    </table>
                    <!-- æ³¨æ„äº‹é …ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ -->
                    <div class="disclaimer-accordion" style="margin-top: 15px;">
                        <!-- ç¬¬1æ®µéš: å„ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®æ³¨æ„äº‹é … -->
                        <div class="main-disclaimer">
                            <button id="comparison-disclaimer-button" class="main-disclaimer-header comparison-disclaimer-header" style="width: 100%; text-align: left; padding: 8px 12px; background-color: #fafafa; border: 1px solid #f0f0f0; border-radius: 3px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <span style="font-size: 10px; font-weight: 500; color: #666;">å„ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®æ³¨æ„äº‹é …</span>
                                <span id="main-arrow" style="font-size: 8px; color: rgb(153, 153, 153); transition: transform 0.2s; transform: rotate(0deg);">â–¼</span>
                            </button>
                            <div id="main-content" class="main-disclaimer-content" style="display: none; padding: 5px; background-color: rgb(252, 252, 252); border-right: 1px solid rgb(240, 240, 240); border-bottom: 1px solid rgb(240, 240, 240); border-left: 1px solid rgb(240, 240, 240); border-image: initial; border-top: none; border-radius: 0px 0px 3px 3px; margin-top: -5px;">
                                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹æ³¨é‡ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- æ¡ˆä»¶è©³ç´°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section class="clinic-details-section">
                <div class="details-header-banner">
                    <img src="images/details_header_bannar3.webp" alt="ã‚³ã‚¹ãƒ‘Ã—åŠ¹æœÃ—é€šã„ã‚„ã™ã•ã§é¸ã¶åŒ»ç™‚ç—©èº«ã‚¯ãƒªãƒ‹ãƒƒã‚¯BEST3" class="details-banner-image" loading="lazy" decoding="async">
                    <div id="detail-region-name">åœ°åŸŸã§äººæ°—ã®ã‚¯ãƒªãƒ‹ãƒƒã‚¯</div>
                    <div id="detail-rank-best">3<span style="font-size: 0.6em;"> é¸ï¼</span></div>
                </div>
                
                <div id="clinic-details-list" class="clinic-details-container">
                    <!-- è©³ç´°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                </div>
            </section>

            <!-- åŒ»ç™‚æƒ…å ±ã‚³ãƒ©ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå¤–éƒ¨JSã§æŒ¿å…¥ï¼‰ -->
            <div id="medical-columns-root"></div>
            <script src="columns/columns.js?v=2025091701" defer></script>

            <!-- åŒ»ç™‚æƒ…å ±ã‚³ãƒ©ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæ—§ï¼šéè¡¨ç¤ºï¼‰ -->
            <!-- åŒ»ç™‚æƒ…å ±ã‚³ãƒ©ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            



   <!-- è¿·ã£ãŸã‚‰1ä½ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="first-choice-recommendation-section">
                <div style="position: relative; display: inline-block; width: 100%;">
                    <img src="images/ranking_header_banner.webp" alt="" class="ranking-banner-image" loading="lazy" decoding="async">
                    <div id="first-choice-region-text" style="position: absolute;bottom: 44%;left: 6%;text-align: center;color: rgb(255, 255, 255);font-size: clamp(16px, 5vw, 38px);font-weight: 600;z-index: 10;pointer-events: none;">è¿·ã£ãŸã‚‰<span id="first-choice-clinic-name"></span>ãŒãŠã™ã™ã‚</div>
                </div><section class="first-choice-recommendation-section" style="border: 5px solid rgb(253 208 124);border-radius: -5px;padding: 5px 5px 10px 5px;margin: 0px 20px;background-color: #fffef8;">
                                
            
            <!-- ãƒãƒŠãƒ¼ -->
            <div class="first-choice-banner" style="text-align: center;/* margin-bottom: 30px; */">
                <img id="first-choice-banner-image" src="" alt="" style="max-width: 100%; height: auto;">
            </div>
            
            <!-- ã‚¯ãƒªãƒ‹ãƒƒã‚¯ãŒãŠã™ã™ã‚ã®3ã¤ã®ç†ç”± -->
            <div class="section-title" style="
margin: 2%;
text-align: center;
">
                <h3><span id="first-choice-title-clinic-name"></span>ãŒãŠã™ã™ã‚ã®<span style="color: #2CC7C5;">3ã¤ã®ç†ç”±</span></h3>
            </div>
            
            <!-- ãƒã‚¤ãƒ³ãƒˆ -->
            <div class="ribbon_point_box_no" id="first-choice-points">
                
                    <div class="ribbon_point_title2_s">
                        <i class="fas fa-clock point-icon-inline"></i>
                        <strong id="point1-title"></strong>
                    </div>
                    <div class="ribbon_point_txt">
                        <p id="point1-description" style="font-size:14px;"></p>
                    </div>
                    
                    <div class="ribbon_point_title2_s">
                        <i class="fas fa-clock point-icon-inline"></i>
                        <strong id="point2-title"></strong>
                    </div>
                    <div class="ribbon_point_txt">
                        <p id="point2-description" style="font-size:14px;"></p>
                    </div>
                    
                    <div class="ribbon_point_title2_s">
                        <i class="fas fa-clock point-icon-inline"></i>
                        <strong id="point3-title"></strong>
                    </div>
                    <div class="ribbon_point_txt">
                        <p id="point3-description" style="font-size:14px;"></p>
                    </div>
                    
                <div class="ribbon_point_link" id="first-choice-official-link">
                    ã€å…¬å¼ã€‘<a href="https://www.xn--ecki4eoz3204ct89aepry34c.com/draft/go/dio/?max_scroll=100&amp;region_id=013" target="_blank" rel="noopener"><strong>https://dioclinic.jp/</strong></a>
                </div>
            </div>
            
            <!-- Information -->
            <div class="campaign-container">
                <div class="campaign-header">INFORMATION!</div>
                <div class="campaign-content">
                    <div class="camp_header3">
                        <div class="info_logo">
                            <img id="first-choice-info-logo" src="" alt="">
                        </div>
                        <div class="camp_txt" id="first-choice-campaign-text">
                        </div>
                    </div>
                    
                    <div class="cv_box_img">
                        <div class="cta-microcopy" aria-hidden="true"><span class="cta-microcopy-label">ã‚¿ã‚¤ãƒ ã‚»ãƒ¼ãƒ«</span></div>
                        <span id="first-choice-achievement-text"></span>
                        <p class="btn btn_second_primary" style="margin-top: 10px;">
                            <a id="first-choice-cta-link" href="https://www.xn--ecki4eoz3204ct89aepry34c.com/draft/go/dio/?max_scroll=100&amp;region_id=013" target="_blank" rel="noopener">
                                <span class="bt_s" id="first-choice-cta-text"></span>
                                <span class="btn-arrow">â–¶</span>
                            </a>
                        </p>
                    </div>
                </div>
            </div>
            
            
            <!-- ãƒ‡ã‚£ã‚ªã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®ç¢ºèªäº‹é …ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ -->
            <div class="disclaimer-accordion" style="margin-top: 15px;">
                <button class="disclaimer-header" onclick="toggleDisclaimer('dio-campaign-first-choice')" style="width: 100%; text-align: left; padding: 8px 12px; background-color: #fafafa; border: 1px solid #f0f0f0; border-radius: 3px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                    <span id="first-choice-disclaimer-title" style="font-size: 10px; font-weight: 500; color: #666;"></span>
                    <span id="dio-campaign-first-choice-arrow" style="font-size: 8px; color: rgb(153, 153, 153); transition: transform 0.2s;">â–¼</span>
                </button>
                <div id="dio-campaign-first-choice-content" class="disclaimer-content" style="display: none; padding: 8px 12px; background-color: rgb(252, 252, 252); border-right: 1px solid rgb(240, 240, 240); border-bottom: 1px solid rgb(240, 240, 240); border-left: 1px solid rgb(240, 240, 240); border-image: initial; border-top: none; border-radius: 0px 0px 3px 3px; margin-top: -1px;">
                    <div style="font-size: 9px; color: #777; line-height: 1.4;">
                        
                    </div>
                </div>
            </div>
        </section>
            </div>

        </main>

        <!-- è©³ç´°æƒ…å ±ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="disclaimer-modal" class="disclaimer-modal" style="display: none;">
            <div class="disclaimer-modal-content">
                <span class="disclaimer-modal-close" onclick="closeDisclaimerInfo()">&times;</span>
                <div id="disclaimer-modal-body"></div>
            </div>
    </div>

    <!-- ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
    <button id="back-to-top" aria-label="ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹" title="ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹" style="display:none">
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
            <polyline points="6,14 12,8 18,14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    </button>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
        <div id="footer">
            <div class="footer_contents">
                <h4><a href="/">åŒ»ç™‚ãƒ€ã‚¤ã‚¨ãƒƒãƒˆæ¯”è¼ƒ.com</a></h4>
                
                <ul>
                    <h5>äººæ°—ã‚¯ãƒªãƒ‹ãƒƒã‚¯</h5>
                    <li><a href="#clinic1"></a></li>
                    <li><a href="#clinic2"></a></li>
                    <li><a href="#clinic3"></a></li>
                </ul>
                                
                <ul>
                    <h5>é‹å–¶</h5>
                    <li><a href="/common_page/company/" class="footer-page-link">é‹å–¶è€…æƒ…å ±</a></li>
                    <li><a href="/common_page/privacy/" class="footer-page-link">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></li>
                    <li><a href="/common_page/disclaimer/" class="footer-page-link">å…è²¬äº‹é …</a></li>
                    <li><a href="mailto:clinic.hikaku.review@gmail.com">ãŠå•ã„åˆã‚ã›</a></li>
                </ul>
                
            </div>
            
            <div class="footer-bottom">
                <p class="copyright"></div></p>
                <p class="disclaimer">â€»æœ¬ã‚µã‚¤ãƒˆã®æƒ…å ±ã¯å‚è€ƒç¨‹åº¦ã«ç•™ã‚ã€å¿…ãšå„ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã«ã”ç›¸è«‡ãã ã•ã„ã€‚</p>
            </div>
        </div>

        <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        <div class="sidebar-menu" id="sidebar-menu">
            <div class="sidebar-header">
                <h3 class="sidebar-title">çµã‚Šè¾¼ã¿æ¤œç´¢</h3>
                <button class="close-sidebar" id="close-sidebar" aria-label="é–‰ã˜ã‚‹">Ã—</button>
            </div>
            <div class="sidebar-content">
                <div class="sidebar-filter-group">
                    <label for="sidebar-region-select" class="sidebar-filter-label">åœ°åŸŸé¸æŠ</label>
                    <select id="sidebar-region-select" class="sidebar-select">
                        <!-- åœ°åŸŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                    </select>
                </div>
                <div class="sidebar-filter-group">
                    <label for="sidebar-clinic-search" class="sidebar-filter-label">ã‚¯ãƒªãƒ‹ãƒƒã‚¯åæ¤œç´¢</label>
                    <input type="text" id="sidebar-clinic-search" class="sidebar-search-input" placeholder="ã‚¯ãƒªãƒ‹ãƒƒã‚¯åã‚’å…¥åŠ›">
                </div>
                <div class="sidebar-filter-group">
                    <label for="sidebar-specialty-filter" class="sidebar-filter-label">å¯¾å¿œéƒ¨ä½</label>
                    <select id="sidebar-specialty-filter" class="sidebar-select">
                        <option value="">ã™ã¹ã¦ã®éƒ¨ä½</option>
                        <option value="face">é¡”</option>
                        <option value="upperarm">äºŒã®è…•</option>
                        <option value="stomach">ãŠè…¹</option>
                        <option value="buttocks">ãŠå°»</option>
                        <option value="thigh">å¤ªã‚‚ã‚‚</option>
                        <option value="other">ãã®ä»–</option>
                    </select>
                </div>
                <div class="sidebar-filter-group">
                    <label for="sidebar-hours-filter" class="sidebar-filter-label">åº—èˆ—æ•°</label>
                    <select id="sidebar-hours-filter" class="sidebar-select">
                        <option value="">åº—èˆ—æ•°æŒ‡å®šãªã—</option>
                        <option value="small">0ã€œ5åº—èˆ—</option>
                        <option value="medium">6ã€œ10åº—èˆ—</option>
                        <option value="large">10ã€œ20åº—èˆ—</option>
                        <option value="xlarge">ãã‚Œä»¥ä¸Š</option>
                    </select>
                </div>
                <div class="sidebar-search-button">
                    <a href="search-results/" class="sidebar-search-link">è©³ç´°æ¤œç´¢ãƒšãƒ¼ã‚¸ã¸</a>
                </div>
            </div>
        </div>

        <div id="error-message" class="error-message" style="display: none;">
            <p id="error-text"></p>
        </div>
        
        <!-- åœ°å›³ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="map-modal" class="map-modal" style="display: none;">
            <div class="map-modal-overlay"></div>
            <div class="map-modal-content">
                <div class="map-modal-header">
                    <h3 class="map-modal-title" id="map-modal-clinic-name">ã‚¯ãƒªãƒ‹ãƒƒã‚¯å</h3>
                    <button class="map-modal-close" id="map-modal-close" aria-label="é–‰ã˜ã‚‹">&times;</button>
                </div>
                <div class="map-modal-body">
                    <div class="map-modal-map" id="map-modal-map-container">
                        <!-- Google Maps iframe will be inserted here -->
                    </div>
                    <table class="map-modal-info-table">
                        <tbody>
                            <tr>
                                <th>ä½æ‰€</th>
                                <td id="map-modal-address"></td>
                            </tr>
                            <tr>
                                <th>ã‚¢ã‚¯ã‚»ã‚¹</th>
                                <td id="map-modal-access"></td>
                            </tr>
                            <tr>
                                <th>å–¶æ¥­æ™‚é–“</th>
                                <td id="map-modal-hours">11:00ã€œ21:00</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="map-modal-footer">
                        <p class="btn btn_second_primary" style="margin-top: 20px;">
                            <a id="map-modal-button" href="#" target="_blank" rel="noopener">
                                <span class="bt_s" id="map-modal-button-text">å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ç”³ã—è¾¼ã‚€</span>
                                <span class="btn-arrow">â–¶</span>
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slick Carousel JS -->
    <!-- Slick.jså‰Šé™¤æ¸ˆã¿ï¼jQueryã¯æœªä½¿ç”¨ã®ãŸã‚èª­ã¿è¾¼ã¿å‰Šé™¤ -->
    <script src="app.js?v=2025081417" defer></script>
    

    <!-- 1ä½ã‚¯ãƒªãƒ‹ãƒƒã‚¯å‹•çš„è¡¨ç¤ºæ©Ÿèƒ½ -->
    <script>
        // ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒªãƒ³ã‚¯ã®ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
        document.addEventListener('click', function(e) {
            const link = e.target.closest('a');
            if (link && link.href) {
                console.log('Link clicked:', link.href);

                // redirect.htmlã¸ã®ãƒªãƒ³ã‚¯ã®å ´åˆ
                if (link.href.includes('/redirect.html')) {
                    e.preventDefault(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒªãƒ³ã‚¯å‹•ä½œã‚’é˜»æ­¢

                    // URLã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŠ½å‡º
                    const url = new URL(link.href);
                    const hashParams = url.hash ? url.hash.substring(1) : '';

                    if (hashParams.startsWith('params=')) {
                        try {
                            const paramsJson = decodeURIComponent(hashParams.substring(7));
                            const params = JSON.parse(paramsJson);

                            // ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚è¿½åŠ ä¿å­˜
                            const currentUrl = new URL(window.location.href);
                            const originalParams = {};
                            for (const [key, value] of currentUrl.searchParams) {
                                originalParams[key] = value;
                            }
                            
                            // paramsã«å…ƒURLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
                            params.original_params = originalParams;
                            
                            console.log('ğŸ’¾ ä¿å­˜ã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:', params);

                            // localStorageã«ä¿å­˜
                            localStorage.setItem('redirectParams', JSON.stringify(params));
                            console.log('Saved redirect params to localStorage:', params);

                            // redirect.htmlã«ç§»å‹•
                            window.open(link.href, '_blank', 'noopener');
                        } catch (error) {
                            console.error('Failed to save redirect params:', error);
                        }
                    } else {
                        // ãƒãƒƒã‚·ãƒ¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰å–å¾—
                        const clinicId = url.searchParams.get('clinic_id');
                        const rank = url.searchParams.get('rank');
                        const regionId = url.searchParams.get('region_id');

                        if (clinicId) {
                            const params = {
                                clinic_id: clinicId,
                                rank: rank || '1',
                                region_id: regionId || '013'
                            };
                            localStorage.setItem('redirectParams', JSON.stringify(params));
                            console.log('Saved redirect params from URL to localStorage:', params);
                            window.open(link.href, '_blank', 'noopener');
                        }
                    }
                } else {
                    // ç›´æ¥URLã®å ´åˆã‚‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼ˆå¿µã®ãŸã‚ï¼‰
                    console.log('Direct URL link clicked:', link.href);
                }
            }
        });
        
                // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³é–¢æ•°
        function toggleRankingDisclaimer(event) {
            console.log('>>> toggleRankingDisclaimer called');

            // ã‚¤ãƒ™ãƒ³ãƒˆä¼æ’­ã‚’é˜²ã
            if (event) {
                event.stopPropagation();
                event.preventDefault();
                event.stopImmediatePropagation();
            }

            // ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³å†…ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯
            if (event && event.target) {
                const isRankingSection = event.target.closest('.ranking-disclaimer-header') ||
                                        event.target.closest('#ranking-disclaimers-content') ||
                                        event.target.id === 'ranking-main-arrow';
                if (!isRankingSection) {
                    console.log('>>> Event target is not in ranking section, ignoring');
                    return false;
                }
            }

            const content = document.getElementById('ranking-disclaimers-content');
            const arrow = document.getElementById('ranking-main-arrow');

            if (content) {
                const currentDisplay = window.getComputedStyle(content).display;
                console.log('>>> Ranking current display:', currentDisplay);

                if (content.style.display === 'none' || currentDisplay === 'none') {
                    content.style.display = 'block';
                    if (arrow) arrow.style.transform = 'rotate(180deg)';
                    console.log('>>> Opened ranking disclaimer');
                } else {
                    content.style.display = 'none';
                    if (arrow) arrow.style.transform = 'rotate(0deg)';
                    console.log('>>> Closed ranking disclaimer');
                }
            } else {
                console.error('>>> Ranking disclaimer content not found!');
            }

            return false;
        }

                // æ¯”è¼ƒè¡¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³é–¢æ•°ï¼ˆç¬¬ä¸€æ®µéšï¼‰
        function toggleComparisonDisclaimer(eventOrSlug) {
            console.log('>>> toggleComparisonDisclaimer called with:', eventOrSlug);

            // å¼•æ•°ãŒã‚¤ãƒ™ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆï¼ˆç¬¬ä¸€æ®µéšï¼‰
            if (eventOrSlug && typeof eventOrSlug === 'object' && eventOrSlug.target) {
                const event = eventOrSlug;
                // ã‚¤ãƒ™ãƒ³ãƒˆä¼æ’­ã‚’é˜²ã
                if (event) {
                    event.stopPropagation();
                    event.preventDefault();
                    event.stopImmediatePropagation();
                }

                const content = document.getElementById('main-content');
                const arrow = document.getElementById('main-arrow');

                if (content) {
                    const currentDisplay = window.getComputedStyle(content).display;
                    if (content.style.display === 'none' || currentDisplay === 'none') {
                        content.style.display = 'block';
                        if (arrow) arrow.style.transform = 'rotate(180deg)';
                    } else {
                        content.style.display = 'none';
                        if (arrow) arrow.style.transform = 'rotate(0deg)';
                    }
                }
                return false;
            }
        }

        // å„ã‚¯ãƒªãƒ‹ãƒƒã‚¯å€‹åˆ¥ã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ç”¨ã®æ±ç”¨é–¢æ•°
        function toggleClinicDisclaimer(uniqueSlug, event) {
            console.log('>>> toggleClinicDisclaimer called for:', uniqueSlug);
            if (event) {
                event.stopPropagation();
                event.preventDefault();
                event.stopImmediatePropagation();
            }

            const content = document.getElementById(`${uniqueSlug}-content`);
            const arrow = document.getElementById(`${uniqueSlug}-arrow`);

            if (content && arrow) {
                const currentDisplay = window.getComputedStyle(content).display;
                if (currentDisplay === 'none' || content.style.display === 'none') {
                    content.style.display = 'block';
                    if (arrow) arrow.style.transform = 'rotate(180deg)';
                } else {
                    content.style.display = 'none';
                    if (arrow) arrow.style.transform = 'rotate(0deg)';
                }
            } else {
                console.error('>>> disclaimer content/arrow not found for:', uniqueSlug);
            }
            return false;
        }
        
        // å…ƒã®toggleDisclaimeré–¢æ•°ï¼ˆã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”¨ï¼‰
        function toggleDisclaimer(clinicSlug) {
            console.log('>>> toggleDisclaimer called with clinicSlug:', clinicSlug);
            
            const content = document.getElementById(`${clinicSlug}-content`);
            const arrow = document.getElementById(`${clinicSlug}-arrow`);
            
            console.log('>>> Found content element:', !!content);
            console.log('>>> Found arrow element:', !!arrow);
            
            if (content) {
                // è¨ˆç®—ã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«ã‚‚ç¢ºèª
                const currentDisplay = window.getComputedStyle(content).display;
                console.log('>>> Current display style:', currentDisplay);
                console.log('>>> Content style.display:', content.style.display);
                
                if (currentDisplay === 'none' || content.style.display === 'none') {
                    content.style.display = 'block';
                    if (arrow) arrow.style.transform = 'rotate(180deg)';
                    console.log('>>> Opened accordion for:', clinicSlug);
                } else {
                    content.style.display = 'none';
                    if (arrow) arrow.style.transform = 'rotate(0deg)';
                    console.log('>>> Closed accordion for:', clinicSlug);
                }
            } else {
                console.error('>>> Content element not found for:', clinicSlug);
            }
        }
        
        // 1ä½ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®æƒ…å ±ã‚’è¨­å®š
        function setFirstChoiceClinic(clinicData) {
            if (!clinicData) return;
            
            // ã‚¯ãƒªãƒ‹ãƒƒã‚¯åã‚’å‹•çš„ã«å–å¾—
            const clinicCode = clinicData.code 
                || window.app?.dataManager?.getClinicCodeById?.(clinicData.id)
                || window.dataManager?.getClinicCodeById?.(clinicData.id);
            const dmForText = window.app?.dataManager || window.dataManager;
            const clinicName = (dmForText && typeof dmForText.getClinicText === 'function' 
                ? dmForText.getClinicText(clinicCode, 'ãƒ–ãƒ©ãƒ³ãƒ‰å', clinicData.name)
                : null) || clinicData.name || 'Oh my teeth';

            
            const clinicSlug = clinicData.code || clinicIdToSlugMap[clinicData.id] || clinicNameToSlugMap[clinicName] || clinicNameToSlugMap[clinicData.name] || 'omt';
            if (window.__DEBUG__) console.log('[DEBUG] setFirstChoiceClinic: clinicSlug', clinicSlug, 'clinicName', clinicName, 'clinicData', clinicData);
            
            
            // ãƒ†ã‚­ã‚¹ãƒˆè¦ç´ ã‚’æ›´æ–°
            const regionText = document.getElementById('first-choice-region-text');
            const clinicNameSpan = document.getElementById('first-choice-clinic-name');
            const titleClinicName = document.getElementById('first-choice-title-clinic-name');
            const bannerImage = document.getElementById('first-choice-banner-image');
            const infoLogo = document.getElementById('first-choice-info-logo');
            const campaignText = document.getElementById('first-choice-campaign-text');
            const achievementText = document.getElementById('first-choice-achievement-text');
            const ctaLink = document.getElementById('first-choice-cta-link');
            const ctaText = document.getElementById('first-choice-cta-text');
            
            if (clinicNameSpan) clinicNameSpan.textContent = clinicName;
            if (titleClinicName) titleClinicName.textContent = clinicName;
    
            if (ctaText) ctaText.textContent = `${clinicName}ã®å…¬å¼ã‚µã‚¤ãƒˆ`;
            
            // ã‚¯ãƒªãƒ‹ãƒƒã‚¯åˆ¥ã®å†…å®¹è¨­å®šï¼ˆDataManagerã‹ã‚‰å‹•çš„ã«å–å¾—ï¼‰
            const dm = window.app?.dataManager || window.dataManager;
            if (dm && typeof dm.getClinicText === 'function') {
                const clinicCode = clinicData.code || clinicSlug;
                
                // ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å‹•çš„ã«å–å¾—
                const campaignInfo = dm.getClinicText(clinicCode, 'INFORMATIONã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ', 'æœŸé–“é™å®šã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³<br>å®Ÿæ–½ä¸­');
                if (campaignText) campaignText.innerHTML = campaignInfo;

                // INFORMATIONã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆã‚’å‹•çš„ã«å–å¾—
                const achievementInfo = dm.getClinicText(clinicCode, 'INFORMATIONã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆ', 'ï¼¼æœˆé¡ãƒ»ç·é¡ãŒãƒªãƒ¼ã‚ºãƒŠãƒ–ãƒ«ãªã‚¯ãƒªãƒ‹ãƒƒã‚¯ï¼');
                if (achievementText) achievementText.textContent = achievementInfo;

                // URLã‚’å‹•çš„ã«ç”Ÿæˆ
                const regionId = new URLSearchParams(window.location.search).get('region_id') || '013';
                const ctaUrl = window.app && window.app.urlHandler ? 
                    window.app.urlHandler.getClinicUrlWithRegionId(clinicData.id) : 
                    `/injection-lipolysis001/go/${clinicSlug}/?region_id=${regionId}`;
                if (ctaLink) ctaLink.href = ctaUrl;
            } else {
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆDataManagerãŒåˆ©ç”¨ã§ããªã„å ´åˆï¼‰
                const clinicInfo = getClinicInfo(clinicSlug);
                if (campaignText) campaignText.innerHTML = clinicInfo.campaign;
                if (achievementText) achievementText.textContent = clinicInfo.achievement;
                if (ctaLink) ctaLink.href = clinicInfo.ctaUrl;
            }
            
            // 3ã¤ã®ç†ç”±ã‚’è¨­å®š
            setThreeReasons(clinicSlug);
            
            // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã®ç¢ºèªäº‹é …ã‚’æ›´æ–°
            updateFirstChoiceDisclaimer(clinicData);
            
            // CASEã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨­å®šï¼ˆ1ä½ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®ã¿ï¼‰
            if (window.dataManager && window.dataManager.getClinicText) {
                const clinicCode = clinicData.code || clinicSlug;
                if (window.__DEBUG__) console.log('[DEBUG] setFirstChoiceClinic: calling setCaseSection with clinicSlug', clinicSlug);
                setCaseSection(clinicSlug, null);
            } else {
                const clinicInfo = getClinicInfo(clinicSlug);
                if (window.__DEBUG__) console.log('[DEBUG] setFirstChoiceClinic: calling setCaseSection (fallback) with clinicSlug', clinicSlug);
                setCaseSection(clinicSlug, clinicInfo.points);
            }
        }

        // ç—‡ä¾‹å†™çœŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨­å®šï¼ˆå¸¸ã«è¡¨ç¤ºï¼‰
        function setCaseSection(clinicSlug, points) {
            const caseSection = document.getElementById('case-section');
            if (!caseSection) {
                if (window.__DEBUG__) console.log('[DEBUG] setCaseSection: #case-section not found');
                return;
            }
            // æ¡ˆä»¶è©³ç´°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ1ä½ï¼‰ã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã€ä¸Šéƒ¨ã®CASEã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯å¸¸ã«éè¡¨ç¤ºã«ã™ã‚‹
            caseSection.style.display = 'none';
            if (window.__DEBUG__) console.log('[DEBUG] setCaseSection: hidden top case-section to avoid duplication');
        }

        // ç—‡ä¾‹å†™çœŸã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã®åˆæœŸåŒ–
        function initCaseCarousel() {
            const container = document.querySelector('.case-carousel-container');
            const slides = document.querySelectorAll('.case-slide');
            const dots = document.querySelectorAll('.case-dot');
            const prevBtn = document.querySelector('.case-nav-prev');
            const nextBtn = document.querySelector('.case-nav-next');
            
            if (window.__DEBUG__) console.log('[DEBUG] initCaseCarousel: elements', { hasContainer: !!container, slides: slides.length, dots: dots.length, hasPrev: !!prevBtn, hasNext: !!nextBtn });
            if (!container || slides.length === 0) {
                if (window.__DEBUG__) console.log('[DEBUG] initCaseCarousel: container missing or no slides');
                return;
            }
            
            let currentIndex = 0;
            
            // ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
            function showSlide(index) {
                // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯
                if (index < 0) index = slides.length - 1;
                if (index >= slides.length) index = 0;
                currentIndex = index;
                
                // ã‚¹ãƒ©ã‚¤ãƒ‰ã®ä½ç½®ã‚’å¤‰æ›´ï¼ˆscroll-snapã‚’æ´»ç”¨ï¼‰
                const slideWidth = container.clientWidth;
                container.scrollTo({
                    left: slideWidth * currentIndex,
                    behavior: 'smooth'
                });
                
                // ãƒ‰ãƒƒãƒˆã®çŠ¶æ…‹ã‚’æ›´æ–°
                dots.forEach((dot, i) => {
                    if (i === currentIndex) {
                        dot.classList.add('active');
                        dot.style.background = '#2CC7C5';
                    } else {
                        dot.classList.remove('active');
                        dot.style.background = '#ccc';
                    }
                });
            }
            
            // å‰ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã¸
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    showSlide(currentIndex - 1);
                });
            }
            
            // æ¬¡ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã¸
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    showSlide(currentIndex + 1);
                });
            }
            
            // ãƒ‰ãƒƒãƒˆã‚¯ãƒªãƒƒã‚¯ã§ã‚¹ãƒ©ã‚¤ãƒ‰ç§»å‹•
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    showSlide(index);
                });
            });
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã§ãƒ‰ãƒƒãƒˆçŠ¶æ…‹ã‚’æ›´æ–°
            container.addEventListener('scroll', () => {
                const scrollLeft = container.scrollLeft;
                const slideWidth = container.clientWidth;
                const newIndex = Math.round(scrollLeft / slideWidth);
                if (newIndex !== currentIndex) {
                    currentIndex = newIndex;
                    dots.forEach((dot, i) => {
                        if (i === currentIndex) {
                            dot.classList.add('active');
                            dot.style.background = '#2CC7C5';
                        } else {
                            dot.classList.remove('active');
                            dot.style.background = '#ccc';
                        }
                    });
                }
            });
            
            // åˆæœŸè¡¨ç¤º
            if (window.__DEBUG__) console.log('[DEBUG] initCaseCarousel: showSlide(0)');
            showSlide(0);
        }

        // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã®ç¢ºèªäº‹é …ã‚’æ›´æ–°
        function updateFirstChoiceDisclaimer(clinicData) {
            const disclaimerHeader = document.getElementById('first-choice-disclaimer-title');
            const disclaimerArrow = document.getElementById('dio-campaign-first-choice-arrow');
            const disclaimerContentDiv = document.getElementById('dio-campaign-first-choice-content');
            const disclaimerButton = disclaimerArrow ? disclaimerArrow.closest('button.disclaimer-header') : null;
            const disclaimerContent = disclaimerContentDiv ? disclaimerContentDiv.querySelector('div') : null;
            
            if (!clinicData) return;
            
            const clinicName = clinicData.name || 'ãƒ‡ã‚£ã‚ªã‚¯ãƒªãƒ‹ãƒƒã‚¯';
            const clinicCode = clinicData.code || 'dio';
            
            // ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
            if (disclaimerHeader) {
                disclaimerHeader.textContent = `${clinicName}ã®ç¢ºèªäº‹é …`;
            }
            
            // ãƒœã‚¿ãƒ³ã®onclickå±æ€§/IDã¯å›ºå®šã®ã¾ã¾ã€‚åˆæœŸçŠ¶æ…‹ã®ã¿æ˜ç¤º
            if (disclaimerArrow) {
                disclaimerArrow.style.transform = 'rotate(0deg)';
            }
            if (disclaimerContentDiv) {
                disclaimerContentDiv.style.display = 'none';
                disclaimerContentDiv.classList.remove('force-show');
                disclaimerContentDiv.style.visibility = '';
                disclaimerContentDiv.style.opacity = '';
            }
            
            // ç¢ºèªäº‹é …ã®å†…å®¹ã‚’å‹•çš„ã«å–å¾—
            const dm2 = window.app?.dataManager || window.dataManager;
            if (dm2 && typeof dm2.getClinicText === 'function' && disclaimerContent) {
                const disclaimerText = dm2.getClinicText(clinicCode, 'INFORMATIONç¢ºèªäº‹é …', '');
                if (disclaimerText) {
                    const disclaimerHtml = disclaimerText.split('<br>')
                        .map(text => text.trim())
                        .filter(text => text)
                        .map(text => `<p>${text}</p>`)
                        .join('\n                        ');
                    disclaimerContent.innerHTML = disclaimerHtml;
                }
            }
        }
        
        // ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã‹ã‚‰åå‰ã‚’å–å¾—ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function getClinicNameFromCode(clinicCode) {
            const dm = window.app?.dataManager || window.dataManager;
            if (dm && dm.clinics) {
                const clinic = dm.clinics.find(c => c.code === clinicCode);
                if (clinic) return clinic.name;
            }
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾è¿”ã™
            return clinicCode;
        }

        // å‹•çš„ã«ã‚¯ãƒªãƒ‹ãƒƒã‚¯æƒ…å ±ã‚’å–å¾—ï¼ˆclinic-texts.jsonã‹ã‚‰ï¼‰
        function getClinicInfo(clinicSlug) {
            // DataManagerãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆã¯å‹•çš„ã«å–å¾—
            const dm3 = window.app?.dataManager || window.dataManager;
            if (dm3 && typeof dm3.getClinicText === 'function') {
                const clinicCode = clinicSlug;
                const clinicName = getClinicNameFromCode(clinicCode);
                return {
                    campaign: clinicInfo['INFORMATIONã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ'] || 'æœŸé–“é™å®šã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³<br>å®Ÿæ–½ä¸­',
                    achievement: 'ï¼¼' + (clinicInfo['å®Ÿç¸¾/ç—‡ä¾‹æ•°'] || 'å®Ÿç¸¾å¤šæ•°') + 'ï¼',
                    ctaUrl: clinicInfo['å…¬å¼ã‚µã‚¤ãƒˆURL'] || `https://www.example.com/go/${clinicSlug}/`
                };
            }
            
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆDataManagerãŒåˆ©ç”¨ã§ããªã„å ´åˆï¼‰
            return {
                campaign: 'æœŸé–“é™å®šã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³<br>å®Ÿæ–½ä¸­',
                achievement: 'ï¼¼å®Ÿç¸¾å¤šæ•°ï¼',
                ctaUrl: `https://www.example.com/go/${clinicSlug}/`
            };
        }

        // ã‚¯ãƒªãƒ‹ãƒƒã‚¯URLã‚’å–å¾—ï¼ˆCSVãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å‹•çš„ã«ï¼‰
        function getClinicUrl(clinicSlug, rank = 1) {
            // DataManagerã‹ã‚‰å‹•çš„ã«å–å¾—
            const dm4 = window.app?.dataManager || window.dataManager;
            if (dm4 && typeof dm4.getClinicText === 'function') {
                const urlKey = `é·ç§»å…ˆURLï¼ˆ${rank}ä½ï¼‰`;
                const url = dm4.getClinicText(clinicSlug, urlKey, '');
                if (url) {
                    return url;
                }
            }
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆå¿µã®ãŸã‚ï¼‰
            return 'https://sss.ac01.l-ad.net/cl/p1a64143O61e70f7/?bid=a6640dkh37648h88&param2=[ADID_PLACEHOLDER]&param3=[GCLID_PLACEHOLDER]';
        }

        // 3ã¤ã®ç†ç”±ã‚’è¨­å®š
        function setThreeReasons(clinicSlug) {
            const pointsContainer = document.getElementById('first-choice-points');
            if (!pointsContainer) return;
            
            // DataManagerã‚’ä½¿ç”¨ã—ã¦å‹•çš„ã«POINTã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã‚’å–å¾—
            const dm = window.app?.dataManager || window.dataManager;
            if (!dm) {
                console.error('DataManager not found');
                return;
            }

            
            const clinicKeyForTexts = (window.slugToNameMap && window.slugToNameMap[clinicSlug]) || clinicSlug;
            
            // DataManagerã‚’ä½¿ã£ã¦POINTæƒ…å ±ã‚’å–å¾—ï¼ˆæ­£ã—ã„ã‚­ãƒ¼ã‚’ä½¿ç”¨ï¼‰
            const point1Title = dm.getClinicText(clinicKeyForTexts, 'POINT1ã‚¿ã‚¤ãƒˆãƒ«', '');
            const point1Content = dm.getClinicText(clinicKeyForTexts, 'POINT1å†…å®¹', '');
            const point2Title = dm.getClinicText(clinicKeyForTexts, 'POINT2ã‚¿ã‚¤ãƒˆãƒ«', '');
            const point2Content = dm.getClinicText(clinicKeyForTexts, 'POINT2å†…å®¹', '');
            const point3Title = dm.getClinicText(clinicKeyForTexts, 'POINT3ã‚¿ã‚¤ãƒˆãƒ«', '');
            const point3Content = dm.getClinicText(clinicKeyForTexts, 'POINT3å†…å®¹', '');
            
            
            const reasons = [
                {
                    title: point1Title,
                    description: point1Content
                },
                {
                    title: point2Title,
                    description: point2Content
                },
                {
                    title: point3Title,
                    description: point3Content
                }
            ];
            
            const officialUrl = `https://www.xn--ecki4eoz3204ct89aepry34c.com/go/${clinicSlug}/?max_scroll=100&region_id=013`;
            
            // ã‚¢ã‚¤ã‚³ãƒ³ã‚’3ç¨®é¡ç”¨æ„ï¼ˆæ¡ˆä»¶è©³ç´°ãƒã‚¤ãƒ³ãƒˆã«åˆã‚ã›ãŸé›°å›²æ°—ï¼‰
            const iconClasses = ['fa-lightbulb', 'fa-mobile-alt', 'fa-yen-sign'];

            let html = '';
            reasons.forEach((reason, idx) => {
                const icon = iconClasses[idx] || 'fa-clock';
                html += `
                    <div class="ribbon_point_title2_s">
                        <i class="fas ${icon} point-icon-inline"></i>
                        <strong>${dm.processDecoTags ? dm.processDecoTags(reason.title) : reason.title}</strong>
                    </div>
                    <div class="ribbon_point_txt">
                        <p style="font-size:14px;">${dm.processDecoTags ? dm.processDecoTags(reason.description) : reason.description}</p>
                    </div>
                `;
            });
            
            // å…¬å¼ãƒªãƒ³ã‚¯ã‚‚æ›´æ–°
            const officialLink = document.getElementById('first-choice-official-link');
            if (officialLink) {
                const clinicUrl = dm.getClinicText(clinicKeyForTexts, 'å…¬å¼ã‚µã‚¤ãƒˆURL', 'https://omt.jp/');
                officialLink.innerHTML = `ã€å…¬å¼ã€‘<a href="${officialUrl}" target="_blank" rel="noopener"><strong>${clinicUrl}</strong></a>`;
            }
            
            pointsContainer.innerHTML = html + (pointsContainer.innerHTML.match(/<div class="ribbon_point_link"[\s\S]*?<\/div>/)?.[0] || '');
        }

        


        // 1ä½ã‚¯ãƒªãƒ‹ãƒƒã‚¯æƒ…å ±ã®æ›´æ–°ã‚’å®Ÿè¡Œ
        function updateFirstChoiceClinic() {
            if (!window.app || !window.app.dataManager) {
                if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: app/dataManager not ready');
                return;
            }
            
            // ç¾åœ¨ã®åœ°åŸŸIDã‚’å–å¾—
            const regionId = window.app.urlHandler ? window.app.urlHandler.getRegionId() : '013';
            if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: regionId', regionId);
            
            // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const ranking = window.app.dataManager.getRankingByRegionId(regionId);
            
            if (!ranking || !ranking.ranks) {
                if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: no ranking for region', regionId, ranking);
                console.log('No ranking data found for region:', regionId);
                return;
            }
            
            // 1ä½ã®ã‚¯ãƒªãƒ‹ãƒƒã‚¯IDã‚’å–å¾—
            const firstPlaceClinicId = ranking.ranks.no1;
            if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: firstPlaceClinicId', firstPlaceClinicId);
            
            if (!firstPlaceClinicId) {
                console.log('No first place clinic found');
                return;
            }
            
            // ã‚¯ãƒªãƒ‹ãƒƒã‚¯æƒ…å ±ã‚’å–å¾—
            const allClinics = window.app.dataManager.getAllClinics();
            const firstClinic = allClinics.find(clinic => clinic.id === firstPlaceClinicId);
            if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: firstClinic resolved', firstClinic);
            
            if (firstClinic) {
                setFirstChoiceClinic(firstClinic);
                // GTMã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºç«
                if (firstClinic.code === 'dio') {
                    window.dataLayer = window.dataLayer || [];
                    window.dataLayer.push({
                        'event': 'first_clinic_is_dio'
                    });
                    console.log('GTM Event: first_clinic_is_dio');
                }
            }
        }

        // åˆæœŸåŒ–æ™‚ã«å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            updateFirstChoiceClinic();
        });

        // app.jsãŒèª­ã¿è¾¼ã¾ã‚ŒãŸå¾Œã«ã‚‚å®Ÿè¡Œï¼ˆã‚¿ã‚¤ãƒãƒ¼ã§è¤‡æ•°å›è©¦è¡Œï¼‰
        let retryCount = 0;
        const maxRetries = 10;
        
        function tryUpdateFirstChoice() {
            if (window.app && window.app.dataManager && window.app.dataManager.getAllClinics().length > 0) {
                updateFirstChoiceClinic();
                return;
            }
            
            retryCount++;
            if (retryCount < maxRetries) {
                // console.log(`App not ready yet, retry ${retryCount}/${maxRetries}`);
                setTimeout(tryUpdateFirstChoice, 500);
            } else {
                // console.log('Max retries reached, app may not be loaded');
            }
        }
        
        // å°‘ã—é…å»¶ã—ã¦ã‹ã‚‰é–‹å§‹
        setTimeout(tryUpdateFirstChoice, 100);

        // åœ°åŸŸå¤‰æ›´æ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚‚è¿½åŠ 
        function setupRegionChangeWatcher() {
            if (!window.app || !window.app.urlHandler) {
                setTimeout(setupRegionChangeWatcher, 500);
                return;
            }
            
            let currentRegionId = window.app.urlHandler.getRegionId();
            
            // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´ã®ç›£è¦–
            setInterval(() => {
                const newRegionId = window.app.urlHandler ? window.app.urlHandler.getRegionId() : '013';
                if (newRegionId !== currentRegionId) {
                    currentRegionId = newRegionId;
                    console.log('Region changed to:', newRegionId);
                    setTimeout(() => updateFirstChoiceClinic(), 100); // å°‘ã—é…å»¶ã‚’å…¥ã‚Œã‚‹
                }
            }, 1000);
        }
        
        // åœ°åŸŸç›£è¦–ã‚’é–‹å§‹
        setupRegionChangeWatcher();
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«ã‚‚ã†ä¸€åº¦å®Ÿè¡Œ
        window.addEventListener('load', function() {
            setTimeout(() => updateFirstChoiceClinic(), 1000);
        });
        </script>

        <script>
        // PRè¡Œï¼ˆCSVã®pråˆ—ã‚’å„ã‚¯ãƒªãƒ‹ãƒƒã‚¯åˆ†ä¸¦ã¹ã‚‹ï¼‰
        (function renderPrLineWhenReady(){
            const target = document.getElementById('pr-line');
            if (!target) return;
            const tryRender = () => {
                const dm = window.app?.dataManager || window.dataManager;
                if (!dm || !dm.clinicTexts || !dm.clinics || dm.clinics.length === 0) return false;
                const items = [];
                dm.clinics.forEach(c => {
                    const val = dm.getClinicText(c.code || c.name, 'pr', '').trim();
                    if (val) items.push(val);
                });
                if (items.length === 0) return false;
                let html = 'PR ' + items[0];
                for (let i = 1; i < items.length; i++) html += '<br>' + items[i];
                target.innerHTML = html;
                return true;
            };
            if (!tryRender()) {
                let count = 0;
                const timer = setInterval(() => {
                    if (tryRender() || ++count > 60) clearInterval(timer);
                }, 250);
            }
        })();
        </script>
        <script>
        // ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ï¼ˆ6.5%ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§è¡¨ç¤ºï¼‰
        (function() {
            const THRESHOLD = 6.5; // %
            const btn = document.getElementById('back-to-top');
            if (!btn) return;
            function updateVisibility() {
                const doc = document.documentElement;
                const scrollTop = window.pageYOffset || doc.scrollTop || 0;
                const maxScroll = (doc.scrollHeight - doc.clientHeight) || 1;
                const percent = (scrollTop / maxScroll) * 100;
                if (percent >= THRESHOLD) {
                    btn.style.display = 'flex';
                } else {
                    btn.style.display = 'none';
                }
            }
            function updatePosition() {
                const cta = document.querySelector('.scroll-bottom-modal');
                let bottomPx = 20;
                if (cta && cta.classList && cta.classList.contains('show')) {
                    const rect = cta.getBoundingClientRect();
                    const gap = 16; // CTAã¨ãƒœã‚¿ãƒ³ã®é–“éš”
                    if (rect && rect.height) {
                        bottomPx = Math.max(20, Math.round(rect.height) + gap);
                    } else {
                        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆCSSã®min-heightã«è¿‘ã„å€¤ï¼‰
                        bottomPx = 96;
                    }
                }
                btn.style.bottom = bottomPx + 'px';
            }
            window.addEventListener('scroll', () => { updateVisibility(); updatePosition(); }, { passive: true });
            window.addEventListener('resize', () => { updateVisibility(); updatePosition(); });
            updateVisibility();
            updatePosition();
            // è¿½å¾“CTAã®çŠ¶æ…‹å¤‰åŒ–ã‚’ç›£è¦–
            const observer = new MutationObserver(() => { updatePosition(); });
            observer.observe(document.body, { childList: true, subtree: true, attributes: true });
            // é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã§ã‚‚èª¿æ•´
            document.addEventListener('click', (e) => {
                if (e.target && (e.target.closest && e.target.closest('.scroll-modal-close'))) {
                    setTimeout(updatePosition, 50);
                }
            });
            btn.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        })();
        </script>

    <!-- Debug panel: enable with ?debug=1 -->
    <script>
        (function(){
            try {
                const params = new URLSearchParams(window.location.search);
                const debugOn = params.get('debug') === '1';
                window.__DEBUG__ = debugOn;
                if (!debugOn) return;
                const panel = document.createElement('div');
                panel.id = 'debug-log-panel';
                panel.style.cssText = 'position:fixed;bottom:0;left:0;right:0;max-height:35vh;overflow:auto;background:#111;color:#0f0;font:12px/1.4 monospace;z-index:99999;border-top:1px solid #333;padding:6px;opacity:0.95;';
                const ctrl = document.createElement('div');
                ctrl.innerHTML = '<strong style="color:#fff">DEBUG LOG</strong> <button id="dbg-clear" style="margin-left:8px;">clear</button> <button id="dbg-hide" style="margin-left:4px;">hide</button>';
                ctrl.style.cssText = 'margin-bottom:4px;';
                const pre = document.createElement('pre');
                pre.id = 'debug-log';
                pre.style.margin = '0';
                panel.appendChild(ctrl);
                panel.appendChild(pre);
                document.body.appendChild(panel);
                const orig = { log: console.log, error: console.error, warn: console.warn, info: console.info };
                function appendLine(level, args){
                    const msg = Array.from(args).map(a=>{
                        try { return typeof a==='string'?a:JSON.stringify(a); } catch(e){ return String(a); }
                    }).join(' ');
                    const line = '['+level+'] '+msg+'\n';
                    pre.textContent += line;
                }
                console.log = function(){ appendLine('LOG', arguments); orig.log.apply(console, arguments); };
                console.error = function(){ appendLine('ERR', arguments); orig.error.apply(console, arguments); };
                console.warn = function(){ appendLine('WRN', arguments); orig.warn.apply(console, arguments); };
                console.info = function(){ appendLine('INF', arguments); orig.info.apply(console, arguments); };
                document.getElementById('dbg-clear').onclick = function(){ pre.textContent=''; };
                document.getElementById('dbg-hide').onclick = function(){ panel.style.display='none'; };
                console.log('[DEBUG] panel ready');
                document.addEventListener('DOMContentLoaded', function(){ console.log('[DEBUG] DOMContentLoaded fired'); });
                window.addEventListener('load', function(){ console.log('[DEBUG] window load fired'); });
                setTimeout(function(){
                    console.log('[DEBUG] runtime check', {
                        hasApp: !!window.app,
                        hasDataManager: !!(window.app && window.app.dataManager),
                        caseSection: !!document.getElementById('case-section'),
                        caseSlides: document.querySelectorAll('.case-slide').length
                    });
                }, 500);
            } catch(e) {}
        })();
    </script>

    <script>
        // æ¯”è¼ƒè¡¨ã®ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
        // å…¨ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¼•ãç¶™ãå…±é€šå‡¦ç†
        function preserveAllParams() {
            const currentParams = new URLSearchParams(window.location.search);
            if (currentParams.toString()) {
                // ã™ã¹ã¦ã®å†…éƒ¨ãƒªãƒ³ã‚¯ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
                const links = document.querySelectorAll('a[href^="/"], a[href^="./"], a[href^="../"], a[href]:not([href^="http"]):not([href^="#"])');
                links.forEach(link => {
                    try {
                        const url = new URL(link.href, window.location.origin);
                        // æ—¢å­˜ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¿æŒã—ã¤ã¤ã€ç¾åœ¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
                        for (const [key, value] of currentParams) {
                            if (!url.searchParams.has(key)) {
                                url.searchParams.set(key, value);
                            }
                        }
                        link.href = url.toString();
                    } catch (e) {
                        // ç›¸å¯¾URLã®å ´åˆ
                        const separator = link.href.includes('?') ? '&' : '?';
                        link.href = link.href + separator + currentParams.toString();
                    }
                });
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¼•ãç¶™ã
            preserveAllParams();
            
            const tabMenuItems = document.querySelectorAll('.comparison-tab-menu-item');
            const table = document.querySelector('.comparison-table table');
            
            function updateTableColumns(tabType) {
                if (!table) return;
                
                const tableContainer = document.querySelector('.comparison-table');
                const headers = table.querySelectorAll('th');
                const rows = table.querySelectorAll('tbody tr');
                
                // ã‚¿ãƒ–ã”ã¨ã®è¡¨ç¤ºåˆ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆå®Ÿéš›ã®HTMLã®åˆ—ç•ªå·ã«åˆã‚ã›ã¦ä¿®æ­£ï¼‰
                const tabColumnsMap = {
                    'tab1': [0, 1, 2, 3, 10], // ç·åˆ: ã‚¯ãƒªãƒ‹ãƒƒã‚¯å, ç·åˆè©•ä¾¡, è²»ç”¨, ç‰¹å¾´, å…¬å¼ã‚µã‚¤ãƒˆURL
                    'tab2': [0, 4, 5, 6, 10], // æ–½è¡“å†…å®¹: ã‚¯ãƒªãƒ‹ãƒƒã‚¯å, çŸ¯æ­£ç¯„å›², ç›®å®‰æœŸé–“, é€šé™¢é »åº¦, å…¬å¼ã‚µã‚¤ãƒˆURL
                    'tab3': [0, 7, 8, 9, 10]  // ã‚µãƒ¼ãƒ“ã‚¹: ã‚¯ãƒªãƒ‹ãƒƒã‚¯å, å®Ÿç¸¾/ç—‡ä¾‹æ•°, ãƒ¯ã‚¤ãƒ¤ãƒ¼çŸ¯æ­£ã®ç´¹ä»‹, ã‚µãƒãƒ¼ãƒˆ, å…¬å¼ã‚µã‚¤ãƒˆURL
                };
                
                const showIndexes = tabColumnsMap[tabType] || tabColumnsMap['tab1'];
                
                // ã‚³ãƒ³ãƒ†ãƒŠã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¿ãƒ–ã‚’è¨­å®š
                tableContainer.setAttribute('data-active-tab', tabType);
                
                // ã‚¿ãƒ–ã«å¿œã˜ã¦å‹•çš„ã«ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°ï¼ˆJSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å–å¾—ï¼‰
                const headerConfig = window.dataManager ? window.dataManager.getClinicHeaderConfig() : null;
                
                const headerTextMap = {
                    'tab1': [
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼1'] || 'ã‚¯ãƒªãƒ‹ãƒƒã‚¯', 
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼2'] || 'ç·åˆè©•ä¾¡',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼3'] || 'è²»ç”¨',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼4'] || 'ç‰¹å¾´',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼11'] || 'å…¬å¼ã‚µã‚¤ãƒˆ'
                    ],
                    'tab2': [
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼1'] || 'ã‚¯ãƒªãƒ‹ãƒƒã‚¯', 
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼5'] || 'çŸ¯æ­£ç¯„å›²',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼6'] || 'ç›®å®‰æœŸé–“',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼7'] || 'é€šé™¢é »åº¦',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼11'] || 'å…¬å¼ã‚µã‚¤ãƒˆ'
                    ], 
                    'tab3': [
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼1'] || 'ã‚¯ãƒªãƒ‹ãƒƒã‚¯', 
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼8'] || 'å®Ÿç¸¾/ç—‡ä¾‹æ•°',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼9'] || 'ãƒ¯ã‚¤ãƒ¤ãƒ¼çŸ¯æ­£ã®ç´¹ä»‹',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼10'] || 'ã‚µãƒãƒ¼ãƒˆ',
                        headerConfig && headerConfig['æ¯”è¼ƒè¡¨ãƒ˜ãƒƒãƒ€ãƒ¼11'] || 'å…¬å¼ã‚µã‚¤ãƒˆ'
                    ]
                };
                
                const currentHeaderTexts = headerTextMap[tabType] || headerTextMap['tab1'];
                
                // requestAnimationFrameã‚’ä½¿ç”¨ã—ã¦æœ€é©åŒ–
                requestAnimationFrame(() => {
                    // è¡¨ç¤ºã•ã‚Œã‚‹åˆ—ã®ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã‚’å‹•çš„ã«æ›´æ–°
                    let headerTextIndex = 0;
                    headers.forEach((th, index) => {
                        if (showIndexes.includes(index)) {
                            if (headerTextIndex < currentHeaderTexts.length) {
                                th.textContent = currentHeaderTexts[headerTextIndex];
                                headerTextIndex++;
                            }
                        }
                    });
                    
                    // ãƒ˜ãƒƒãƒ€ãƒ¼ã®è¡¨ç¤º/éè¡¨ç¤º
                    headers.forEach((th, index) => {
                        if (showIndexes.includes(index)) {
                            // è¡¨ç¤ºã™ã‚‹åˆ—: ã™ã¹ã¦ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‰Šé™¤
                            th.removeAttribute('style');
                            th.classList.remove('th-none');
                            th.classList.remove('td-none');
                        } else {
                            // éè¡¨ç¤ºã®åˆ—
                            th.style.display = 'none';
                            th.style.visibility = 'hidden';
                            th.style.width = '0';
                            th.style.padding = '0';
                            th.style.border = '0';
                            th.classList.add('th-none');
                        }
                    });
                    
                    // å„è¡Œã®ã‚»ãƒ«ã®è¡¨ç¤º/éè¡¨ç¤º
                    rows.forEach(row => {
                        const cells = row.querySelectorAll('td');
                        cells.forEach((td, index) => {
                            if (showIndexes.includes(index)) {
                                // è¡¨ç¤ºã™ã‚‹åˆ—: ã™ã¹ã¦ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‰Šé™¤
                                td.removeAttribute('style');
                                td.classList.remove('th-none');
                                td.classList.remove('td-none');
                            } else {
                                // éè¡¨ç¤ºã®åˆ—
                                td.style.display = 'none';
                                td.style.visibility = 'hidden';
                                td.style.width = '0';
                                td.style.padding = '0';
                                td.style.border = '0';
                                td.classList.add('td-none');
                            }
                        });
                    });
                });
            }
            
            tabMenuItems.forEach(item => {
                item.addEventListener('click', function() {
                    // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
                    tabMenuItems.forEach(tab => tab.classList.remove('tab-active'));
                    // ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
                    this.classList.add('tab-active');

                    // ã‚¿ãƒ–ã«å¿œã˜ã¦è¡¨ç¤ºåˆ—ã‚’åˆ‡ã‚Šæ›¿ãˆ
                    const tabType = this.getAttribute('data-tab');
                    updateTableColumns(tabType);
                });
            });
            
            // åˆæœŸè¡¨ç¤º
            updateTableColumns('tab1');
            
        });

        // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³æ©Ÿèƒ½ï¼ˆ2æ®µéšï¼‰
        // ã“ã®é–¢æ•°ã¯958è¡Œç›®ã§æ—¢ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã“ã§ã®å†å®šç¾©ã¯å‰Šé™¤
        // window.toggleMainDisclaimeré–¢æ•°ã¯958è¡Œç›®ã®å®Ÿè£…ã‚’ä½¿ç”¨
        
        window.toggleDisclaimer = function(clinicId) {
            console.log('>>> toggleDisclaimer called:', clinicId);
            
            // ç‰¹åˆ¥ãªå‡¦ç†: dio-campaign-first-choiceã®å ´åˆ
            if (clinicId === 'dio-campaign-first-choice') {
                // ã‚·ãƒ³ãƒ—ãƒ«ãªãƒˆã‚°ãƒ«å‡¦ç†
                const content = document.getElementById('dio-campaign-first-choice-content');
                const arrow = document.getElementById('dio-campaign-first-choice-arrow');
                
                if (content && arrow) {
                    if (content.style.display === 'none' || !content.style.display) {
                        content.style.display = 'block';
                        arrow.style.transform = 'rotate(180deg)';
                    } else {
                        content.style.display = 'none';
                        arrow.style.transform = 'rotate(0deg)';
                    }
                    return; // å‡¦ç†å®Œäº†
                }
                
                // å…ƒã®è¤‡é›‘ãªå‡¦ç†ã«ç¶šã
                const contentOriginal = document.getElementById('dio-campaign-first-choice-content');
                const arrowOriginal = document.getElementById('dio-campaign-first-choice-arrow');
                
                if (!(content && arrow)) {
                    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æ¯”è¼ƒè¡¨ä¸‹ã®ç¬¬äºŒæ®µéšï¼ˆidãŒ 'dio-content' / 'dio-arrow'ï¼‰ã«å¯¾å¿œ
                    const baseCode = (clinicId.split('-')[0] || 'dio');
                    const fbContent = document.getElementById(baseCode + '-content');
                    const fbArrow = document.getElementById(baseCode + '-arrow');
                    if (fbContent && fbArrow) {
                        const isHidden = window.getComputedStyle(fbContent).display === 'none';
                        if (isHidden) {
                            fbContent.style.display = 'block';
                            fbArrow.style.transform = 'rotate(180deg)';
                            console.log('â†’ Fallback general accordion opened:', baseCode);
                        } else {
                            fbContent.style.display = 'none';
                            fbArrow.style.transform = 'rotate(0deg)';
                            console.log('â†’ Fallback general accordion closed:', baseCode);
                        }
                        return; // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§å‡¦ç†å®Œäº†
                    }
                }

                if (content && arrow) {
                    // å¸¸ã«æ‰€å®šä½ç½®ã¸é€€é¿ï¼ˆå¿µã®ãŸã‚ï¼‰
                    try {
                        const mainContent = document.getElementById('main-content');
                        const accordion = content.closest('.disclaimer-accordion');
                        const containerAnchor = document.getElementById('first-choice-recommendation-section');
                        const sectionAnchor = document.querySelector('#first-choice-recommendation-section .first-choice-recommendation-section');
                        const targetAnchor = sectionAnchor || containerAnchor;
                        const isInMain = (() => {
                            let n = accordion;
                            while (n && n !== document.body) { if (n.id === 'main-content') return true; n = n.parentElement; }
                            return false;
                        })();
                        const needsMove = targetAnchor && accordion && accordion.parentElement !== targetAnchor;
                        console.log('Relocation check:', { hasAnchor: !!targetAnchor, isInMain, needsMove });
                        if (needsMove) {
                            targetAnchor.appendChild(accordion);
                            console.log('Relocated first-choice accordion under .first-choice-recommendation-section');
                        }
                    } catch (e) { console.warn('Relocation error:', e); }

                    const computed = window.getComputedStyle(content);
                    const currentDisplay = computed.display;
                    console.log('First choice accordion - current display:', currentDisplay, '| visibility:', computed.visibility, '| opacity:', computed.opacity);
                    
                    const accordion = content.closest('.disclaimer-accordion');
                    const section = content.closest('section');
                    const ancestors = [];
                    let node = content.parentElement;
                    while (node && node !== document.body) {
                        const cs = window.getComputedStyle(node);
                        const isHidden = cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0' || cs.maxHeight === '0px' || cs.height === '0px';
                        if (isHidden) {
                            const info = { tag: node.tagName, cls: node.className, id: node.id, display: cs.display, visibility: cs.visibility, opacity: cs.opacity, height: cs.height, maxHeight: cs.maxHeight };
                            ancestors.push(info);
                            // ä¸€æ™‚çš„ã«å¯è¦–åŒ–
                            node.classList.add('force-ancestor-show');
                            if (node.classList.contains('hidden')) {
                                node.classList.remove('hidden');
                                node.setAttribute('data-removed-hidden', '1');
                            }
                            if (node.hasAttribute('hidden')) {
                                node.removeAttribute('hidden');
                                node.setAttribute('data-removed-hidden-attr', '1');
                            }
                            if (node.getAttribute('aria-hidden') === 'true') {
                                node.setAttribute('aria-hidden', 'false');
                                node.setAttribute('data-changed-aria-hidden', '1');
                            }
                        }
                        node = node.parentElement;
                    }
                    if (ancestors.length) {
                        try {
                            console.log('Ancestors with potential hidden styles (text):\n' + JSON.stringify(ancestors, null, 2));
                        } catch (e) {
                            console.log('Ancestors with potential hidden styles:', ancestors);
                        }
                    }
                    
                    if (currentDisplay === 'none') {
                        // è¡¨ç¤º - å¼·åˆ¶çš„ã«è¦‹ãˆã‚‹çŠ¶æ…‹ã¸
                        if (accordion) {
                            accordion.style.display = 'block';
                            accordion.style.visibility = 'visible';
                            accordion.style.opacity = '1';
                            accordion.style.position = 'relative';
                            accordion.style.zIndex = '9999';
                        }
                        if (section) {
                            section.style.display = section.style.display || 'block';
                        }
                        content.classList.add('force-show');
                        content.style.display = 'block';
                        content.style.visibility = 'visible';
                        content.style.opacity = '1';
                        content.style.maxHeight = 'none';
                        content.style.height = 'auto';
                        arrow.style.transform = 'rotate(180deg)';
                        console.log('â†’ First choice accordion opened (applied force-show + inline styles)');
                        try {
                            const rect = content.getBoundingClientRect();
                            console.log('First choice content rect after open:', { top: rect.top, left: rect.left, width: rect.width, height: rect.height });
                        } catch (e) {}
                        
                        // main-disclaimer-contentãŒè¦ªè¦ç´ ã¨ã—ã¦å½±éŸ¿ã—ã¦ã„ã‚‹å ´åˆã®å¯¾å‡¦
                        const mainContent = document.getElementById('main-content');
                        if (mainContent && window.getComputedStyle(mainContent).display === 'none') {
                            const acc = content.closest('.disclaimer-accordion');
                            const sectionAnchor = document.querySelector('#first-choice-recommendation-section .first-choice-recommendation-section');
                            if (acc && mainContent.contains(acc)) {
                                if (sectionAnchor) {
                                    sectionAnchor.appendChild(acc);
                                    console.log('Relocated first-choice accordion (during open) under .first-choice-recommendation-section');
                                } else {
                                    mainContent.parentNode.insertBefore(acc, mainContent.nextSibling);
                                    console.log('Relocated first-choice accordion (during open) outside main-content');
                                }
                            }
                        }
                        
                        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦è¡¨ç¤ºã‚’ç¢ºèªï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼åˆ†ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼‰
                        try {
                            const doScroll = () => {
                                const rect2 = content.getBoundingClientRect();
                                const targetTop = rect2.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop) - 80;
                                window.scrollTo({ top: targetTop, behavior: 'auto' });
                                setTimeout(() => {
                                    const rect3 = content.getBoundingClientRect();
                                    console.log('After scroll check:', { pageYOffset: window.pageYOffset, rectTop: rect3.top, rectHeight: rect3.height });
                                    // ã¾ã è¦‹ãˆã¦ã„ãªã‘ã‚Œã°ã‚‚ã†ä¸€åº¦
                                    if (rect3.top < -10 || rect3.top > window.innerHeight) {
                                        const targetTop2 = rect3.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop) - 80;
                                        window.scrollTo({ top: targetTop2, behavior: 'auto' });
                                    }
                                }, 120);
                            };
                            doScroll();
                        } catch (e) {}
                    } else {
                        // éè¡¨ç¤º - å¼·åˆ¶è¡¨ç¤ºçŠ¶æ…‹ã‚’è§£é™¤
                        content.classList.remove('force-show');
                        content.style.display = 'none';
                        content.style.visibility = '';
                        content.style.opacity = '';
                        content.style.maxHeight = '';
                        content.style.height = '';
                        arrow.style.transform = 'rotate(0deg)';
                        console.log('â†’ First choice accordion closed');
                        try {
                            const rect = content.getBoundingClientRect();
                            console.log('First choice content rect after close:', { top: rect.top, left: rect.left, width: rect.width, height: rect.height });
                        } catch (e) {}
                        // ç¥–å…ˆã®ä¸Šæ›¸ãã‚¯ãƒ©ã‚¹ã‚’å¤–ã™
                        let n = content.parentElement;
                        while (n && n !== document.body) {
                            if (n.classList.contains('force-ancestor-show')) {
                                n.classList.remove('force-ancestor-show');
                                if (n.getAttribute('data-removed-hidden') === '1') {
                                    n.classList.add('hidden');
                                    n.removeAttribute('data-removed-hidden');
                                }
                                if (n.getAttribute('data-removed-hidden-attr') === '1') {
                                    n.setAttribute('hidden', '');
                                    n.removeAttribute('data-removed-hidden-attr');
                                }
                                if (n.getAttribute('data-changed-aria-hidden') === '1') {
                                    n.setAttribute('aria-hidden', 'true');
                                    n.removeAttribute('data-changed-aria-hidden');
                                }
                            }
                            n = n.parentElement;
                        }
                    }
                } else {
                    console.warn('First choice elements not found:', { hasContent: !!content, hasArrow: !!arrow });
                }
                return; // ç‰¹åˆ¥å‡¦ç†çµ‚äº†
            }
            
            // é€šå¸¸ã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å‡¦ç†ï¼ˆç¥–å…ˆå¯è¦–åŒ–ã¨è©³ç´°ãƒ­ã‚°ä»˜ãï¼‰
            const contentId = clinicId + '-content';
            const arrowId = clinicId + '-arrow';
            
            const content = document.getElementById(contentId);
            const arrow = document.getElementById(arrowId);
            
            console.log('Looking for:', contentId, 'â†’', content ? 'FOUND' : 'NOT FOUND');
            console.log('Looking for:', arrowId, 'â†’', arrow ? 'FOUND' : 'NOT FOUND');
            
            if (content && arrow) {
                const computed = window.getComputedStyle(content);
                const currentDisplay = computed.display;
                if (currentDisplay === 'none') {
                    // ç¥–å…ˆã®éè¡¨ç¤ºã‚’æ¤œå‡ºã—ã€ä¸€æ™‚çš„ã«å¯è¦–åŒ–
                    const ancestors = [];
                    let node = content.parentElement;
                    while (node && node !== document.body) {
                        const cs = window.getComputedStyle(node);
                        const isHidden = cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0' || cs.maxHeight === '0px' || cs.height === '0px';
                        if (isHidden) {
                            const info = { tag: node.tagName, cls: node.className, id: node.id, display: cs.display, visibility: cs.visibility, opacity: cs.opacity, height: cs.height, maxHeight: cs.maxHeight };
                            ancestors.push(info);
                            node.classList.add('force-ancestor-show');
                            if (node.classList.contains('hidden')) {
                                node.classList.remove('hidden');
                                node.setAttribute('data-removed-hidden', '1');
                            }
                            if (node.hasAttribute('hidden')) {
                                node.removeAttribute('hidden');
                                node.setAttribute('data-removed-hidden-attr', '1');
                            }
                            if (node.getAttribute('aria-hidden') === 'true') {
                                node.setAttribute('aria-hidden', 'false');
                                node.setAttribute('data-changed-aria-hidden', '1');
                            }
                        }
                        node = node.parentElement;
                    }
                    if (ancestors.length) {
                        try { console.log('Ancestors (general) with potential hidden styles (text):\n' + JSON.stringify(ancestors, null, 2)); } catch (e) { console.log('Ancestors (general):', ancestors); }
                    }
                    
                    // è¡¨ç¤º
                    content.style.display = 'block';
                    content.style.visibility = 'visible';
                    content.style.opacity = '1';
                    arrow.style.transform = 'rotate(180deg)';
                    console.log('â†’ General accordion opened:', clinicId);
                    try {
                        const rect = content.getBoundingClientRect();
                        console.log('General content rect after open:', { top: rect.top, left: rect.left, width: rect.width, height: rect.height });
                        const doScroll = () => {
                            const r2 = content.getBoundingClientRect();
                            const targetTop = r2.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop) - 80;
                            window.scrollTo({ top: targetTop, behavior: 'auto' });
                            setTimeout(() => {
                                const r3 = content.getBoundingClientRect();
                                console.log('After scroll check (general):', { pageYOffset: window.pageYOffset, rectTop: r3.top, rectHeight: r3.height });
                            }, 120);
                        };
                        doScroll();
                    } catch (e) {}
                } else {
                    // éè¡¨ç¤ºï¼ˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å«ã‚€ï¼‰
                    content.style.display = 'none';
                    content.style.visibility = '';
                    content.style.opacity = '';
                    arrow.style.transform = 'rotate(0deg)';
                    console.log('â†’ General accordion closed:', clinicId);
                    // ç¥–å…ˆã®ä¸Šæ›¸ãã‚¯ãƒ©ã‚¹ã‚’å¤–ã™
                    let n = content.parentElement;
                    while (n && n !== document.body) {
                        if (n.classList.contains('force-ancestor-show')) {
                            n.classList.remove('force-ancestor-show');
                            if (n.getAttribute('data-removed-hidden') === '1') {
                                n.classList.add('hidden');
                                n.removeAttribute('data-removed-hidden');
                            }
                            if (n.getAttribute('data-removed-hidden-attr') === '1') {
                                n.setAttribute('hidden', '');
                                n.removeAttribute('data-removed-hidden-attr');
                            }
                            if (n.getAttribute('data-changed-aria-hidden') === '1') {
                                n.setAttribute('aria-hidden', 'true');
                                n.removeAttribute('data-changed-aria-hidden');
                            }
                        }
                        n = n.parentElement;
                    }
                }
            }
        }

        // ãƒ‡ã‚£ã‚ªã‚¯ãƒªãƒ‹ãƒƒã‚¯ã®ç¢ºèªäº‹é …ãƒœã‚¿ãƒ³ã«ç›´æ¥ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
        // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã¯æ—¢ã«HTMLå†…ã®onclickå±æ€§ã§è¨­å®šæ¸ˆã¿ãªã®ã§ã€è¿½åŠ ã®è¨­å®šã¯ä¸è¦
        // äºŒé‡ã«ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãªã„ã‚ˆã†ã€ã“ã®éƒ¨åˆ†ã¯å‰Šé™¤
        
        // Add click animation to links
        document.querySelectorAll('.medical-columns-section .toc-link, .medical-columns-section .contact-link').forEach(link => {
            link.addEventListener('click', function(e) {
                // contact-linkã®å ´åˆã¯å¤–éƒ¨ãƒªãƒ³ã‚¯ãªã®ã§ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿å®Ÿè¡Œ
                this.style.opacity = '0.7';
                setTimeout(() => {
                    this.style.opacity = '1';
                }, 150);
                
                // toc-linkã®å ´åˆã®ã¿ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’å®Ÿè¡Œ
                if (this.classList.contains('toc-link') && this.getAttribute('href').startsWith('#')) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            });
        });

        // Tips Section Tab Functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners for disclaimer accordions
            const rankingBtn = document.getElementById('ranking-disclaimer-button');
            if (rankingBtn) {
                rankingBtn.addEventListener('click', toggleRankingDisclaimer);
            }

            const comparisonBtn = document.getElementById('comparison-disclaimer-button');
            if (comparisonBtn) {
                comparisonBtn.addEventListener('click', toggleComparisonDisclaimer);
            }

            const tabs = document.querySelectorAll('.tips-container .tab');
            const tabContents = document.querySelectorAll('.tips-container .tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabIndex = this.getAttribute('data-tab');
                    
                    // Update tab styles
                    tabs.forEach(t => {
                        t.style.backgroundColor = '#F1F1F1';
                        t.style.color = '#4C4C4C';
                    });
                    this.style.backgroundColor = '#2CC7C5';
                    this.style.color = 'white';
                    
                    // Show/hide content
                    tabContents.forEach(content => {
                        if (content.getAttribute('data-tab') === tabIndex) {
                            content.style.display = 'block';
                        } else {
                            content.style.display = 'none';
                        }
                    });
                });
            });
        });
    </script>
    
    <!-- Clinic URLs are now managed dynamically from CSV database -->
    
    <!-- URL Parameter Tracking -->
    <script src="/url-tracking.js?v=2025072201" defer></script>
    
    <!-- Service Workerç™»éŒ² -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {})
                    .catch(err => {});
            });
        }
    </script>
    
    <!-- Load common site data -->
    <script>
        // Load common site data
        fetch('../../../common_data/data/site-common-texts.json')
            .then(response => response.json())
            .then(data => {
                // Update site logo
                const siteLogo = document.getElementById('site-logo');
                if (siteLogo && data.ã‚µã‚¤ãƒˆå) {
                    siteLogo.textContent = data.ã‚µã‚¤ãƒˆå;
                }

                // Update favicon
                const favicon = document.getElementById('header-logo-icon');
                if (favicon && data.ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ç”»åƒãƒ‘ã‚¹) {
                    favicon.src = data.ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ç”»åƒãƒ‘ã‚¹;
                }

                // Update footer site name (copyright text contains both site name and copyright)
                const footerSiteName = document.querySelector('.copyright');
                if (footerSiteName && data.ã‚µã‚¤ãƒˆå) {
                    footerSiteName.textContent = 'Â© 2025 ' + data.ã‚µã‚¤ãƒˆå;
                }
                
            })
            .catch(error => {
                console.error('Error loading common site data:', error);
            });
    </script>
    <script src="/tracking-params.js" defer></script>
    
    <!-- ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
    <button id="back-to-top" class="back-to-top" aria-label="ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹">
        <span>^</span>
    </button>
    
    <script>
        // ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®æ©Ÿèƒ½
        (function() {
            const backToTopBtn = document.getElementById('back-to-top');
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®è¡¨ç¤º/éè¡¨ç¤ºåˆ¶å¾¡
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add('show');
                } else {
                    backToTopBtn.classList.remove('show');
                }
            });
            
            // ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        })();
    </script>
    
</body>
</html>
