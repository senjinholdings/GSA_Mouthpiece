---
import '../styles/global.css';
import BaseLayout from '../layouts/BaseLayout.astro';

const pageTitle = '2025Âπ¥ÊúÄÊñ∞ÁâàÔΩú„Åä„Åô„Åô„ÇÅÊØîËºÉ„É©„É≥„Ç≠„É≥„Ç∞';
const pageDescription = 'ÂÖ®ÂõΩ„ÅÆ‰∫∫Ê∞ó„ÇØ„É™„Éã„ÉÉ„ÇØ„ÇíÂæπÂ∫ïÊØîËºÉÔºÅÊñôÈáë„ÉªÁâπÂæ¥„ÉªÂè£„Ç≥„Éü„Éª„Ç¢„ÇØ„Çª„ÇπÊÉÖÂ†±„Å™„Å©„Çí„Çè„Åã„Çä„ÇÑ„Åô„Åè‰∏ÄË¶ß„Åß„ÅîÁ¥π‰ªã„ÄÇ„ÅÇ„Å™„Åü„Å´„Å¥„Å£„Åü„Çä„ÅÆ„ÇØ„É™„Éã„ÉÉ„ÇØÈÅ∏„Å≥„Çí„Çµ„Éù„Éº„Éà„Åó„Åæ„Åô„ÄÇ';
const basePath = import.meta.env.BASE_URL ?? '/';
const normalizedBasePath = basePath.endsWith('/') ? basePath : `${basePath}/`;
const asset = (resource: string) => {
  if (!resource) return normalizedBasePath;
  const idx = resource.search(/[?#]/);
  const pathPart = idx === -1 ? resource : resource.slice(0, idx);
  const suffix = idx === -1 ? '' : resource.slice(idx);
  const cleaned = pathPart.replace(/^\/+/, '');
  return `${normalizedBasePath}${cleaned}${suffix}`;
};

---
<BaseLayout title={pageTitle} description={pageDescription}>
  <Fragment slot="head">
    <script src={asset("common_data/js/gtm-loader.js")} defer></script>
    <!-- Vercel deployment: 2025-07-21 23:40 -->
        <!-- Map modal feature added: 2024-01-29 15:30 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
        <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">
        <style>
            /* „Éò„ÉÉ„ÉÄ„Éº„Çπ„Çø„Ç§„É´ */
            .site-header {
                position: sticky;
                top: 0;
                background: #fff;
                width: 100%;
                z-index: 1000;
                border-bottom: 1px solid #f0f0f0;
                box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
            }

            .header-content {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin: 0 auto;
                position: relative;
                padding: 8px 16px;
                max-width: 768px;
            }

            .logo-section {
                display: flex;
                align-items: center;
            }

            .logo-link {
                text-decoration: none;
                display: flex;
                align-items: center;
            }

            .logo-main {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .logo-icon {
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                transition: all 0.3s ease;
                padding: 2%;
                width: 40px;
                height: 40px;
            }

            .logo-icon img {
                width: 100%;
                object-fit: contain;
                display: block;
            }

            /* „Éò„ÉÉ„ÉÄ„Éº„É≠„Ç¥„ÅÆ„Çπ„Çø„Ç§„É´ */
            .site-logo {
                font-size: 0.9rem;
                font-weight: 700;
                letter-spacing: 1px;
                font-family: 'Comfortaa', cursive;
                background: linear-gradient(135deg, #21d2ce 0%, #2d84ce 100%);
                -webkit-text-fill-color: transparent;
                background-clip: text;
                -webkit-background-clip: text;
                -moz-background-clip: text;
                -moz-text-fill-color: transparent;
                margin: 0;
                text-shadow: 0 2px 10px rgba(102, 126, 234, 0.1);
                position: relative;
                transition: all 0.3s ease;
                display: inline-block;
            }

            .header-nav {
                display: flex;
                align-items: center;
                gap: 20px;
            }

            .hamburger-menu {
                background: none;
                border: none;
                cursor: pointer;
                display: flex;
                flex-direction: column;
                position: absolute;
                right: 20px;
                top: 50%;
                transform: translateY(-50%);
                justify-content: space-around;
                z-index: 1002;
                width: 40px;
                height: 35px;
                padding: 5px;
            }

            .hamburger-line {
                width: 100%;
                height: 3px;
                background-color: #4C4C4C;
                transition: all 0.3s ease;
            }

            /* „É¢„Éê„Ç§„É´ÂØæÂøú */
            @media (max-width: 768px) {
                .logo-icon {
                    width: 32px;
                    height: 32px;
                    font-size: 1.1rem;
                    border-radius: 6px;
                    box-shadow: 0 3px 10px rgba(102, 126, 234, 0.25);
                }

                .hamburger-menu {
                    width: 35px;
                    height: 35px;
                    padding: 5px;
                }

                .hamburger-line {
                    height: 2px;
                }
            }

            @media (max-width: 480px) {
                .header-content, .site-header {
                    width: 100% !important;
                    max-width: 100% !important;
                    box-sizing: border-box !important;
                    padding: 2px 4px !important;
                }
            }

            * { box-sizing: border-box; }
            *::before, *::after { box-sizing: inherit; }
            html { color-scheme: light; }
            body {
                margin: 0;
                padding: 0;
                font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                background-color: #ffffff;
                color: #333333;
                line-height: 1.6;
                display: flex;
                flex-direction: column;
                align-items: center;
                min-height: 100vh;
                width: 100%;
            }
            body > *:not(.sidebar-menu):not(.sidebar-overlay):not(.map-modal):not(.disclaimer-modal):not(.banner-modal):not(.scroll-bottom-modal) {
                width: 100%;
                max-width: 768px;
                margin: 0 auto;
            }
            img {
                max-width: 100%;
                display: block;
                height: auto;
            }
            a { color: inherit; text-decoration: none; }
            .container {
                width: 100%;
                max-width: 768px;
                margin: 0 auto;
                padding: 0 20px;
            }
            .site-header {
                position: sticky;
                top: 0;
                background-color: #ffffff;
                z-index: 1000;
                border-bottom: 1px solid #f0f0f0;
            }
            .header-content {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 10px 20px;
            }
            .logo-main {
                display: flex;
                align-items: center;
                gap: 10px;
            }
            .logo-icon img {
                width: 40px;
                height: 40px;
            }
            .site-logo {
                margin: 0;
                font-size: 1.1rem;
                font-weight: 700;
                letter-spacing: 0.02em;
            }
            .hero-section {
                position: relative;
                margin: 0;
            }
            .hero-image-wrapper {
                position: relative;
                width: 100%;
                max-width: 768px;
                margin: 0 auto;
                overflow: hidden;
                border-radius: 12px;
                background: #f9f9f9;
                aspect-ratio: 1500 / 928;
            }
            .hero-image {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
            @media (max-width: 768px) {
                .container { padding: 0 0px; }
                .header-content { padding: 12px; }
                .site-logo { font-size: 1rem; }
            }
        </style>
        <!-- ÈáçË¶Å„Å™„É™„ÇΩ„Éº„Çπ„ÅÆpreload -->
        <link rel="preload" as="image" href={asset("images/mv.webp")} fetchpriority="high" type="image/webp">
        <link rel="preload" as="style" href={asset("styles.css?v=2025080101")}>

        <!-- Google Fonts„ÅØ„Éó„É™„É≠„Éº„Éâ„Åõ„Åö„ÄÅÈÄöÂ∏∏„ÅÆ„É≠„Éº„Éâ„ÅÆ„Åø„Å´„Åô„Çã -->
        <!-- Critical CSS inline for immediate rendering -->
        <style is:inline>
          * { box-sizing: border-box; }
          body { margin: 0; padding: 0; font-family: 'Noto Sans JP', sans-serif; }
          .main-container { opacity: 0; transition: opacity 0.3s; }
          .main-container.loaded { opacity: 1; }
        </style>

        <!-- Preload critical resources -->
        <link rel="preload" href={asset("styles.css?v=2025081417")} as="style">
        <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" as="style">

        <!-- Load stylesheets -->
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        <!-- Old styles - will be replaced by Tailwind -->
        <link rel="stylesheet" href={asset("styles.css?v=2025081417")}>
        <link rel="icon" type="image/png" href={asset("common_data/images/favicon.png")} id="favicon">
        <!-- Critical CSS -->
        <!-- Font loading detection -->
        <script is:inline>
          // Add loaded class when DOM is ready
          document.addEventListener('DOMContentLoaded', function() {
            const mainContainer = document.querySelector('.main-container');
            if (mainContainer) {
              mainContainer.classList.add('loaded');
            }
          });
          // Font loading detection
          if ('fonts' in document) {
            document.fonts.ready.then(function(){
              document.documentElement.classList.add('fonts-loaded')
            })
          }
        </script>
  </Fragment>
  <div class="max-w-3xl mx-auto px-0 main-container">
          <!-- „Éò„ÉÉ„ÉÄ„Éº -->
          <header class="site-header">
              <div class="header-content">
                  <div class="logo-section">
                      <a href={asset("")} class="logo-link">
                          <div class="logo-main">
                              <span class="logo-icon"><img src={asset("common_data/images/favicon.png")} alt="ÂåªÁôÇ„ÉÄ„Ç§„Ç®„ÉÉ„ÉàÊØîËºÉ.com" id="header-logo-icon"></span>
                              <h1 class="site-logo" id="site-logo">ÁüØÊ≠£Ê≠ØÁßë„Åä„Åô„Åô„ÇÅÊØîËºÉ.com</h1>
                          </div>
                      </a>
                  </div>
                  <nav class="header-nav">
                      <button class="hamburger-menu" id="hamburger-menu" aria-label="„É°„Éã„É•„Éº">
                          <span class="hamburger-line"></span>
                          <span class="hamburger-line"></span>
                          <span class="hamburger-line"></span>
                      </button>
                  </nav>
              </div>
          </header>

          <!-- „É°„Ç§„É≥„Éì„Ç∏„É•„Ç¢„É´ -->
          <section class="relative w-full bg-gray-50 py-4">
              <div class="relative w-full max-w-3xl mx-auto px-3">
                  <picture>
                      <img src={asset("images/mv.webp")} alt="„Åä„Åô„Åô„ÇÅÊØîËºÉ„É©„É≥„Ç≠„É≥„Ç∞ - 2025Âπ¥ÊúÄÊñ∞Áâà" class="w-full h-auto object-cover rounded-xl" loading="eager" fetchpriority="high" decoding="async" width="1500" height="928">
                  <div id="mv-region-name" class="absolute top-[4%] left-[0.5%] text-center text-gray-500 font-semibold z-10 pointer-events-none rounded-lg" style="width: clamp(60px, 15vw, 115px); font-size: clamp(14px, 3.5vw, 27px); padding: clamp(4px, 1vw, 8px);"></div>
                  <div id="mv-left-appeal-text" class="absolute top-[25%] left-[14%] text-center text-gray-500 font-bold z-10 pointer-events-none" style="font-size: clamp(14px, 3.2vw, 25px); padding: clamp(6px, 1.5vw, 12px);"></div>
                  <svg id="mv-main-svg-text" class="absolute top-[35%] left-[39%] -translate-x-1/2 z-10 pointer-events-none overflow-visible" style="width: 60vw; height: 10vh;">
                      <text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#ff94ae" stroke="white" stroke-width="6px" paint-order="stroke" style="font-size: clamp(14px, 8vw, 56px);font-weight: 700;">
                          <tspan id="mv-region-text"></tspan>
                      </text>
                  </svg>
                  <svg id="mv-appeal1-text" class="absolute top-[52%] left-[39%] -translate-x-1/2 z-10 pointer-events-none overflow-visible" style="width: 60vw; height: 10vh;">
                      <text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#ff94ae" stroke="white" stroke-width="6px" paint-order="stroke" style="font-size: clamp(14px, 8vw, 62px); font-weight: 700;">

                      </text>
                  </svg>
              </div>
              <div id="pr-line" class="text-right px-5 py-1 text-gray-500 text-xs font-normal max-w-3xl mx-auto"></div>
          </section>

          <main>

              <!-- „É©„É≥„Ç≠„É≥„Ç∞Ë°®Á§∫„Çª„ÇØ„Ç∑„Éß„É≥ -->
              <section class="w-full bg-white">
                  <div class="max-w-3xl mx-auto px-0.5">
                      <div class="relative mb-4">
                          <img src={asset("images/ranking_header_banner.webp")} alt="" class="w-full h-auto rounded-lg" loading="lazy" decoding="async">
                          <div id="rank-region-name" class="absolute top-[6%] left-1/2 whitespace-nowrap -translate-x-1/2 text-center text-white font-semibold z-10 pointer-events-none" style="font-size: clamp(14px, 5.2vw, 37px);"></div>
                      </div>
                      <div id="ranking-list" class="flex flex-nowrap gap-3 w-full overflow-x-auto [&::-webkit-scrollbar]:hidden" style="padding: 0.1rem 0.2rem 0.1rem 0.2rem;">
                          <!-- „É©„É≥„Ç≠„É≥„Ç∞„ÅØJavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
                      </div>
                  </div>
              </section>

              <!-- „É©„É≥„Ç≠„É≥„Ç∞Ë°®Á§∫„Çª„ÇØ„Ç∑„Éß„É≥‰∏ã„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö -->
              <section id="ranking-disclaimers-section" class="disclaimers-section" style="padding: 0px 10px; background: #ffffff;">
                  <div class="container" style="max-width: 768px; margin: 0 auto;">
                      <!-- Ê≥®ÊÑè‰∫ãÈ†Ö„Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥ -->
                      <div class="disclaimer-accordion" style="margin-top: 15px;">
                          <!-- Á¨¨1ÊÆµÈöé: ÂêÑ„ÇØ„É™„Éã„ÉÉ„ÇØ„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö -->
                          <div class="main-disclaimer">
                              <button id="ranking-disclaimer-button" class="main-disclaimer-header ranking-disclaimer-header" style="width: 100%; text-align: left; padding: 8px 12px; background-color: #ffffff; border: 1px solid #f0f0f0; border-radius: 3px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                  <span style="font-size: 10px; font-weight: 500; color: #666;">ÂêÑ„ÇØ„É™„Éã„ÉÉ„ÇØ„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö</span>
                                  <span id="ranking-main-arrow" style="font-size: 8px; color: rgb(153, 153, 153); transition: transform 0.2s; transform: rotate(0deg);">‚ñº</span>
                              </button>
                              <div id="ranking-disclaimers-content" class="main-disclaimer-content" style="display: none; padding: 5px; background-color: rgb(252, 252, 252); border-right: 1px solid rgb(240, 240, 240); border-bottom: 1px solid rgb(240, 240, 240); border-left: 1px solid rgb(240, 240, 240); border-image: initial; border-top: none; border-radius: 0px 0px 3px 3px; margin-top: -5px;">
                                  <!-- ÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„ÇãÊ≥®Èáà„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
                              </div>
                          </div>
                      </div>
                  </div>
              </section>

              <!-- „É¶„Éº„Ç∂„Éº„ÅÆÊÇ©„Åø„ÇíËß£Ê∂à„Åô„Çã„Åü„ÇÅ„ÅÆTips -->
              <div class="tips-container max-w-3xl mx-auto my-5 px-2.5 relative">
                  <div class="tips-section w-full">
                      <div class="flex flex-col">
                          <!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
                          <div class="tabs flex gap-1.5 mb-0">
                              <div class="tab active flex-1 bg-[#2CC7C5] text-white px-4 py-2.5 text-center cursor-pointer rounded-t font-semibold transition-all duration-300 text-sm flex items-center justify-center" data-tab="0">
                                  <span class="tab-text"></span>
                              </div>
                              <div class="tab flex-1 bg-gray-100 text-gray-700 px-4 py-2.5 text-center cursor-pointer rounded-t font-semibold transition-all duration-300 text-sm flex items-center justify-center" data-tab="1">
                                  <span class="tab-text"></span>
                              </div>
                              <div class="tab flex-1 bg-gray-100 text-gray-700 px-4 py-2.5 text-center cursor-pointer rounded-t font-semibold transition-all duration-300 text-sm flex items-center justify-center" data-tab="2">
                                  <span class="tab-text"></span>
                              </div>
                          </div>

                          <!-- „Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç≥„É≥„ÉÜ„Éä -->
                          <div class="tab-contents relative bg-white border border-gray-300 rounded-b p-4">
                              <!-- „Çø„Éñ1: ÂäπÊûú -->
                              <div class="tab-content active block" data-tab="0">
                                  <div class="w-full mb-4">
                                      <img src={asset("images/Tips1.webp")} alt="ÂäπÊûú" class="w-full h-auto rounded" loading="lazy" decoding="async">
                                  </div>
                                  <p class="text-sm leading-relaxed text-gray-700 mb-4">

                                  </p>
                              </div>

                              <!-- „Çø„Éñ2: „ÇØ„É™„Éã„ÉÉ„ÇØÈÅ∏„Å≥ -->
                              <div class="tab-content hidden" data-tab="1">
                                  <div style="width: 100%; margin-bottom: 15px;">
                                      <img src={asset("images/Tips2.webp")} alt="„ÇØ„É™„Éã„ÉÉ„ÇØÈÅ∏„Å≥„ÅÆ„Éù„Ç§„É≥„Éà" style="width: 100%; height: auto; border-radius: 4px;" loading="lazy" decoding="async">
                                  </div>
                                  <p style="font-size: 14px; line-height: 1.8; color: #4C4C4C; margin-bottom: 15px;">

                                  </p>
                              </div>

                              <!-- „Çø„Éñ3: ‰ªä„Åå„Åä„Åô„Åô„ÇÅ -->
                              <div class="tab-content" data-tab="2" style="display: none;">
                                  <div style="width: 100%; margin-bottom: 15px;">
                                      <img src={asset("images/Tips3.webp")} alt="‰ªä„Åå„Åä„Åô„Åô„ÇÅ„ÅÆÁêÜÁî±" style="width: 100%; height: auto; border-radius: 4px;" loading="lazy" decoding="async">
                                  </div>
                                  <p style="font-size: 14px; line-height: 1.8; color: #4C4C4C; margin-bottom: 15px;">

                                  </p>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>

              <script is:inline>
                  // Tips section tab functionality
                  (function() {
                      const tabs = document.querySelectorAll('.tips-container .tab');
                      const tabContents = document.querySelectorAll('.tips-container .tab-content');

                      function updateTabs(index) {
                          // Update tabs
                          tabs.forEach((tab, i) => {
                              if (i === index) {
                                  tab.classList.add('active');
                                  tab.style.backgroundColor = '#2B5797';
                                  tab.style.color = 'white';
                              } else {
                                  tab.classList.remove('active');
                                  tab.style.backgroundColor = '#CCCCCC';
                                  tab.style.color = '#333';
                              }
                          });

                          // Update tab contents
                          tabContents.forEach((content, i) => {
                              if (i === index) {
                                  content.style.display = 'block';
                              } else {
                                  content.style.display = 'none';
                              }
                          });
                      }

                      // Tab click handlers
                      tabs.forEach((tab, index) => {
                          tab.addEventListener('click', () => updateTabs(index));
                      });
                  })();
              </script>

          <script is:inline>
          // Ë©≥Á¥∞ÊÉÖÂ†±„ÇíË°®Á§∫„Åô„ÇãÈñ¢Êï∞
          function showDisclaimerInfo(type) {
              const modal = document.getElementById('disclaimer-modal');
              const modalBody = document.getElementById('disclaimer-modal-body');

              const disclaimers = {
                  'dio-success-rate': {
                      title: '„ÉÄ„Ç§„Ç®„ÉÉ„ÉàÊàêÂäüÁéá99ÔºÖ„Å´„Å§„ÅÑ„Å¶',
                      content: '‚ÄªÊúÄÁµÇ‰ΩìÈáçÊ∏¨ÂÆö2023/2/1ÔΩû2023/7/31„ÅßËñ¨„Å™„Åó„ÄÅÈ£ü‰∫ãÊåáÂ∞é„Å™„Åó„ÇíÈô§„Åè„ÄÅ3„É∂Êúà„Ç≥„Éº„ÇπÔºà„Éì„É•„Éº„ÉÜ„Ç£„Éº/„É™„Éî„Éº„ÉàÈô§„ÅèÔºâ„ÅÆÂ•ëÁ¥ÑÁµÇ‰∫ÜËÄÖ„ÅåÂØæË±°„ÄÇÂäπÊûú„Å´„ÅØÂÄã‰∫∫Â∑Æ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂàùÂõû‰ΩìÈáç50kg‰ª•‰∏äorÂàùÂõûBMI25‰ª•‰∏ä„ÅÆÊñπÈôêÂÆö„ÄÇ'
                  }
              };

              const info = disclaimers[type];
              if (info) {
                  modalBody.innerHTML = `
                      <h3 style="margin-top: 0; color: #333;">${info.title}</h3>
                      <p style="font-size: 14px; line-height: 1.6; color: #666;">${info.content}</p>
                  `;
                  modal.style.display = 'block';
              }
          }

          // „É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„ÇãÈñ¢Êï∞
          function closeDisclaimerInfo() {
              document.getElementById('disclaimer-modal').style.display = 'none';
          }

          // „É¢„Éº„ÉÄ„É´„ÅÆÂ§ñÂÅ¥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Åü„ÇâÈñâ„Åò„Çã
          window.onclick = function(event) {
              const modal = document.getElementById('disclaimer-modal');
              if (event.target == modal) {
                  modal.style.display = 'none';
              }
          }
          </script>

              <!-- ÊØîËºÉË°®„Çª„ÇØ„Ç∑„Éß„É≥ -->
              <section class="py-5 px-2.5">
                  <div class="text-center mb-5">
                      <h2 class="text-2xl font-bold mb-2"><span id="comparison-region-name">Âú∞Âüü</span></h2>
                      <h3 class="text-lg">„ÇØ„É™„Éã„ÉÉ„ÇØ„Çí<span class="text-[#ff6b6b] font-bold">ÂæπÂ∫ïÊØîËºÉ</span></h3>
                  </div>

                  <div class="w-full max-w-3xl mx-auto overflow-x-auto" id="comparison-tab-menu" data-active-tab="tab1">
                      <div class="flex border-b border-gray-300 mb-0">
                          <div class="flex-1 py-2 px-4 text-center cursor-pointer bg-[#4C89B8] text-white font-semibold tab-active" data-tab="tab1">Á∑èÂêà</div>
                          <div class="flex-1 py-2 px-4 text-center cursor-pointer bg-gray-200 text-gray-700 font-semibold" data-tab="tab2">ÊñΩË°ìÂÜÖÂÆπ</div>
                          <div class="flex-1 py-2 px-4 text-center cursor-pointer bg-gray-200 text-gray-700 font-semibold" data-tab="tab3">„Çµ„Éº„Éì„Çπ</div>
                      </div>
                      <table id="comparison-table" class="w-full bg-white border border-gray-200">
                          <thead class="bg-gray-50">
                              <tr id="comparison-header-row" class="border-b border-gray-200">
                                  <!-- Headers will be dynamically generated from site-common-texts.json -->
                                  <th class="py-3 px-4 text-left text-sm font-semibold text-gray-700">„ÇØ„É™„Éã„ÉÉ„ÇØ</th>
                                  <th class="py-3 px-4 text-left text-sm font-semibold text-gray-700">Á∑èÂêàË©ï‰æ°</th>
                                  <th class="py-3 px-4 text-left text-sm font-semibold text-gray-700">Ë≤ªÁî®</th>
                                  <th class="py-3 px-4 text-left text-sm font-semibold text-gray-700">ÁâπÂæ¥</th>
                                  <th class="py-3 px-4 text-left text-sm font-semibold text-gray-700">ÂÖ¨Âºè„Çµ„Ç§„Éà</th>
                                  <th class="hidden"></th>
                                  <th class="hidden"></th>
                                  <th class="hidden"></th>
                                  <th class="hidden"></th>
                                  <th class="hidden"></th>
                                  <th class="hidden"></th>
                                  <th class="hidden">Ë©≥Á¥∞</th>
                              </tr>
                          </thead>
                          <tbody id="comparison-tbody" class="divide-y divide-gray-200">
                              <!-- ÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„ÇãÊØîËºÉË°®„ÅÆÂÜÖÂÆπ„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                          </tbody>
                      </table>
                      <!-- Ê≥®ÊÑè‰∫ãÈ†Ö„Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥ -->
                      <div class="disclaimer-accordion" style="margin-top: 15px;">
                          <!-- Á¨¨1ÊÆµÈöé: ÂêÑ„ÇØ„É™„Éã„ÉÉ„ÇØ„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö -->
                          <div class="main-disclaimer">
                              <button id="comparison-disclaimer-button" class="main-disclaimer-header comparison-disclaimer-header" style="width: 100%; text-align: left; padding: 8px 12px; background-color: #fafafa; border: 1px solid #f0f0f0; border-radius: 3px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                  <span style="font-size: 10px; font-weight: 500; color: #666;">ÂêÑ„ÇØ„É™„Éã„ÉÉ„ÇØ„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö</span>
                                  <span id="main-arrow" style="font-size: 8px; color: rgb(153, 153, 153); transition: transform 0.2s; transform: rotate(0deg);">‚ñº</span>
                              </button>
                              <div id="main-content" class="main-disclaimer-content" style="display: none; padding: 5px; background-color: rgb(252, 252, 252); border-right: 1px solid rgb(240, 240, 240); border-bottom: 1px solid rgb(240, 240, 240); border-left: 1px solid rgb(240, 240, 240); border-image: initial; border-top: none; border-radius: 0px 0px 3px 3px; margin-top: -5px;">
                                  <!-- ÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„ÇãÊ≥®Èáà„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
                              </div>
                          </div>
                      </div>
                  </div>
              </section>

              <!-- Ê°à‰ª∂Ë©≥Á¥∞„Çª„ÇØ„Ç∑„Éß„É≥ -->
              <section class="clinic-details-section">
                  <div class="details-header-banner">
                      <img src={asset("images/details_header_bannar3.webp")} alt="„Ç≥„Çπ„Éë√óÂäπÊûú√óÈÄö„ÅÑ„ÇÑ„Åô„Åï„ÅßÈÅ∏„Å∂ÂåªÁôÇÁó©Ë∫´„ÇØ„É™„Éã„ÉÉ„ÇØBEST3" class="details-banner-image" loading="lazy" decoding="async">
                      <div id="detail-region-name">Âú∞Âüü„Åß‰∫∫Ê∞ó„ÅÆ„ÇØ„É™„Éã„ÉÉ„ÇØ</div>
                      <div id="detail-rank-best">3<span style="font-size: 0.6em;"> ÈÅ∏ÔºÅ</span></div>
                  </div>

                  <div id="clinic-details-list" class="clinic-details-container">
                      <!-- Ë©≥Á¥∞„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅØJavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
                  </div>
              </section>

              <!-- ÂåªÁôÇÊÉÖÂ†±„Ç≥„É©„É†„Çª„ÇØ„Ç∑„Éß„É≥ÔºàÂ§ñÈÉ®JS„ÅßÊåøÂÖ•Ôºâ -->
              <div id="medical-columns-root"></div>
              <script src={asset("columns/columns.js?v=2025091701")} defer></script>

              <!-- ÂåªÁôÇÊÉÖÂ†±„Ç≥„É©„É†„Çª„ÇØ„Ç∑„Éß„É≥ÔºàÊóßÔºöÈùûË°®Á§∫Ôºâ -->
              <!-- ÂåªÁôÇÊÉÖÂ†±„Ç≥„É©„É†„Çª„ÇØ„Ç∑„Éß„É≥ -->




     <!-- Ëø∑„Å£„Åü„Çâ1‰Ωç„ÇØ„É™„Éã„ÉÉ„ÇØ„Çª„ÇØ„Ç∑„Éß„É≥ -->
              <div id="first-choice-recommendation-section">
                  <div style="position: relative; display: inline-block; width: 100%;">
                      <img src={asset("images/ranking_header_banner.webp")} alt="" class="ranking-banner-image" loading="lazy" decoding="async">
                      <div id="first-choice-region-text" style="position: absolute;bottom: 44%;left: 6%;text-align: center;color: rgb(255, 255, 255);font-size: clamp(16px, 5vw, 38px);font-weight: 600;z-index: 10;pointer-events: none;">Ëø∑„Å£„Åü„Çâ<span id="first-choice-clinic-name"></span>„Åå„Åä„Åô„Åô„ÇÅ</div>
                  </div><section class="first-choice-recommendation-section" style="border: 5px solid rgb(253 208 124);border-radius: -5px;padding: 5px 5px 10px 5px;margin: 0px 20px;background-color: #fffef8;">


              <!-- „Éê„Éä„Éº -->
              <div class="first-choice-banner" style="text-align: center;/* margin-bottom: 30px; */">
                  <img id="first-choice-banner-image" src="" alt="" style="max-width: 100%; height: auto;">
              </div>

              <!-- „ÇØ„É™„Éã„ÉÉ„ÇØ„Åå„Åä„Åô„Åô„ÇÅ„ÅÆ3„Å§„ÅÆÁêÜÁî± -->
              <div class="section-title" style="
  margin: 2%;
  text-align: center;
  ">
                  <h3><span id="first-choice-title-clinic-name"></span>„Åå„Åä„Åô„Åô„ÇÅ„ÅÆ<span style="color: #2CC7C5;">3„Å§„ÅÆÁêÜÁî±</span></h3>
              </div>

              <!-- „Éù„Ç§„É≥„Éà -->
              <div class="ribbon_point_box_no" id="first-choice-points">

                      <div class="ribbon_point_title2_s">
                          <i class="fas fa-clock point-icon-inline"></i>
                          <strong id="point1-title"></strong>
                      </div>
                      <div class="ribbon_point_txt">
                          <p id="point1-description" style="font-size:14px;"></p>
                      </div>

                      <div class="ribbon_point_title2_s">
                          <i class="fas fa-clock point-icon-inline"></i>
                          <strong id="point2-title"></strong>
                      </div>
                      <div class="ribbon_point_txt">
                          <p id="point2-description" style="font-size:14px;"></p>
                      </div>

                      <div class="ribbon_point_title2_s">
                          <i class="fas fa-clock point-icon-inline"></i>
                          <strong id="point3-title"></strong>
                      </div>
                      <div class="ribbon_point_txt">
                          <p id="point3-description" style="font-size:14px;"></p>
                      </div>

                  <div class="ribbon_point_link" id="first-choice-official-link">
                      „ÄêÂÖ¨Âºè„Äë<a href="https://www.xn--ecki4eoz3204ct89aepry34c.com/draft/go/dio/?max_scroll=100&amp;region_id=013" target="_blank" rel="noopener"><strong>https://dioclinic.jp/</strong></a>
                  </div>
              </div>

              <!-- Information -->
              <div class="campaign-container">
                  <div class="campaign-header">INFORMATION!</div>
                  <div class="campaign-content">
                      <div class="camp_header3">
                          <div class="info_logo">
                              <img id="first-choice-info-logo" src="" alt="">
                          </div>
                          <div class="camp_txt" id="first-choice-campaign-text">
                          </div>
                      </div>

                      <div class="cv_box_img">
                          <div class="cta-microcopy" aria-hidden="true"><span class="cta-microcopy-label">„Çø„Ç§„É†„Çª„Éº„É´</span></div>
                          <span id="first-choice-achievement-text"></span>
                          <p class="btn btn_second_primary" style="margin-top: 10px;">
                              <a id="first-choice-cta-link" href="https://www.xn--ecki4eoz3204ct89aepry34c.com/draft/go/dio/?max_scroll=100&amp;region_id=013" target="_blank" rel="noopener">
                                  <span class="bt_s" id="first-choice-cta-text"></span>
                                  <span class="btn-arrow">‚ñ∂</span>
                              </a>
                          </p>
                      </div>
                  </div>
              </div>


              <!-- „Éá„Ç£„Ç™„ÇØ„É™„Éã„ÉÉ„ÇØ„ÅÆÁ¢∫Ë™ç‰∫ãÈ†Ö„Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥ -->
              <div class="disclaimer-accordion" style="margin-top: 15px;">
                  <button class="disclaimer-header" onclick="toggleDisclaimer('dio-campaign-first-choice')" style="width: 100%; text-align: left; padding: 8px 12px; background-color: #fafafa; border: 1px solid #f0f0f0; border-radius: 3px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                      <span id="first-choice-disclaimer-title" style="font-size: 10px; font-weight: 500; color: #666;"></span>
                      <span id="dio-campaign-first-choice-arrow" style="font-size: 8px; color: rgb(153, 153, 153); transition: transform 0.2s;">‚ñº</span>
                  </button>
                  <div id="dio-campaign-first-choice-content" class="disclaimer-content" style="display: none; padding: 8px 12px; background-color: rgb(252, 252, 252); border-right: 1px solid rgb(240, 240, 240); border-bottom: 1px solid rgb(240, 240, 240); border-left: 1px solid rgb(240, 240, 240); border-image: initial; border-top: none; border-radius: 0px 0px 3px 3px; margin-top: -1px;">
                      <div style="font-size: 9px; color: #777; line-height: 1.4;">

                      </div>
                  </div>
              </div>
          </section>
              </div>

          </main>

          <!-- Ë©≥Á¥∞ÊÉÖÂ†±„É¢„Éº„ÉÄ„É´ -->
          <div id="disclaimer-modal" class="disclaimer-modal" style="display: none;">
              <div class="disclaimer-modal-content">
                  <span class="disclaimer-modal-close" onclick="closeDisclaimerInfo()">&times;</span>
                  <div id="disclaimer-modal-body"></div>
              </div>
      </div>

      <!-- „Éà„ÉÉ„Éó„Å´Êàª„Çã„Éú„Çø„É≥ -->
      <button id="back-to-top" aria-label="„Éà„ÉÉ„Éó„Å´Êàª„Çã" title="„Éà„ÉÉ„Éó„Å´Êàª„Çã" style="display:none">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
              <polyline points="6,14 12,8 18,14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
      </button>

      <!-- „Éï„ÉÉ„Çø„Éº -->
          <div id="footer">
              <div class="footer_contents">
                  <h4><a href={asset("")}>ÂåªÁôÇ„ÉÄ„Ç§„Ç®„ÉÉ„ÉàÊØîËºÉ.com</a></h4>

                  <ul>
                      <h5>‰∫∫Ê∞ó„ÇØ„É™„Éã„ÉÉ„ÇØ</h5>
                      <li><a href="#clinic1"></a></li>
                      <li><a href="#clinic2"></a></li>
                      <li><a href="#clinic3"></a></li>
                  </ul>

                  <ul>
                      <h5>ÈÅãÂñ∂</h5>
                      <li><a href={asset("common_page/company/")} class="footer-page-link">ÈÅãÂñ∂ËÄÖÊÉÖÂ†±</a></li>
                      <li><a href={asset("common_page/privacy/")} class="footer-page-link">„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº</a></li>
                      <li><a href={asset("common_page/disclaimer/")} class="footer-page-link">ÂÖçË≤¨‰∫ãÈ†Ö</a></li>
                      <li><a href="mailto:clinic.hikaku.review@gmail.com">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a></li>
                  </ul>

              </div>

              <div class="footer-bottom">
                  <p class="copyright"></div></p>
                  <p class="disclaimer">‚ÄªÊú¨„Çµ„Ç§„Éà„ÅÆÊÉÖÂ†±„ÅØÂèÇËÄÉÁ®ãÂ∫¶„Å´Áïô„ÇÅ„ÄÅÂøÖ„ÅöÂêÑ„ÇØ„É™„Éã„ÉÉ„ÇØ„Å´„ÅîÁõ∏Ë´á„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
              </div>
          </div>

          <!-- „Çµ„Ç§„Éâ„Éê„Éº„É°„Éã„É•„Éº -->
          <div class="sidebar-overlay" id="sidebar-overlay"></div>
          <div class="sidebar-menu" id="sidebar-menu">
              <div class="sidebar-header">
                  <h3 class="sidebar-title">Áµû„ÇäËæº„ÅøÊ§úÁ¥¢</h3>
                  <button class="close-sidebar" id="close-sidebar" aria-label="Èñâ„Åò„Çã">√ó</button>
              </div>
              <div class="sidebar-content">
                  <div class="sidebar-filter-group">
                      <label for="sidebar-region-select" class="sidebar-filter-label">Âú∞ÂüüÈÅ∏Êäû</label>
                      <select id="sidebar-region-select" class="sidebar-select">
                          <!-- Âú∞Âüü„Ç™„Éó„Ç∑„Éß„É≥„ÅØJavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
                      </select>
                  </div>
                  <div class="sidebar-filter-group">
                      <label for="sidebar-clinic-search" class="sidebar-filter-label">„ÇØ„É™„Éã„ÉÉ„ÇØÂêçÊ§úÁ¥¢</label>
                      <input type="text" id="sidebar-clinic-search" class="sidebar-search-input" placeholder="„ÇØ„É™„Éã„ÉÉ„ÇØÂêç„ÇíÂÖ•Âäõ">
                  </div>
                  <div class="sidebar-filter-group">
                      <label for="sidebar-specialty-filter" class="sidebar-filter-label">ÂØæÂøúÈÉ®‰Ωç</label>
                      <select id="sidebar-specialty-filter" class="sidebar-select">
                          <option value="">„Åô„Åπ„Å¶„ÅÆÈÉ®‰Ωç</option>
                          <option value="face">È°î</option>
                          <option value="upperarm">‰∫å„ÅÆËÖï</option>
                          <option value="stomach">„ÅäËÖπ</option>
                          <option value="buttocks">„ÅäÂ∞ª</option>
                          <option value="thigh">Â§™„ÇÇ„ÇÇ</option>
                          <option value="other">„Åù„ÅÆ‰ªñ</option>
                      </select>
                  </div>
                  <div class="sidebar-filter-group">
                      <label for="sidebar-hours-filter" class="sidebar-filter-label">Â∫óËàóÊï∞</label>
                      <select id="sidebar-hours-filter" class="sidebar-select">
                          <option value="">Â∫óËàóÊï∞ÊåáÂÆö„Å™„Åó</option>
                          <option value="small">0„Äú5Â∫óËàó</option>
                          <option value="medium">6„Äú10Â∫óËàó</option>
                          <option value="large">10„Äú20Â∫óËàó</option>
                          <option value="xlarge">„Åù„Çå‰ª•‰∏ä</option>
                      </select>
                  </div>
                  <div class="sidebar-search-button">
                      <a href="search-results/" class="sidebar-search-link">Ë©≥Á¥∞Ê§úÁ¥¢„Éö„Éº„Ç∏„Å∏</a>
                  </div>
              </div>
          </div>

          <div id="error-message" class="error-message" style="display: none;">
              <p id="error-text"></p>
          </div>

          <!-- Âú∞Âõ≥„É¢„Éº„ÉÄ„É´ -->
          <div id="map-modal" class="map-modal" style="display: none;">
              <div class="map-modal-overlay"></div>
              <div class="map-modal-content">
                  <div class="map-modal-header">
                      <h3 class="map-modal-title" id="map-modal-clinic-name">„ÇØ„É™„Éã„ÉÉ„ÇØÂêç</h3>
                      <button class="map-modal-close" id="map-modal-close" aria-label="Èñâ„Åò„Çã">&times;</button>
                  </div>
                  <div class="map-modal-body">
                      <div class="map-modal-map" id="map-modal-map-container">
                          <!-- Google Maps iframe will be inserted here -->
                      </div>
                      <table class="map-modal-info-table">
                          <tbody>
                              <tr>
                                  <th>‰ΩèÊâÄ</th>
                                  <td id="map-modal-address"></td>
                              </tr>
                              <tr>
                                  <th>„Ç¢„ÇØ„Çª„Çπ</th>
                                  <td id="map-modal-access"></td>
                              </tr>
                              <tr>
                                  <th>Âñ∂Ê•≠ÊôÇÈñì</th>
                                  <td id="map-modal-hours">11:00„Äú21:00</td>
                              </tr>
                          </tbody>
                      </table>
                      <div class="map-modal-footer">
                          <p class="btn btn_second_primary" style="margin-top: 20px;">
                              <a id="map-modal-button" href="#" target="_blank" rel="noopener">
                                  <span class="bt_s" id="map-modal-button-text">ÂÖ¨Âºè„Çµ„Ç§„Éà„Åã„ÇâÁî≥„ÅóËæº„ÇÄ</span>
                                  <span class="btn-arrow">‚ñ∂</span>
                              </a>
                          </p>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- Slick Carousel JS -->
      <!-- Slick.jsÂâäÈô§Ê∏à„ÅøÔºèjQuery„ÅØÊú™‰ΩøÁî®„ÅÆ„Åü„ÇÅË™≠„ÅøËæº„ÅøÂâäÈô§ -->
      <script src={asset("app.js?v=2025081417")} defer></script>


      <!-- 1‰Ωç„ÇØ„É™„Éã„ÉÉ„ÇØÂãïÁöÑË°®Á§∫Ê©üËÉΩ -->
      <script is:inline>
          // „É™„ÉÄ„Ç§„É¨„ÇØ„Éà„É™„É≥„ÇØ„ÅÆ„ÇØ„É™„ÉÉ„ÇØ„Éè„É≥„Éâ„É©„Éº
          document.addEventListener('click', function(e) {
              const link = e.target.closest('a');
              if (link && link.href) {
                  console.log('Link clicked:', link.href);

                  // redirect.html„Å∏„ÅÆ„É™„É≥„ÇØ„ÅÆÂ†¥Âêà
                  if (link.href.includes('/redirect.html')) {
                      e.preventDefault(); // „Éá„Éï„Ç©„É´„Éà„ÅÆ„É™„É≥„ÇØÂãï‰Ωú„ÇíÈòªÊ≠¢

                      // URL„Åã„Çâ„Éë„É©„É°„Éº„Çø„ÇíÊäΩÂá∫
                      const url = new URL(link.href);
                      const hashParams = url.hash ? url.hash.substring(1) : '';

                      if (hashParams.startsWith('params=')) {
                          try {
                              const paramsJson = decodeURIComponent(hashParams.substring(7));
                              const params = JSON.parse(paramsJson);

                              // ÁèæÂú®„ÅÆ„Éö„Éº„Ç∏„ÅÆ„Éë„É©„É°„Éº„Çø„ÇÇËøΩÂä†‰øùÂ≠ò
                              const currentUrl = new URL(window.location.href);
                              const originalParams = {};
                              for (const [key, value] of currentUrl.searchParams) {
                                  originalParams[key] = value;
                              }

                              // params„Å´ÂÖÉURL„Éë„É©„É°„Éº„Çø„ÇíËøΩÂä†
                              params.original_params = originalParams;

                              console.log('üíæ ‰øùÂ≠ò„Åô„Çã„Éë„É©„É°„Éº„Çø:', params);

                              // localStorage„Å´‰øùÂ≠ò
                              localStorage.setItem('redirectParams', JSON.stringify(params));
                              console.log('Saved redirect params to localStorage:', params);

                              // redirect.html„Å´ÁßªÂãï
                              window.open(link.href, '_blank', 'noopener');
                          } catch (error) {
                              console.error('Failed to save redirect params:', error);
                          }
                      } else {
                          // „Éè„ÉÉ„Ç∑„É•„Éë„É©„É°„Éº„Çø„Åå„Å™„ÅÑÂ†¥Âêà„ÅØURL„Éë„É©„É°„Éº„Çø„Åã„ÇâÂèñÂæó
                          const clinicId = url.searchParams.get('clinic_id');
                          const rank = url.searchParams.get('rank');
                          const regionId = url.searchParams.get('region_id');

                          if (clinicId) {
                              const params = {
                                  clinic_id: clinicId,
                                  rank: rank || '1',
                                  region_id: regionId || '013'
                              };
                              localStorage.setItem('redirectParams', JSON.stringify(params));
                              console.log('Saved redirect params from URL to localStorage:', params);
                              window.open(link.href, '_blank', 'noopener');
                          }
                      }
                  } else {
                      // Áõ¥Êé•URL„ÅÆÂ†¥Âêà„ÇÇ„Éë„É©„É°„Éº„Çø„Çí‰øùÂ≠òÔºàÂøµ„ÅÆ„Åü„ÇÅÔºâ
                      console.log('Direct URL link clicked:', link.href);
                  }
              }
          });

                  // „É©„É≥„Ç≠„É≥„Ç∞„Çª„ÇØ„Ç∑„Éß„É≥Áî®„ÅÆ„Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥Èñ¢Êï∞
          function toggleRankingDisclaimer(event) {
              console.log('>>> toggleRankingDisclaimer called');

              // „Ç§„Éô„É≥„Éà‰ºùÊí≠„ÇíÈò≤„Åê
              if (event) {
                  event.stopPropagation();
                  event.preventDefault();
                  event.stopImmediatePropagation();
              }

              // „Ç§„Éô„É≥„Éà„Çø„Éº„Ç≤„ÉÉ„Éà„Åå„É©„É≥„Ç≠„É≥„Ç∞„Çª„ÇØ„Ç∑„Éß„É≥ÂÜÖ„Åã„Å©„ÅÜ„Åã„Çí„ÉÅ„Çß„ÉÉ„ÇØ
              if (event && event.target) {
                  const isRankingSection = event.target.closest('.ranking-disclaimer-header') ||
                                          event.target.closest('#ranking-disclaimers-content') ||
                                          event.target.id === 'ranking-main-arrow';
                  if (!isRankingSection) {
                      console.log('>>> Event target is not in ranking section, ignoring');
                      return false;
                  }
              }

              const content = document.getElementById('ranking-disclaimers-content');
              const arrow = document.getElementById('ranking-main-arrow');

              if (content) {
                  const currentDisplay = window.getComputedStyle(content).display;
                  console.log('>>> Ranking current display:', currentDisplay);

                  if (content.style.display === 'none' || currentDisplay === 'none') {
                      content.style.display = 'block';
                      if (arrow) arrow.style.transform = 'rotate(180deg)';
                      console.log('>>> Opened ranking disclaimer');
                  } else {
                      content.style.display = 'none';
                      if (arrow) arrow.style.transform = 'rotate(0deg)';
                      console.log('>>> Closed ranking disclaimer');
                  }
              } else {
                  console.error('>>> Ranking disclaimer content not found!');
              }

              return false;
          }

                  // ÊØîËºÉË°®„Çª„ÇØ„Ç∑„Éß„É≥Áî®„ÅÆ„Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥Èñ¢Êï∞ÔºàÁ¨¨‰∏ÄÊÆµÈöéÔºâ
          function toggleComparisonDisclaimer(eventOrSlug) {
              console.log('>>> toggleComparisonDisclaimer called with:', eventOrSlug);

              // ÂºïÊï∞„Åå„Ç§„Éô„É≥„Éà„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆÂ†¥ÂêàÔºàÁ¨¨‰∏ÄÊÆµÈöéÔºâ
              if (eventOrSlug && typeof eventOrSlug === 'object' && eventOrSlug.target) {
                  const event = eventOrSlug;
                  // „Ç§„Éô„É≥„Éà‰ºùÊí≠„ÇíÈò≤„Åê
                  if (event) {
                      event.stopPropagation();
                      event.preventDefault();
                      event.stopImmediatePropagation();
                  }

                  const content = document.getElementById('main-content');
                  const arrow = document.getElementById('main-arrow');

                  if (content) {
                      const currentDisplay = window.getComputedStyle(content).display;
                      if (content.style.display === 'none' || currentDisplay === 'none') {
                          content.style.display = 'block';
                          if (arrow) arrow.style.transform = 'rotate(180deg)';
                      } else {
                          content.style.display = 'none';
                          if (arrow) arrow.style.transform = 'rotate(0deg)';
                      }
                  }
                  return false;
              }
          }

          // ÂêÑ„ÇØ„É™„Éã„ÉÉ„ÇØÂÄãÂà•„ÅÆ„Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥Áî®„ÅÆÊ±éÁî®Èñ¢Êï∞
          function toggleClinicDisclaimer(uniqueSlug, event) {
              console.log('>>> toggleClinicDisclaimer called for:', uniqueSlug);
              if (event) {
                  event.stopPropagation();
                  event.preventDefault();
                  event.stopImmediatePropagation();
              }

              const content = document.getElementById(`${uniqueSlug}-content`);
              const arrow = document.getElementById(`${uniqueSlug}-arrow`);

              if (content && arrow) {
                  const currentDisplay = window.getComputedStyle(content).display;
                  if (currentDisplay === 'none' || content.style.display === 'none') {
                      content.style.display = 'block';
                      if (arrow) arrow.style.transform = 'rotate(180deg)';
                  } else {
                      content.style.display = 'none';
                      if (arrow) arrow.style.transform = 'rotate(0deg)';
                  }
              } else {
                  console.error('>>> disclaimer content/arrow not found for:', uniqueSlug);
              }
              return false;
          }

          // ÂÖÉ„ÅÆtoggleDisclaimerÈñ¢Êï∞Ôºà„Ç≠„É£„É≥„Éö„Éº„É≥„Çª„ÇØ„Ç∑„Éß„É≥Áî®Ôºâ
          function toggleDisclaimer(clinicSlug) {
              console.log('>>> toggleDisclaimer called with clinicSlug:', clinicSlug);

              const content = document.getElementById(`${clinicSlug}-content`);
              const arrow = document.getElementById(`${clinicSlug}-arrow`);

              console.log('>>> Found content element:', !!content);
              console.log('>>> Found arrow element:', !!arrow);

              if (content) {
                  // Ë®àÁÆó„Åï„Çå„Åü„Çπ„Çø„Ç§„É´„ÇÇÁ¢∫Ë™ç
                  const currentDisplay = window.getComputedStyle(content).display;
                  console.log('>>> Current display style:', currentDisplay);
                  console.log('>>> Content style.display:', content.style.display);

                  if (currentDisplay === 'none' || content.style.display === 'none') {
                      content.style.display = 'block';
                      if (arrow) arrow.style.transform = 'rotate(180deg)';
                      console.log('>>> Opened accordion for:', clinicSlug);
                  } else {
                      content.style.display = 'none';
                      if (arrow) arrow.style.transform = 'rotate(0deg)';
                      console.log('>>> Closed accordion for:', clinicSlug);
                  }
              } else {
                  console.error('>>> Content element not found for:', clinicSlug);
              }
          }

          // 1‰Ωç„ÇØ„É™„Éã„ÉÉ„ÇØ„ÅÆÊÉÖÂ†±„ÇíË®≠ÂÆö
          function setFirstChoiceClinic(clinicData) {
              if (!clinicData) return;

              // „ÇØ„É™„Éã„ÉÉ„ÇØÂêç„ÇíÂãïÁöÑ„Å´ÂèñÂæó
              const clinicCode = clinicData.code 
                  || window.app?.dataManager?.getClinicCodeById?.(clinicData.id)
                  || window.dataManager?.getClinicCodeById?.(clinicData.id);
              const dmForText = window.app?.dataManager || window.dataManager;
              const clinicName = (dmForText && typeof dmForText.getClinicText === 'function' 
                  ? dmForText.getClinicText(clinicCode, '„Éñ„É©„É≥„ÉâÂêç', clinicData.name)
                  : null) || clinicData.name || 'Oh my teeth';


              const clinicSlug = clinicData.code || clinicIdToSlugMap[clinicData.id] || clinicNameToSlugMap[clinicName] || clinicNameToSlugMap[clinicData.name] || 'omt';
              if (window.__DEBUG__) console.log('[DEBUG] setFirstChoiceClinic: clinicSlug', clinicSlug, 'clinicName', clinicName, 'clinicData', clinicData);


              // „ÉÜ„Ç≠„Çπ„ÉàË¶ÅÁ¥†„ÇíÊõ¥Êñ∞
              const regionText = document.getElementById('first-choice-region-text');
              const clinicNameSpan = document.getElementById('first-choice-clinic-name');
              const titleClinicName = document.getElementById('first-choice-title-clinic-name');
              const bannerImage = document.getElementById('first-choice-banner-image');
              const infoLogo = document.getElementById('first-choice-info-logo');
              const campaignText = document.getElementById('first-choice-campaign-text');
              const achievementText = document.getElementById('first-choice-achievement-text');
              const ctaLink = document.getElementById('first-choice-cta-link');
              const ctaText = document.getElementById('first-choice-cta-text');

              if (clinicNameSpan) clinicNameSpan.textContent = clinicName;
              if (titleClinicName) titleClinicName.textContent = clinicName;

              if (ctaText) ctaText.textContent = `${clinicName}„ÅÆÂÖ¨Âºè„Çµ„Ç§„Éà`;

              // „ÇØ„É™„Éã„ÉÉ„ÇØÂà•„ÅÆÂÜÖÂÆπË®≠ÂÆöÔºàDataManager„Åã„ÇâÂãïÁöÑ„Å´ÂèñÂæóÔºâ
              const dm = window.app?.dataManager || window.dataManager;
              if (dm && typeof dm.getClinicText === 'function') {
                  const clinicCode = clinicData.code || clinicSlug;

                  // „Ç≠„É£„É≥„Éö„Éº„É≥„ÉÜ„Ç≠„Çπ„Éà„ÇíÂãïÁöÑ„Å´ÂèñÂæó
                  const campaignInfo = dm.getClinicText(clinicCode, 'INFORMATION„Ç≠„É£„É≥„Éö„Éº„É≥„ÉÜ„Ç≠„Çπ„Éà', 'ÊúüÈñìÈôêÂÆö„Ç≠„É£„É≥„Éö„Éº„É≥<br>ÂÆüÊñΩ‰∏≠');
                  if (campaignText) campaignText.innerHTML = campaignInfo;

                  // INFORMATION„Çµ„Éñ„ÉÜ„Ç≠„Çπ„Éà„ÇíÂãïÁöÑ„Å´ÂèñÂæó
                  const achievementInfo = dm.getClinicText(clinicCode, 'INFORMATION„Çµ„Éñ„ÉÜ„Ç≠„Çπ„Éà', 'ÔººÊúàÈ°ç„ÉªÁ∑èÈ°ç„Åå„É™„Éº„Ç∫„Éä„Éñ„É´„Å™„ÇØ„É™„Éã„ÉÉ„ÇØÔºè');
                  if (achievementText) achievementText.textContent = achievementInfo;

                  // URL„ÇíÂãïÁöÑ„Å´ÁîüÊàê
                  const regionId = new URLSearchParams(window.location.search).get('region_id') || '013';
                  const ctaUrl = window.app && window.app.urlHandler ? 
                      window.app.urlHandler.getClinicUrlWithRegionId(clinicData.id) : 
                      `/injection-lipolysis001/go/${clinicSlug}/?region_id=${regionId}`;
                  if (ctaLink) ctaLink.href = ctaUrl;
              } else {
                  // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºàDataManager„ÅåÂà©Áî®„Åß„Åç„Å™„ÅÑÂ†¥ÂêàÔºâ
                  const clinicInfo = getClinicInfo(clinicSlug);
                  if (campaignText) campaignText.innerHTML = clinicInfo.campaign;
                  if (achievementText) achievementText.textContent = clinicInfo.achievement;
                  if (ctaLink) ctaLink.href = clinicInfo.ctaUrl;
              }

              // 3„Å§„ÅÆÁêÜÁî±„ÇíË®≠ÂÆö
              setThreeReasons(clinicSlug);

              // „Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥„ÅÆÁ¢∫Ë™ç‰∫ãÈ†Ö„ÇíÊõ¥Êñ∞
              updateFirstChoiceDisclaimer(clinicData);

              // CASE„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË®≠ÂÆöÔºà1‰Ωç„ÇØ„É™„Éã„ÉÉ„ÇØ„ÅÆ„ÅøÔºâ
              if (window.dataManager && window.dataManager.getClinicText) {
                  const clinicCode = clinicData.code || clinicSlug;
                  if (window.__DEBUG__) console.log('[DEBUG] setFirstChoiceClinic: calling setCaseSection with clinicSlug', clinicSlug);
                  setCaseSection(clinicSlug, null);
              } else {
                  const clinicInfo = getClinicInfo(clinicSlug);
                  if (window.__DEBUG__) console.log('[DEBUG] setFirstChoiceClinic: calling setCaseSection (fallback) with clinicSlug', clinicSlug);
                  setCaseSection(clinicSlug, clinicInfo.points);
              }
          }

          // Áóá‰æãÂÜôÁúü„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË®≠ÂÆöÔºàÂ∏∏„Å´Ë°®Á§∫Ôºâ
          function setCaseSection(clinicSlug, points) {
              const caseSection = document.getElementById('case-section');
              if (!caseSection) {
                  if (window.__DEBUG__) console.log('[DEBUG] setCaseSection: #case-section not found');
                  return;
              }
              // Ê°à‰ª∂Ë©≥Á¥∞„Çª„ÇØ„Ç∑„Éß„É≥Ôºà1‰ΩçÔºâ„Å´Ë°®Á§∫„Åô„Çã„Åü„ÇÅ„ÄÅ‰∏äÈÉ®„ÅÆCASE„Çª„ÇØ„Ç∑„Éß„É≥„ÅØÂ∏∏„Å´ÈùûË°®Á§∫„Å´„Åô„Çã
              caseSection.style.display = 'none';
              if (window.__DEBUG__) console.log('[DEBUG] setCaseSection: hidden top case-section to avoid duplication');
          }

          // Áóá‰æãÂÜôÁúü„Ç´„É´„Éº„Çª„É´„ÅÆÂàùÊúüÂåñ
          function initCaseCarousel() {
              const container = document.querySelector('.case-carousel-container');
              const slides = document.querySelectorAll('.case-slide');
              const dots = document.querySelectorAll('.case-dot');
              const prevBtn = document.querySelector('.case-nav-prev');
              const nextBtn = document.querySelector('.case-nav-next');

              if (window.__DEBUG__) console.log('[DEBUG] initCaseCarousel: elements', { hasContainer: !!container, slides: slides.length, dots: dots.length, hasPrev: !!prevBtn, hasNext: !!nextBtn });
              if (!container || slides.length === 0) {
                  if (window.__DEBUG__) console.log('[DEBUG] initCaseCarousel: container missing or no slides');
                  return;
              }

              let currentIndex = 0;

              // „Çπ„É©„Ç§„Éâ„ÇíË°®Á§∫„Åô„ÇãÈñ¢Êï∞
              function showSlide(index) {
                  // „Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„ÅÆÁØÑÂõ≤„ÉÅ„Çß„ÉÉ„ÇØ
                  if (index < 0) index = slides.length - 1;
                  if (index >= slides.length) index = 0;
                  currentIndex = index;

                  // „Çπ„É©„Ç§„Éâ„ÅÆ‰ΩçÁΩÆ„ÇíÂ§âÊõ¥Ôºàscroll-snap„ÇíÊ¥ªÁî®Ôºâ
                  const slideWidth = container.clientWidth;
                  container.scrollTo({
                      left: slideWidth * currentIndex,
                      behavior: 'smooth'
                  });

                  // „Éâ„ÉÉ„Éà„ÅÆÁä∂ÊÖã„ÇíÊõ¥Êñ∞
                  dots.forEach((dot, i) => {
                      if (i === currentIndex) {
                          dot.classList.add('active');
                          dot.style.background = '#2CC7C5';
                      } else {
                          dot.classList.remove('active');
                          dot.style.background = '#ccc';
                      }
                  });
              }

              // Ââç„ÅÆ„Çπ„É©„Ç§„Éâ„Å∏
              if (prevBtn) {
                  prevBtn.addEventListener('click', () => {
                      showSlide(currentIndex - 1);
                  });
              }

              // Ê¨°„ÅÆ„Çπ„É©„Ç§„Éâ„Å∏
              if (nextBtn) {
                  nextBtn.addEventListener('click', () => {
                      showSlide(currentIndex + 1);
                  });
              }

              // „Éâ„ÉÉ„Éà„ÇØ„É™„ÉÉ„ÇØ„Åß„Çπ„É©„Ç§„ÉâÁßªÂãï
              dots.forEach((dot, index) => {
                  dot.addEventListener('click', () => {
                      showSlide(index);
                  });
              });

              // „Çπ„ÇØ„É≠„Éº„É´„Ç§„Éô„É≥„Éà„Åß„Éâ„ÉÉ„ÉàÁä∂ÊÖã„ÇíÊõ¥Êñ∞
              container.addEventListener('scroll', () => {
                  const scrollLeft = container.scrollLeft;
                  const slideWidth = container.clientWidth;
                  const newIndex = Math.round(scrollLeft / slideWidth);
                  if (newIndex !== currentIndex) {
                      currentIndex = newIndex;
                      dots.forEach((dot, i) => {
                          if (i === currentIndex) {
                              dot.classList.add('active');
                              dot.style.background = '#2CC7C5';
                          } else {
                              dot.classList.remove('active');
                              dot.style.background = '#ccc';
                          }
                      });
                  }
              });

              // ÂàùÊúüË°®Á§∫
              if (window.__DEBUG__) console.log('[DEBUG] initCaseCarousel: showSlide(0)');
              showSlide(0);
          }

          // „Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥„ÅÆÁ¢∫Ë™ç‰∫ãÈ†Ö„ÇíÊõ¥Êñ∞
          function updateFirstChoiceDisclaimer(clinicData) {
              const disclaimerHeader = document.getElementById('first-choice-disclaimer-title');
              const disclaimerArrow = document.getElementById('dio-campaign-first-choice-arrow');
              const disclaimerContentDiv = document.getElementById('dio-campaign-first-choice-content');
              const disclaimerButton = disclaimerArrow ? disclaimerArrow.closest('button.disclaimer-header') : null;
              const disclaimerContent = disclaimerContentDiv ? disclaimerContentDiv.querySelector('div') : null;

              if (!clinicData) return;

              const clinicName = clinicData.name || '„Éá„Ç£„Ç™„ÇØ„É™„Éã„ÉÉ„ÇØ';
              const clinicCode = clinicData.code || 'dio';

              // „Éò„ÉÉ„ÉÄ„Éº„ÉÜ„Ç≠„Çπ„Éà„ÇíÊõ¥Êñ∞
              if (disclaimerHeader) {
                  disclaimerHeader.textContent = `${clinicName}„ÅÆÁ¢∫Ë™ç‰∫ãÈ†Ö`;
              }

              // „Éú„Çø„É≥„ÅÆonclickÂ±ûÊÄß/ID„ÅØÂõ∫ÂÆö„ÅÆ„Åæ„Åæ„ÄÇÂàùÊúüÁä∂ÊÖã„ÅÆ„ÅøÊòéÁ§∫
              if (disclaimerArrow) {
                  disclaimerArrow.style.transform = 'rotate(0deg)';
              }
              if (disclaimerContentDiv) {
                  disclaimerContentDiv.style.display = 'none';
                  disclaimerContentDiv.classList.remove('force-show');
                  disclaimerContentDiv.style.visibility = '';
                  disclaimerContentDiv.style.opacity = '';
              }

              // Á¢∫Ë™ç‰∫ãÈ†Ö„ÅÆÂÜÖÂÆπ„ÇíÂãïÁöÑ„Å´ÂèñÂæó
              const dm2 = window.app?.dataManager || window.dataManager;
              if (dm2 && typeof dm2.getClinicText === 'function' && disclaimerContent) {
                  const disclaimerText = dm2.getClinicText(clinicCode, 'INFORMATIONÁ¢∫Ë™ç‰∫ãÈ†Ö', '');
                  if (disclaimerText) {
                      const disclaimerHtml = disclaimerText.split('<br>')
                          .map(text => text.trim())
                          .filter(text => text)
                          .map(text => `<p>${text}</p>`)
                          .join('\n                        ');
                      disclaimerContent.innerHTML = disclaimerHtml;
                  }
              }
          }

          // „ÇØ„É™„Éã„ÉÉ„ÇØ„Ç≥„Éº„Éâ„Åã„ÇâÂêçÂâç„ÇíÂèñÂæó„Åô„Çã„Éò„É´„Éë„ÉºÈñ¢Êï∞
          function getClinicNameFromCode(clinicCode) {
              const dm = window.app?.dataManager || window.dataManager;
              if (dm && dm.clinics) {
                  const clinic = dm.clinics.find(c => c.code === clinicCode);
                  if (clinic) return clinic.name;
              }
              // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºö„Ç≥„Éº„Éâ„Çí„Åù„ÅÆ„Åæ„ÅæËøî„Åô
              return clinicCode;
          }

          // ÂãïÁöÑ„Å´„ÇØ„É™„Éã„ÉÉ„ÇØÊÉÖÂ†±„ÇíÂèñÂæóÔºàclinic-texts.json„Åã„ÇâÔºâ
          function getClinicInfo(clinicSlug) {
              // DataManager„ÅåÂà©Áî®ÂèØËÉΩ„Å™Â†¥Âêà„ÅØÂãïÁöÑ„Å´ÂèñÂæó
              const dm3 = window.app?.dataManager || window.dataManager;
              if (dm3 && typeof dm3.getClinicText === 'function') {
                  const clinicCode = clinicSlug;
                  const clinicName = getClinicNameFromCode(clinicCode);
                  return {
                      campaign: clinicInfo['INFORMATION„Ç≠„É£„É≥„Éö„Éº„É≥„ÉÜ„Ç≠„Çπ„Éà'] || 'ÊúüÈñìÈôêÂÆö„Ç≠„É£„É≥„Éö„Éº„É≥<br>ÂÆüÊñΩ‰∏≠',
                      achievement: 'Ôºº' + (clinicInfo['ÂÆüÁ∏æ/Áóá‰æãÊï∞'] || 'ÂÆüÁ∏æÂ§öÊï∞') + 'Ôºè',
                      ctaUrl: clinicInfo['ÂÖ¨Âºè„Çµ„Ç§„ÉàURL'] || `https://www.example.com/go/${clinicSlug}/`
                  };
              }

              // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºàDataManager„ÅåÂà©Áî®„Åß„Åç„Å™„ÅÑÂ†¥ÂêàÔºâ
              return {
                  campaign: 'ÊúüÈñìÈôêÂÆö„Ç≠„É£„É≥„Éö„Éº„É≥<br>ÂÆüÊñΩ‰∏≠',
                  achievement: 'ÔººÂÆüÁ∏æÂ§öÊï∞Ôºè',
                  ctaUrl: `https://www.example.com/go/${clinicSlug}/`
              };
          }

          // „ÇØ„É™„Éã„ÉÉ„ÇØURL„ÇíÂèñÂæóÔºàCSV„Éá„Éº„Çø„Éô„Éº„Çπ„Åã„ÇâÂãïÁöÑ„Å´Ôºâ
          function getClinicUrl(clinicSlug, rank = 1) {
              // DataManager„Åã„ÇâÂãïÁöÑ„Å´ÂèñÂæó
              const dm4 = window.app?.dataManager || window.dataManager;
              if (dm4 && typeof dm4.getClinicText === 'function') {
                  const urlKey = `ÈÅ∑ÁßªÂÖàURLÔºà${rank}‰ΩçÔºâ`;
                  const url = dm4.getClinicText(clinicSlug, urlKey, '');
                  if (url) {
                      return url;
                  }
              }
              // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºàÂøµ„ÅÆ„Åü„ÇÅÔºâ
              return 'https://sss.ac01.l-ad.net/cl/p1a64143O61e70f7/?bid=a6640dkh37648h88&param2=[ADID_PLACEHOLDER]&param3=[GCLID_PLACEHOLDER]';
          }

          // 3„Å§„ÅÆÁêÜÁî±„ÇíË®≠ÂÆö
          function setThreeReasons(clinicSlug) {
              const pointsContainer = document.getElementById('first-choice-points');
              if (!pointsContainer) return;

              // DataManager„Çí‰ΩøÁî®„Åó„Å¶ÂãïÁöÑ„Å´POINT„Çø„Ç§„Éà„É´„Å®ÂÜÖÂÆπ„ÇíÂèñÂæó
              const dm = window.app?.dataManager || window.dataManager;
              if (!dm) {
                  console.error('DataManager not found');
                  return;
              }


              const clinicKeyForTexts = (window.slugToNameMap && window.slugToNameMap[clinicSlug]) || clinicSlug;

              // DataManager„Çí‰Ωø„Å£„Å¶POINTÊÉÖÂ†±„ÇíÂèñÂæóÔºàÊ≠£„Åó„ÅÑ„Ç≠„Éº„Çí‰ΩøÁî®Ôºâ
              const point1Title = dm.getClinicText(clinicKeyForTexts, 'POINT1„Çø„Ç§„Éà„É´', '');
              const point1Content = dm.getClinicText(clinicKeyForTexts, 'POINT1ÂÜÖÂÆπ', '');
              const point2Title = dm.getClinicText(clinicKeyForTexts, 'POINT2„Çø„Ç§„Éà„É´', '');
              const point2Content = dm.getClinicText(clinicKeyForTexts, 'POINT2ÂÜÖÂÆπ', '');
              const point3Title = dm.getClinicText(clinicKeyForTexts, 'POINT3„Çø„Ç§„Éà„É´', '');
              const point3Content = dm.getClinicText(clinicKeyForTexts, 'POINT3ÂÜÖÂÆπ', '');


              const reasons = [
                  {
                      title: point1Title,
                      description: point1Content
                  },
                  {
                      title: point2Title,
                      description: point2Content
                  },
                  {
                      title: point3Title,
                      description: point3Content
                  }
              ];

              const officialUrl = `https://www.xn--ecki4eoz3204ct89aepry34c.com/go/${clinicSlug}/?max_scroll=100&region_id=013`;

              // „Ç¢„Ç§„Ç≥„É≥„Çí3Á®ÆÈ°ûÁî®ÊÑèÔºàÊ°à‰ª∂Ë©≥Á¥∞„Éù„Ç§„É≥„Éà„Å´Âêà„Çè„Åõ„ÅüÈõ∞Âõ≤Ê∞óÔºâ
              const iconClasses = ['fa-lightbulb', 'fa-mobile-alt', 'fa-yen-sign'];

              let html = '';
              reasons.forEach((reason, idx) => {
                  const icon = iconClasses[idx] || 'fa-clock';
                  html += `
                      <div class="ribbon_point_title2_s">
                          <i class="fas ${icon} point-icon-inline"></i>
                          <strong>${dm.processDecoTags ? dm.processDecoTags(reason.title) : reason.title}</strong>
                      </div>
                      <div class="ribbon_point_txt">
                          <p style="font-size:14px;">${dm.processDecoTags ? dm.processDecoTags(reason.description) : reason.description}</p>
                      </div>
                  `;
              });

              // ÂÖ¨Âºè„É™„É≥„ÇØ„ÇÇÊõ¥Êñ∞
              const officialLink = document.getElementById('first-choice-official-link');
              if (officialLink) {
                  const clinicUrl = dm.getClinicText(clinicKeyForTexts, 'ÂÖ¨Âºè„Çµ„Ç§„ÉàURL', 'https://omt.jp/');
                  officialLink.innerHTML = `„ÄêÂÖ¨Âºè„Äë<a href="${officialUrl}" target="_blank" rel="noopener"><strong>${clinicUrl}</strong></a>`;
              }

              pointsContainer.innerHTML = html + (pointsContainer.innerHTML.match(/<div class="ribbon_point_link"[\s\S]*?<\/div>/)?.[0] || '');
          }




          // 1‰Ωç„ÇØ„É™„Éã„ÉÉ„ÇØÊÉÖÂ†±„ÅÆÊõ¥Êñ∞„ÇíÂÆüË°å
          function updateFirstChoiceClinic() {
              if (!window.app || !window.app.dataManager) {
                  if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: app/dataManager not ready');
                  return;
              }

              // ÁèæÂú®„ÅÆÂú∞ÂüüID„ÇíÂèñÂæó
              const regionId = window.app.urlHandler ? window.app.urlHandler.getRegionId() : '013';
              if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: regionId', regionId);

              // „É©„É≥„Ç≠„É≥„Ç∞„Éá„Éº„Çø„ÇíÂèñÂæó
              const ranking = window.app.dataManager.getRankingByRegionId(regionId);

              if (!ranking || !ranking.ranks) {
                  if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: no ranking for region', regionId, ranking);
                  console.log('No ranking data found for region:', regionId);
                  return;
              }

              // 1‰Ωç„ÅÆ„ÇØ„É™„Éã„ÉÉ„ÇØID„ÇíÂèñÂæó
              const firstPlaceClinicId = ranking.ranks.no1;
              if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: firstPlaceClinicId', firstPlaceClinicId);

              if (!firstPlaceClinicId) {
                  console.log('No first place clinic found');
                  return;
              }

              // „ÇØ„É™„Éã„ÉÉ„ÇØÊÉÖÂ†±„ÇíÂèñÂæó
              const allClinics = window.app.dataManager.getAllClinics();
              const firstClinic = allClinics.find(clinic => clinic.id === firstPlaceClinicId);
              if (window.__DEBUG__) console.log('[DEBUG] updateFirstChoiceClinic: firstClinic resolved', firstClinic);

              if (firstClinic) {
                  setFirstChoiceClinic(firstClinic);
                  // GTM„Ç§„Éô„É≥„Éà„ÅÆÁô∫ÁÅ´
                  if (firstClinic.code === 'dio') {
                      window.dataLayer = window.dataLayer || [];
                      window.dataLayer.push({
                          'event': 'first_clinic_is_dio'
                      });
                      console.log('GTM Event: first_clinic_is_dio');
                  }
              }
          }

          // ÂàùÊúüÂåñÊôÇ„Å´ÂÆüË°å
          document.addEventListener('DOMContentLoaded', function() {
              updateFirstChoiceClinic();
          });

          // app.js„ÅåË™≠„ÅøËæº„Åæ„Çå„ÅüÂæå„Å´„ÇÇÂÆüË°åÔºà„Çø„Ç§„Éû„Éº„ÅßË§áÊï∞ÂõûË©¶Ë°åÔºâ
          let retryCount = 0;
          const maxRetries = 10;

          function tryUpdateFirstChoice() {
              if (window.app && window.app.dataManager && window.app.dataManager.getAllClinics().length > 0) {
                  updateFirstChoiceClinic();
                  return;
              }

              retryCount++;
              if (retryCount < maxRetries) {
                  // console.log(`App not ready yet, retry ${retryCount}/${maxRetries}`);
                  setTimeout(tryUpdateFirstChoice, 500);
              } else {
                  // console.log('Max retries reached, app may not be loaded');
              }
          }

          // Â∞ë„ÅóÈÅÖÂª∂„Åó„Å¶„Åã„ÇâÈñãÂßã
          setTimeout(tryUpdateFirstChoice, 100);

          // Âú∞ÂüüÂ§âÊõ¥ÊôÇ„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇÇËøΩÂä†
          function setupRegionChangeWatcher() {
              if (!window.app || !window.app.urlHandler) {
                  setTimeout(setupRegionChangeWatcher, 500);
                  return;
              }

              let currentRegionId = window.app.urlHandler.getRegionId();

              // URL„Éë„É©„É°„Éº„ÇøÂ§âÊõ¥„ÅÆÁõ£Ë¶ñ
              setInterval(() => {
                  const newRegionId = window.app.urlHandler ? window.app.urlHandler.getRegionId() : '013';
                  if (newRegionId !== currentRegionId) {
                      currentRegionId = newRegionId;
                      console.log('Region changed to:', newRegionId);
                      setTimeout(() => updateFirstChoiceClinic(), 100); // Â∞ë„ÅóÈÅÖÂª∂„ÇíÂÖ•„Çå„Çã
                  }
              }, 1000);
          }

          // Âú∞ÂüüÁõ£Ë¶ñ„ÇíÈñãÂßã
          setupRegionChangeWatcher();

          // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÊôÇ„Å´„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÂÆüË°å
          window.addEventListener('load', function() {
              setTimeout(() => updateFirstChoiceClinic(), 1000);
          });
          </script>

          <script is:inline>
          // PRË°åÔºàCSV„ÅÆprÂàó„ÇíÂêÑ„ÇØ„É™„Éã„ÉÉ„ÇØÂàÜ‰∏¶„Åπ„ÇãÔºâ
          (function renderPrLineWhenReady(){
              const target = document.getElementById('pr-line');
              if (!target) return;
              const tryRender = () => {
                  const dm = window.app?.dataManager || window.dataManager;
                  if (!dm || !dm.clinicTexts || !dm.clinics || dm.clinics.length === 0) return false;
                  const items = [];
                  dm.clinics.forEach(c => {
                      const val = dm.getClinicText(c.code || c.name, 'pr', '').trim();
                      if (val) items.push(val);
                  });
                  if (items.length === 0) return false;
                  let html = 'PR ' + items[0];
                  for (let i = 1; i < items.length; i++) html += '<br>' + items[i];
                  target.innerHTML = html;
                  return true;
              };
              if (!tryRender()) {
                  let count = 0;
                  const timer = setInterval(() => {
                      if (tryRender() || ++count > 60) clearInterval(timer);
                  }, 250);
              }
          })();
          </script>
          <script is:inline>
          // „Éà„ÉÉ„Éó„Å´Êàª„Çã„Éú„Çø„É≥Ôºà6.5%„Çπ„ÇØ„É≠„Éº„É´„ÅßË°®Á§∫Ôºâ
          (function() {
              const THRESHOLD = 6.5; // %
              const btn = document.getElementById('back-to-top');
              if (!btn) return;
              function updateVisibility() {
                  const doc = document.documentElement;
                  const scrollTop = window.pageYOffset || doc.scrollTop || 0;
                  const maxScroll = (doc.scrollHeight - doc.clientHeight) || 1;
                  const percent = (scrollTop / maxScroll) * 100;
                  if (percent >= THRESHOLD) {
                      btn.style.display = 'flex';
                  } else {
                      btn.style.display = 'none';
                  }
              }
              function updatePosition() {
                  const cta = document.querySelector('.scroll-bottom-modal');
                  let bottomPx = 20;
                  if (cta && cta.classList && cta.classList.contains('show')) {
                      const rect = cta.getBoundingClientRect();
                      const gap = 16; // CTA„Å®„Éú„Çø„É≥„ÅÆÈñìÈöî
                      if (rect && rect.height) {
                          bottomPx = Math.max(20, Math.round(rect.height) + gap);
                      } else {
                          // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºàCSS„ÅÆmin-height„Å´Ëøë„ÅÑÂÄ§Ôºâ
                          bottomPx = 96;
                      }
                  }
                  btn.style.bottom = bottomPx + 'px';
              }
              window.addEventListener('scroll', () => { updateVisibility(); updatePosition(); }, { passive: true });
              window.addEventListener('resize', () => { updateVisibility(); updatePosition(); });
              updateVisibility();
              updatePosition();
              // ËøΩÂæìCTA„ÅÆÁä∂ÊÖãÂ§âÂåñ„ÇíÁõ£Ë¶ñ
              const observer = new MutationObserver(() => { updatePosition(); });
              observer.observe(document.body, { childList: true, subtree: true, attributes: true });
              // Èñâ„Åò„Çã„Éú„Çø„É≥„ÅÆ„ÇØ„É™„ÉÉ„ÇØ„Åß„ÇÇË™øÊï¥
              document.addEventListener('click', (e) => {
                  if (e.target && (e.target.closest && e.target.closest('.scroll-modal-close'))) {
                      setTimeout(updatePosition, 50);
                  }
              });
              btn.addEventListener('click', function() {
                  window.scrollTo({ top: 0, behavior: 'smooth' });
              });
          })();
          </script>

      <!-- Debug panel: enable with ?debug=1 -->
      <script is:inline>
          (function(){
              try {
                  const params = new URLSearchParams(window.location.search);
                  const debugOn = params.get('debug') === '1';
                  window.__DEBUG__ = debugOn;
                  if (!debugOn) return;
                  const panel = document.createElement('div');
                  panel.id = 'debug-log-panel';
                  panel.style.cssText = 'position:fixed;bottom:0;left:0;right:0;max-height:35vh;overflow:auto;background:#111;color:#0f0;font:12px/1.4 monospace;z-index:99999;border-top:1px solid #333;padding:6px;opacity:0.95;';
                  const ctrl = document.createElement('div');
                  ctrl.innerHTML = '<strong style="color:#fff">DEBUG LOG</strong> <button id="dbg-clear" style="margin-left:8px;">clear</button> <button id="dbg-hide" style="margin-left:4px;">hide</button>';
                  ctrl.style.cssText = 'margin-bottom:4px;';
                  const pre = document.createElement('pre');
                  pre.id = 'debug-log';
                  pre.style.margin = '0';
                  panel.appendChild(ctrl);
                  panel.appendChild(pre);
                  document.body.appendChild(panel);
                  const orig = { log: console.log, error: console.error, warn: console.warn, info: console.info };
                  function appendLine(level, args){
                      const msg = Array.from(args).map(a=>{
                          try { return typeof a==='string'?a:JSON.stringify(a); } catch(e){ return String(a); }
                      }).join(' ');
                      const line = '['+level+'] '+msg+'\n';
                      pre.textContent += line;
                  }
                  console.log = function(){ appendLine('LOG', arguments); orig.log.apply(console, arguments); };
                  console.error = function(){ appendLine('ERR', arguments); orig.error.apply(console, arguments); };
                  console.warn = function(){ appendLine('WRN', arguments); orig.warn.apply(console, arguments); };
                  console.info = function(){ appendLine('INF', arguments); orig.info.apply(console, arguments); };
                  document.getElementById('dbg-clear').onclick = function(){ pre.textContent=''; };
                  document.getElementById('dbg-hide').onclick = function(){ panel.style.display='none'; };
                  console.log('[DEBUG] panel ready');
                  document.addEventListener('DOMContentLoaded', function(){ console.log('[DEBUG] DOMContentLoaded fired'); });
                  window.addEventListener('load', function(){ console.log('[DEBUG] window load fired'); });
                  setTimeout(function(){
                      console.log('[DEBUG] runtime check', {
                          hasApp: !!window.app,
                          hasDataManager: !!(window.app && window.app.dataManager),
                          caseSection: !!document.getElementById('case-section'),
                          caseSlides: document.querySelectorAll('.case-slide').length
                      });
                  }, 500);
              } catch(e) {}
          })();
      </script>

      <script is:inline>
          // ÊØîËºÉË°®„ÅÆ„Çø„ÉñÂàá„ÇäÊõø„ÅàÊ©üËÉΩ
          // ÂÖ®„Å¶„ÅÆ„Éë„É©„É°„Éº„Çø„ÇíÂºï„ÅçÁ∂ô„ÅêÂÖ±ÈÄöÂá¶ÁêÜ
          function preserveAllParams() {
              const currentParams = new URLSearchParams(window.location.search);
              if (currentParams.toString()) {
                  // „Åô„Åπ„Å¶„ÅÆÂÜÖÈÉ®„É™„É≥„ÇØ„Å´„Éë„É©„É°„Éº„Çø„ÇíËøΩÂä†
                  const links = document.querySelectorAll('a[href^="/"], a[href^="./"], a[href^="../"], a[href]:not([href^="http"]):not([href^="#"])');
                  links.forEach(link => {
                      try {
                          const url = new URL(link.href, window.location.origin);
                          // Êó¢Â≠ò„ÅÆ„Éë„É©„É°„Éº„Çø„Çí‰øùÊåÅ„Åó„Å§„Å§„ÄÅÁèæÂú®„ÅÆ„Éë„É©„É°„Éº„Çø„ÇíËøΩÂä†
                          for (const [key, value] of currentParams) {
                              if (!url.searchParams.has(key)) {
                                  url.searchParams.set(key, value);
                              }
                          }
                          link.href = url.toString();
                      } catch (e) {
                          // Áõ∏ÂØæURL„ÅÆÂ†¥Âêà
                          const separator = link.href.includes('?') ? '&' : '?';
                          link.href = link.href + separator + currentParams.toString();
                      }
                  });
              }
          }

          document.addEventListener('DOMContentLoaded', function() {
              // „Éë„É©„É°„Éº„Çø„ÇíÂºï„ÅçÁ∂ô„Åê
              preserveAllParams();

              const tabMenuItems = document.querySelectorAll('.comparison-tab-menu-item');
              const table = document.querySelector('.comparison-table table');

              function updateTableColumns(tabType) {
                  if (!table) return;

                  const tableContainer = document.querySelector('.comparison-table');
                  const headers = table.querySelectorAll('th');
                  const rows = table.querySelectorAll('tbody tr');

                  // „Çø„Éñ„Åî„Å®„ÅÆË°®Á§∫Âàó„Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπÔºàÂÆüÈöõ„ÅÆHTML„ÅÆÂàóÁï™Âè∑„Å´Âêà„Çè„Åõ„Å¶‰øÆÊ≠£Ôºâ
                  const tabColumnsMap = {
                      'tab1': [0, 1, 2, 3, 10], // Á∑èÂêà: „ÇØ„É™„Éã„ÉÉ„ÇØÂêç, Á∑èÂêàË©ï‰æ°, Ë≤ªÁî®, ÁâπÂæ¥, ÂÖ¨Âºè„Çµ„Ç§„ÉàURL
                      'tab2': [0, 4, 5, 6, 10], // ÊñΩË°ìÂÜÖÂÆπ: „ÇØ„É™„Éã„ÉÉ„ÇØÂêç, ÁüØÊ≠£ÁØÑÂõ≤, ÁõÆÂÆâÊúüÈñì, ÈÄöÈô¢È†ªÂ∫¶, ÂÖ¨Âºè„Çµ„Ç§„ÉàURL
                      'tab3': [0, 7, 8, 9, 10]  // „Çµ„Éº„Éì„Çπ: „ÇØ„É™„Éã„ÉÉ„ÇØÂêç, ÂÆüÁ∏æ/Áóá‰æãÊï∞, „ÉØ„Ç§„É§„ÉºÁüØÊ≠£„ÅÆÁ¥π‰ªã, „Çµ„Éù„Éº„Éà, ÂÖ¨Âºè„Çµ„Ç§„ÉàURL
                  };

                  const showIndexes = tabColumnsMap[tabType] || tabColumnsMap['tab1'];

                  // „Ç≥„É≥„ÉÜ„Éä„Å´„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™„Çø„Éñ„ÇíË®≠ÂÆö
                  tableContainer.setAttribute('data-active-tab', tabType);

                  // „Çø„Éñ„Å´Âøú„Åò„Å¶ÂãïÁöÑ„Å´„Éò„ÉÉ„ÉÄ„Éº„ÉÜ„Ç≠„Çπ„Éà„ÇíÊõ¥Êñ∞ÔºàJSON„Éï„Ç°„Ç§„É´„Åã„ÇâÂèñÂæóÔºâ
                  const headerConfig = window.dataManager ? window.dataManager.getClinicHeaderConfig() : null;

                  const headerTextMap = {
                      'tab1': [
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº1'] || '„ÇØ„É™„Éã„ÉÉ„ÇØ', 
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº2'] || 'Á∑èÂêàË©ï‰æ°',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº3'] || 'Ë≤ªÁî®',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº4'] || 'ÁâπÂæ¥',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº11'] || 'ÂÖ¨Âºè„Çµ„Ç§„Éà'
                      ],
                      'tab2': [
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº1'] || '„ÇØ„É™„Éã„ÉÉ„ÇØ', 
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº5'] || 'ÁüØÊ≠£ÁØÑÂõ≤',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº6'] || 'ÁõÆÂÆâÊúüÈñì',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº7'] || 'ÈÄöÈô¢È†ªÂ∫¶',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº11'] || 'ÂÖ¨Âºè„Çµ„Ç§„Éà'
                      ], 
                      'tab3': [
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº1'] || '„ÇØ„É™„Éã„ÉÉ„ÇØ', 
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº8'] || 'ÂÆüÁ∏æ/Áóá‰æãÊï∞',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº9'] || '„ÉØ„Ç§„É§„ÉºÁüØÊ≠£„ÅÆÁ¥π‰ªã',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº10'] || '„Çµ„Éù„Éº„Éà',
                          headerConfig && headerConfig['ÊØîËºÉË°®„Éò„ÉÉ„ÉÄ„Éº11'] || 'ÂÖ¨Âºè„Çµ„Ç§„Éà'
                      ]
                  };

                  const currentHeaderTexts = headerTextMap[tabType] || headerTextMap['tab1'];

                  // requestAnimationFrame„Çí‰ΩøÁî®„Åó„Å¶ÊúÄÈÅ©Âåñ
                  requestAnimationFrame(() => {
                      // Ë°®Á§∫„Åï„Çå„ÇãÂàó„ÅÆ„Éò„ÉÉ„ÉÄ„Éº„ÉÜ„Ç≠„Çπ„Éà„ÇíÂãïÁöÑ„Å´Êõ¥Êñ∞
                      let headerTextIndex = 0;
                      headers.forEach((th, index) => {
                          if (showIndexes.includes(index)) {
                              if (headerTextIndex < currentHeaderTexts.length) {
                                  th.textContent = currentHeaderTexts[headerTextIndex];
                                  headerTextIndex++;
                              }
                          }
                      });

                      // „Éò„ÉÉ„ÉÄ„Éº„ÅÆË°®Á§∫/ÈùûË°®Á§∫
                      headers.forEach((th, index) => {
                          if (showIndexes.includes(index)) {
                              // Ë°®Á§∫„Åô„ÇãÂàó: „Åô„Åπ„Å¶„ÅÆ„Ç§„É≥„É©„Ç§„É≥„Çπ„Çø„Ç§„É´„ÇíÂâäÈô§
                              th.removeAttribute('style');
                              th.classList.remove('th-none');
                              th.classList.remove('td-none');
                          } else {
                              // ÈùûË°®Á§∫„ÅÆÂàó
                              th.style.display = 'none';
                              th.style.visibility = 'hidden';
                              th.style.width = '0';
                              th.style.padding = '0';
                              th.style.border = '0';
                              th.classList.add('th-none');
                          }
                      });

                      // ÂêÑË°å„ÅÆ„Çª„É´„ÅÆË°®Á§∫/ÈùûË°®Á§∫
                      rows.forEach(row => {
                          const cells = row.querySelectorAll('td');
                          cells.forEach((td, index) => {
                              if (showIndexes.includes(index)) {
                                  // Ë°®Á§∫„Åô„ÇãÂàó: „Åô„Åπ„Å¶„ÅÆ„Ç§„É≥„É©„Ç§„É≥„Çπ„Çø„Ç§„É´„ÇíÂâäÈô§
                                  td.removeAttribute('style');
                                  td.classList.remove('th-none');
                                  td.classList.remove('td-none');
                              } else {
                                  // ÈùûË°®Á§∫„ÅÆÂàó
                                  td.style.display = 'none';
                                  td.style.visibility = 'hidden';
                                  td.style.width = '0';
                                  td.style.padding = '0';
                                  td.style.border = '0';
                                  td.classList.add('td-none');
                              }
                          });
                      });
                  });
              }

              tabMenuItems.forEach(item => {
                  item.addEventListener('click', function() {
                      // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„ÇíÈùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
                      tabMenuItems.forEach(tab => tab.classList.remove('tab-active'));
                      // „ÇØ„É™„ÉÉ„ÇØ„Åó„Åü„Çø„Éñ„Çí„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
                      this.classList.add('tab-active');

                      // „Çø„Éñ„Å´Âøú„Åò„Å¶Ë°®Á§∫Âàó„ÇíÂàá„ÇäÊõø„Åà
                      const tabType = this.getAttribute('data-tab');
                      updateTableColumns(tabType);
                  });
              });

              // ÂàùÊúüË°®Á§∫
              updateTableColumns('tab1');

          });

          // „Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥Ê©üËÉΩÔºà2ÊÆµÈöéÔºâ
          // „Åì„ÅÆÈñ¢Êï∞„ÅØ958Ë°åÁõÆ„ÅßÊó¢„Å´ÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅ„Åì„Åì„Åß„ÅÆÂÜçÂÆöÁæ©„ÅØÂâäÈô§
          // window.toggleMainDisclaimerÈñ¢Êï∞„ÅØ958Ë°åÁõÆ„ÅÆÂÆüË£Ö„Çí‰ΩøÁî®

          window.toggleDisclaimer = function(clinicId) {
              console.log('>>> toggleDisclaimer called:', clinicId);

              // ÁâπÂà•„Å™Âá¶ÁêÜ: dio-campaign-first-choice„ÅÆÂ†¥Âêà
              if (clinicId === 'dio-campaign-first-choice') {
                  // „Ç∑„É≥„Éó„É´„Å™„Éà„Ç∞„É´Âá¶ÁêÜ
                  const content = document.getElementById('dio-campaign-first-choice-content');
                  const arrow = document.getElementById('dio-campaign-first-choice-arrow');

                  if (content && arrow) {
                      if (content.style.display === 'none' || !content.style.display) {
                          content.style.display = 'block';
                          arrow.style.transform = 'rotate(180deg)';
                      } else {
                          content.style.display = 'none';
                          arrow.style.transform = 'rotate(0deg)';
                      }
                      return; // Âá¶ÁêÜÂÆå‰∫Ü
                  }

                  // ÂÖÉ„ÅÆË§áÈõë„Å™Âá¶ÁêÜ„Å´Á∂ö„Åè
                  const contentOriginal = document.getElementById('dio-campaign-first-choice-content');
                  const arrowOriginal = document.getElementById('dio-campaign-first-choice-arrow');

                  if (!(content && arrow)) {
                      // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: ÊØîËºÉË°®‰∏ã„ÅÆÁ¨¨‰∫åÊÆµÈöéÔºàid„Åå 'dio-content' / 'dio-arrow'Ôºâ„Å´ÂØæÂøú
                      const baseCode = (clinicId.split('-')[0] || 'dio');
                      const fbContent = document.getElementById(baseCode + '-content');
                      const fbArrow = document.getElementById(baseCode + '-arrow');
                      if (fbContent && fbArrow) {
                          const isHidden = window.getComputedStyle(fbContent).display === 'none';
                          if (isHidden) {
                              fbContent.style.display = 'block';
                              fbArrow.style.transform = 'rotate(180deg)';
                              console.log('‚Üí Fallback general accordion opened:', baseCode);
                          } else {
                              fbContent.style.display = 'none';
                              fbArrow.style.transform = 'rotate(0deg)';
                              console.log('‚Üí Fallback general accordion closed:', baseCode);
                          }
                          return; // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ„ÅßÂá¶ÁêÜÂÆå‰∫Ü
                      }
                  }

                  if (content && arrow) {
                      // Â∏∏„Å´ÊâÄÂÆö‰ΩçÁΩÆ„Å∏ÈÄÄÈÅøÔºàÂøµ„ÅÆ„Åü„ÇÅÔºâ
                      try {
                          const mainContent = document.getElementById('main-content');
                          const accordion = content.closest('.disclaimer-accordion');
                          const containerAnchor = document.getElementById('first-choice-recommendation-section');
                          const sectionAnchor = document.querySelector('#first-choice-recommendation-section .first-choice-recommendation-section');
                          const targetAnchor = sectionAnchor || containerAnchor;
                          const isInMain = (() => {
                              let n = accordion;
                              while (n && n !== document.body) { if (n.id === 'main-content') return true; n = n.parentElement; }
                              return false;
                          })();
                          const needsMove = targetAnchor && accordion && accordion.parentElement !== targetAnchor;
                          console.log('Relocation check:', { hasAnchor: !!targetAnchor, isInMain, needsMove });
                          if (needsMove) {
                              targetAnchor.appendChild(accordion);
                              console.log('Relocated first-choice accordion under .first-choice-recommendation-section');
                          }
                      } catch (e) { console.warn('Relocation error:', e); }

                      const computed = window.getComputedStyle(content);
                      const currentDisplay = computed.display;
                      console.log('First choice accordion - current display:', currentDisplay, '| visibility:', computed.visibility, '| opacity:', computed.opacity);

                      const accordion = content.closest('.disclaimer-accordion');
                      const section = content.closest('section');
                      const ancestors = [];
                      let node = content.parentElement;
                      while (node && node !== document.body) {
                          const cs = window.getComputedStyle(node);
                          const isHidden = cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0' || cs.maxHeight === '0px' || cs.height === '0px';
                          if (isHidden) {
                              const info = { tag: node.tagName, cls: node.className, id: node.id, display: cs.display, visibility: cs.visibility, opacity: cs.opacity, height: cs.height, maxHeight: cs.maxHeight };
                              ancestors.push(info);
                              // ‰∏ÄÊôÇÁöÑ„Å´ÂèØË¶ñÂåñ
                              node.classList.add('force-ancestor-show');
                              if (node.classList.contains('hidden')) {
                                  node.classList.remove('hidden');
                                  node.setAttribute('data-removed-hidden', '1');
                              }
                              if (node.hasAttribute('hidden')) {
                                  node.removeAttribute('hidden');
                                  node.setAttribute('data-removed-hidden-attr', '1');
                              }
                              if (node.getAttribute('aria-hidden') === 'true') {
                                  node.setAttribute('aria-hidden', 'false');
                                  node.setAttribute('data-changed-aria-hidden', '1');
                              }
                          }
                          node = node.parentElement;
                      }
                      if (ancestors.length) {
                          try {
                              console.log('Ancestors with potential hidden styles (text):\n' + JSON.stringify(ancestors, null, 2));
                          } catch (e) {
                              console.log('Ancestors with potential hidden styles:', ancestors);
                          }
                      }

                      if (currentDisplay === 'none') {
                          // Ë°®Á§∫ - Âº∑Âà∂ÁöÑ„Å´Ë¶ã„Åà„ÇãÁä∂ÊÖã„Å∏
                          if (accordion) {
                              accordion.style.display = 'block';
                              accordion.style.visibility = 'visible';
                              accordion.style.opacity = '1';
                              accordion.style.position = 'relative';
                              accordion.style.zIndex = '9999';
                          }
                          if (section) {
                              section.style.display = section.style.display || 'block';
                          }
                          content.classList.add('force-show');
                          content.style.display = 'block';
                          content.style.visibility = 'visible';
                          content.style.opacity = '1';
                          content.style.maxHeight = 'none';
                          content.style.height = 'auto';
                          arrow.style.transform = 'rotate(180deg)';
                          console.log('‚Üí First choice accordion opened (applied force-show + inline styles)');
                          try {
                              const rect = content.getBoundingClientRect();
                              console.log('First choice content rect after open:', { top: rect.top, left: rect.left, width: rect.width, height: rect.height });
                          } catch (e) {}

                          // main-disclaimer-content„ÅåË¶™Ë¶ÅÁ¥†„Å®„Åó„Å¶ÂΩ±Èüø„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅÆÂØæÂá¶
                          const mainContent = document.getElementById('main-content');
                          if (mainContent && window.getComputedStyle(mainContent).display === 'none') {
                              const acc = content.closest('.disclaimer-accordion');
                              const sectionAnchor = document.querySelector('#first-choice-recommendation-section .first-choice-recommendation-section');
                              if (acc && mainContent.contains(acc)) {
                                  if (sectionAnchor) {
                                      sectionAnchor.appendChild(acc);
                                      console.log('Relocated first-choice accordion (during open) under .first-choice-recommendation-section');
                                  } else {
                                      mainContent.parentNode.insertBefore(acc, mainContent.nextSibling);
                                      console.log('Relocated first-choice accordion (during open) outside main-content');
                                  }
                              }
                          }

                          // „Çπ„ÇØ„É≠„Éº„É´„Åó„Å¶Ë°®Á§∫„ÇíÁ¢∫Ë™çÔºà„Éò„ÉÉ„ÉÄ„ÉºÂàÜ„Ç™„Éï„Çª„ÉÉ„ÉàÔºâ
                          try {
                              const doScroll = () => {
                                  const rect2 = content.getBoundingClientRect();
                                  const targetTop = rect2.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop) - 80;
                                  window.scrollTo({ top: targetTop, behavior: 'auto' });
                                  setTimeout(() => {
                                      const rect3 = content.getBoundingClientRect();
                                      console.log('After scroll check:', { pageYOffset: window.pageYOffset, rectTop: rect3.top, rectHeight: rect3.height });
                                      // „Åæ„Å†Ë¶ã„Åà„Å¶„ÅÑ„Å™„Åë„Çå„Å∞„ÇÇ„ÅÜ‰∏ÄÂ∫¶
                                      if (rect3.top < -10 || rect3.top > window.innerHeight) {
                                          const targetTop2 = rect3.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop) - 80;
                                          window.scrollTo({ top: targetTop2, behavior: 'auto' });
                                      }
                                  }, 120);
                              };
                              doScroll();
                          } catch (e) {}
                      } else {
                          // ÈùûË°®Á§∫ - Âº∑Âà∂Ë°®Á§∫Áä∂ÊÖã„ÇíËß£Èô§
                          content.classList.remove('force-show');
                          content.style.display = 'none';
                          content.style.visibility = '';
                          content.style.opacity = '';
                          content.style.maxHeight = '';
                          content.style.height = '';
                          arrow.style.transform = 'rotate(0deg)';
                          console.log('‚Üí First choice accordion closed');
                          try {
                              const rect = content.getBoundingClientRect();
                              console.log('First choice content rect after close:', { top: rect.top, left: rect.left, width: rect.width, height: rect.height });
                          } catch (e) {}
                          // Á•ñÂÖà„ÅÆ‰∏äÊõ∏„Åç„ÇØ„É©„Çπ„ÇíÂ§ñ„Åô
                          let n = content.parentElement;
                          while (n && n !== document.body) {
                              if (n.classList.contains('force-ancestor-show')) {
                                  n.classList.remove('force-ancestor-show');
                                  if (n.getAttribute('data-removed-hidden') === '1') {
                                      n.classList.add('hidden');
                                      n.removeAttribute('data-removed-hidden');
                                  }
                                  if (n.getAttribute('data-removed-hidden-attr') === '1') {
                                      n.setAttribute('hidden', '');
                                      n.removeAttribute('data-removed-hidden-attr');
                                  }
                                  if (n.getAttribute('data-changed-aria-hidden') === '1') {
                                      n.setAttribute('aria-hidden', 'true');
                                      n.removeAttribute('data-changed-aria-hidden');
                                  }
                              }
                              n = n.parentElement;
                          }
                      }
                  } else {
                      console.warn('First choice elements not found:', { hasContent: !!content, hasArrow: !!arrow });
                  }
                  return; // ÁâπÂà•Âá¶ÁêÜÁµÇ‰∫Ü
              }

              // ÈÄöÂ∏∏„ÅÆ„Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥Âá¶ÁêÜÔºàÁ•ñÂÖàÂèØË¶ñÂåñ„Å®Ë©≥Á¥∞„É≠„Ç∞‰ªò„ÅçÔºâ
              const contentId = clinicId + '-content';
              const arrowId = clinicId + '-arrow';

              const content = document.getElementById(contentId);
              const arrow = document.getElementById(arrowId);

              console.log('Looking for:', contentId, '‚Üí', content ? 'FOUND' : 'NOT FOUND');
              console.log('Looking for:', arrowId, '‚Üí', arrow ? 'FOUND' : 'NOT FOUND');

              if (content && arrow) {
                  const computed = window.getComputedStyle(content);
                  const currentDisplay = computed.display;
                  if (currentDisplay === 'none') {
                      // Á•ñÂÖà„ÅÆÈùûË°®Á§∫„ÇíÊ§úÂá∫„Åó„ÄÅ‰∏ÄÊôÇÁöÑ„Å´ÂèØË¶ñÂåñ
                      const ancestors = [];
                      let node = content.parentElement;
                      while (node && node !== document.body) {
                          const cs = window.getComputedStyle(node);
                          const isHidden = cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0' || cs.maxHeight === '0px' || cs.height === '0px';
                          if (isHidden) {
                              const info = { tag: node.tagName, cls: node.className, id: node.id, display: cs.display, visibility: cs.visibility, opacity: cs.opacity, height: cs.height, maxHeight: cs.maxHeight };
                              ancestors.push(info);
                              node.classList.add('force-ancestor-show');
                              if (node.classList.contains('hidden')) {
                                  node.classList.remove('hidden');
                                  node.setAttribute('data-removed-hidden', '1');
                              }
                              if (node.hasAttribute('hidden')) {
                                  node.removeAttribute('hidden');
                                  node.setAttribute('data-removed-hidden-attr', '1');
                              }
                              if (node.getAttribute('aria-hidden') === 'true') {
                                  node.setAttribute('aria-hidden', 'false');
                                  node.setAttribute('data-changed-aria-hidden', '1');
                              }
                          }
                          node = node.parentElement;
                      }
                      if (ancestors.length) {
                          try { console.log('Ancestors (general) with potential hidden styles (text):\n' + JSON.stringify(ancestors, null, 2)); } catch (e) { console.log('Ancestors (general):', ancestors); }
                      }

                      // Ë°®Á§∫
                      content.style.display = 'block';
                      content.style.visibility = 'visible';
                      content.style.opacity = '1';
                      arrow.style.transform = 'rotate(180deg)';
                      console.log('‚Üí General accordion opened:', clinicId);
                      try {
                          const rect = content.getBoundingClientRect();
                          console.log('General content rect after open:', { top: rect.top, left: rect.left, width: rect.width, height: rect.height });
                          const doScroll = () => {
                              const r2 = content.getBoundingClientRect();
                              const targetTop = r2.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop) - 80;
                              window.scrollTo({ top: targetTop, behavior: 'auto' });
                              setTimeout(() => {
                                  const r3 = content.getBoundingClientRect();
                                  console.log('After scroll check (general):', { pageYOffset: window.pageYOffset, rectTop: r3.top, rectHeight: r3.height });
                              }, 120);
                          };
                          doScroll();
                      } catch (e) {}
                  } else {
                      // ÈùûË°®Á§∫Ôºà„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„ÉóÂê´„ÇÄÔºâ
                      content.style.display = 'none';
                      content.style.visibility = '';
                      content.style.opacity = '';
                      arrow.style.transform = 'rotate(0deg)';
                      console.log('‚Üí General accordion closed:', clinicId);
                      // Á•ñÂÖà„ÅÆ‰∏äÊõ∏„Åç„ÇØ„É©„Çπ„ÇíÂ§ñ„Åô
                      let n = content.parentElement;
                      while (n && n !== document.body) {
                          if (n.classList.contains('force-ancestor-show')) {
                              n.classList.remove('force-ancestor-show');
                              if (n.getAttribute('data-removed-hidden') === '1') {
                                  n.classList.add('hidden');
                                  n.removeAttribute('data-removed-hidden');
                              }
                              if (n.getAttribute('data-removed-hidden-attr') === '1') {
                                  n.setAttribute('hidden', '');
                                  n.removeAttribute('data-removed-hidden-attr');
                              }
                              if (n.getAttribute('data-changed-aria-hidden') === '1') {
                                  n.setAttribute('aria-hidden', 'true');
                                  n.removeAttribute('data-changed-aria-hidden');
                              }
                          }
                          n = n.parentElement;
                      }
                  }
              }
          }

          // „Éá„Ç£„Ç™„ÇØ„É™„Éã„ÉÉ„ÇØ„ÅÆÁ¢∫Ë™ç‰∫ãÈ†Ö„Éú„Çø„É≥„Å´Áõ¥Êé•„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇíË®≠ÂÆö
          // „ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà„ÅØÊó¢„Å´HTMLÂÜÖ„ÅÆonclickÂ±ûÊÄß„ÅßË®≠ÂÆöÊ∏à„Åø„Å™„ÅÆ„Åß„ÄÅËøΩÂä†„ÅÆË®≠ÂÆö„ÅØ‰∏çË¶Å
          // ‰∫åÈáç„Å´„Ç§„Éô„É≥„Éà„ÅåÁô∫Áîü„Åó„Å™„ÅÑ„Çà„ÅÜ„ÄÅ„Åì„ÅÆÈÉ®ÂàÜ„ÅØÂâäÈô§

          // Add click animation to links
          document.querySelectorAll('.medical-columns-section .toc-link, .medical-columns-section .contact-link').forEach(link => {
              link.addEventListener('click', function(e) {
                  // contact-link„ÅÆÂ†¥Âêà„ÅØÂ§ñÈÉ®„É™„É≥„ÇØ„Å™„ÅÆ„Åß„ÄÅ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÅÆ„ÅøÂÆüË°å
                  this.style.opacity = '0.7';
                  setTimeout(() => {
                      this.style.opacity = '1';
                  }, 150);

                  // toc-link„ÅÆÂ†¥Âêà„ÅÆ„Åø„Çπ„É†„Éº„Ç∫„Çπ„ÇØ„É≠„Éº„É´„ÇíÂÆüË°å
                  if (this.classList.contains('toc-link') && this.getAttribute('href').startsWith('#')) {
                      e.preventDefault();
                      const targetId = this.getAttribute('href').substring(1);
                      const targetElement = document.getElementById(targetId);
                      if (targetElement) {
                          targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                      }
                  }
              });
          });

          // Tips Section Tab Functionality
          document.addEventListener('DOMContentLoaded', function() {
              // Add event listeners for disclaimer accordions
              const rankingBtn = document.getElementById('ranking-disclaimer-button');
              if (rankingBtn) {
                  rankingBtn.addEventListener('click', toggleRankingDisclaimer);
              }

              const comparisonBtn = document.getElementById('comparison-disclaimer-button');
              if (comparisonBtn) {
                  comparisonBtn.addEventListener('click', toggleComparisonDisclaimer);
              }

              const tabs = document.querySelectorAll('.tips-container .tab');
              const tabContents = document.querySelectorAll('.tips-container .tab-content');

              tabs.forEach(tab => {
                  tab.addEventListener('click', function() {
                      const tabIndex = this.getAttribute('data-tab');

                      // Update tab styles
                      tabs.forEach(t => {
                          t.style.backgroundColor = '#F1F1F1';
                          t.style.color = '#4C4C4C';
                      });
                      this.style.backgroundColor = '#2CC7C5';
                      this.style.color = 'white';

                      // Show/hide content
                      tabContents.forEach(content => {
                          if (content.getAttribute('data-tab') === tabIndex) {
                              content.style.display = 'block';
                          } else {
                              content.style.display = 'none';
                          }
                      });
                  });
              });
          });
      </script>

      <!-- Clinic URLs are now managed dynamically from CSV database -->

      <!-- URL Parameter Tracking -->
      <script src={asset("url-tracking.js?v=2025072201")} defer></script>

      <!-- Service WorkerÁôªÈå≤ -->
      <script define:vars={{ swPath: asset('sw.js') }}>
          if ('serviceWorker' in navigator) {
              window.addEventListener('load', () => {
                  navigator.serviceWorker.register(swPath)
                      .then(registration => {})
                      .catch(err => {});
              });
          }
      </script>

      <!-- Load common site data -->
      <script define:vars={{ commonDataPath: asset('common_data/data/site-common-texts.json') }}>
          // Load common site data
          fetch(commonDataPath)
              .then(response => response.json())
              .then(data => {
                  // Update site logo
                  const siteLogo = document.getElementById('site-logo');
                  if (siteLogo && data.„Çµ„Ç§„ÉàÂêç) {
                      siteLogo.textContent = data.„Çµ„Ç§„ÉàÂêç;
                  }

                  // Update favicon
                  const favicon = document.getElementById('header-logo-icon');
                  if (favicon && data.„Éï„Ç°„Éì„Ç≥„É≥ÁîªÂÉè„Éë„Çπ) {
                      favicon.src = data.„Éï„Ç°„Éì„Ç≥„É≥ÁîªÂÉè„Éë„Çπ;
                  }

                  // Update footer site name (copyright text contains both site name and copyright)
                  const footerSiteName = document.querySelector('.copyright');
                  if (footerSiteName && data.„Çµ„Ç§„ÉàÂêç) {
                      footerSiteName.textContent = '¬© 2025 ' + data.„Çµ„Ç§„ÉàÂêç;
                  }

              })
              .catch(error => {
                  console.error('Error loading common site data:', error);
              });
      </script>
      <script src={asset("tracking-params.js")} defer></script>

      <!-- „Éà„ÉÉ„Éó„Å´Êàª„Çã„Éú„Çø„É≥ -->
      <button id="back-to-top" class="back-to-top" aria-label="„Éà„ÉÉ„Éó„Å´Êàª„Çã">
          <span>^</span>
      </button>

      <script is:inline>
          // „Éà„ÉÉ„Éó„Å´Êàª„Çã„Éú„Çø„É≥„ÅÆÊ©üËÉΩ
          (function() {
              const backToTopBtn = document.getElementById('back-to-top');

              // „Çπ„ÇØ„É≠„Éº„É´ÊôÇ„ÅÆË°®Á§∫/ÈùûË°®Á§∫Âà∂Âæ°
              window.addEventListener('scroll', function() {
                  if (window.pageYOffset > 300) {
                      backToTopBtn.classList.add('show');
                  } else {
                      backToTopBtn.classList.remove('show');
                  }
              });

              // „ÇØ„É™„ÉÉ„ÇØÊôÇ„ÅÆ„Çπ„É†„Éº„Ç∫„Çπ„ÇØ„É≠„Éº„É´
              backToTopBtn.addEventListener('click', function() {
                  window.scrollTo({
                      top: 0,
                      behavior: 'smooth'
                  });
              });
          })();
      </script>
</BaseLayout>
