"use strict";!function(){const t=window.__BASE_PATH__??window.SITE_CONFIG?.basePath??"/",e="/"===t||""===t?"":t.replace(/\/+$/,""),n=(()=>{if(!e)return"";const t=e.replace(/\/+$/,"").replace(/\/r\/(\d{1,3})$/i,"");return t?t.startsWith("/")?t:`/${t}`:""})(),i=t=>{if("string"!=typeof t||0===t.length)return t;if(/^(?:[a-z][a-z0-9+.-]*:|\/\/|data:|mailto:|tel:)/i.test(t))return t;const i=n||e;let o=t.startsWith("./")?t.slice(2):t;return o.startsWith("/")||(o=`/${o}`),i?o.startsWith(`${i}/`)?o:`${i}${o}`:o},o=window.RegionUtils??(()=>{const t=t=>{if(null==t)return null;const e=String(t).match(/\d+/);return e?e[0].padStart(3,"0"):null},e=e=>{const n=(t=>"string"!=typeof t?[]:t.split("/").filter(Boolean))(e);if(0===n.length)return null;const i=n.findIndex(t=>"r"===t.toLowerCase());if(-1!==i&&n[i+1])return t(n[i+1]);for(let e=n.length-1;e>=0;e-=1){const i=n[e].match(/^r[-_]?(\d{1,3})$/i);if(i)return t(i[1])}const o=n[n.length-1];if(o){const e=o.match(/^(\d{1,3})$/);if(e)return t(e[1])}return null},i=e=>{if("string"!=typeof e)return null;try{const n=new URLSearchParams(e);return t(n.get("region_id"))}catch(t){return null}},o=e=>{const n=t(e);return n?("undefined"!=typeof window&&(window.__REGION_ID__=n),n):null};return{normalizeRegionId:t,detectRegionIdFromPath:e,detectRegionIdFromQuery:i,determineRegionId:({fallback:n="013",prefer:c="path"}={})=>{if("undefined"==typeof window)return n;const r=t(window.__REGION_ID__);if(r)return r;const s=e(window.location.pathname||""),a=i(window.location.search||""),d="query"===c?a||s:s||a;return d?(o(d),d):n},rememberRegionId:o,getBaseRootPrefix:()=>n}})();"undefined"==typeof window||window.RegionUtils||(window.RegionUtils=o);class c{constructor(){this.commonTexts={},this.clinics=[],this.rankings={},this.loaded=!1,this.clinicTexts={}}async loadData(t="013"){try{const[t,e]=await Promise.all([fetch(i("/common_data/data/site-common-texts.json")).then(t=>t.json()),fetch(i("/common_data/data/mouthpiece_clinics_data_001.json")).then(t=>t.json())]);return this.commonTexts=t,this.clinics=e.clinics||[],this.rankings=e.rankings||{},this.clinicTexts=e.clinicTexts||{},this.loaded=!0,window.dispatchEvent(new CustomEvent("dataManagerReady")),this.updateDOM(),!0}catch(t){return console.error("Data loading error:",t),!1}}updateDOM(){if(!this.loaded)return;const t=this.getRankingsByRegion("013");if(t&&t.length>0){const e=this.getClinicById(t[0]);if(e){const t=document.getElementById("first-choice-clinic-name");t&&(t.textContent=e.name||"");const n=document.getElementById("first-choice-title-clinic-name");n&&(n.textContent=e.name||"");const o=document.getElementById("first-choice-banner-image");o&&e["バナー画像"]&&(o.src=i(e["バナー画像"]));const c=document.getElementById("first-choice-info-logo");c&&e["ロゴ画像"]&&(c.src=i(e["ロゴ画像"]));const r=document.getElementById("first-choice-campaign-text");r&&e["キャンペーン内容（赤タグ内）"]&&(r.innerHTML=e["キャンペーン内容（赤タグ内）"]);const s=document.getElementById("first-choice-achievement-text");s&&e["実績テキスト（ボタン上）"]&&(s.textContent=e["実績テキスト（ボタン上）"]);const a=document.getElementById("first-choice-cta-text");a&&(a.textContent=e["CTAテキスト（ボタン内）"]||"公式サイトへ");const d=document.getElementById("first-choice-cta-link");if(d&&e.code){const t=this.getClinicText(e.code,"遷移先URL（1位）","");t&&(d.href=t)}const l=document.getElementById("first-choice-disclaimer-title");l&&e["注意事項タイトル"]&&(l.textContent=e["注意事項タイトル"]);const u=document.getElementById("first-choice-points");if(u&&e["ポイント1"]){u.innerHTML="";for(let t=1;t<=3;t++){const n=e[`ポイント${t}`],i=e[`ポイント説明${t}`];if(n&&i){const e=document.createElement("div");e.className="merit_card",e.innerHTML=`<div class="merit_icon"><span class="point_no">${t}</span></div><div class="merit_header">${n}</div><div class="merit_description">${i}</div>`,u.appendChild(e)}}}}}t.forEach((t,e)=>{const n=this.getClinicById(t);if(n){const t=e+1,o=document.querySelector(`.ranking-${t}`);if(o){const e=o.querySelector(".clinic-name");e&&(e.textContent=n.name||"");const c=o.querySelector(".clinic-logo");c&&n["ロゴ画像"]&&(c.src=i(n["ロゴ画像"]));const r=o.querySelector(".clinic-description");r&&n["説明文"]&&(r.textContent=n["説明文"]);const s=o.querySelector(".clinic-link");if(s&&n.code){const e=this.getClinicText(n.code,`遷移先URL（${t}位）`,"");e&&(s.href=e)}}}})}getText(t,e=""){return this.commonTexts[t]||e}getClinicById(t){return this.clinics.find(e=>e.id===t)}getClinicCodeById(t){const e=this.getClinicById(t);return e?e.code:null}getClinicText(t,e,n=""){const i=this.clinics.find(e=>e.code===t);return i&&i[e]?i[e]:n}getClinicHeaderConfig(){const t=this.clinicTexts&&this.clinicTexts["比較表ヘッダー設定"];return t&&"object"==typeof t?t:{}}getRankingsByRegion(t="013"){return this.rankings[t]||[]}}window.DataManager=c,window.dataManager=new c,window.urlParamHandler=new class{getParam(t){return new URLSearchParams(window.location.search).get(t)}getRegionId(){return o.determineRegionId()}},document.addEventListener("DOMContentLoaded",function(){const t=window.urlParamHandler.getRegionId();window.dataManager.loadData(t)}),window.getClinicUrlFromConfig=function(t,e=1){if(window.dataManager){const n=window.dataManager.getClinicCodeById(t);if(n){const t=`遷移先URL（${e}位）`,i=window.dataManager.getClinicText(n,t,"");if(i)return i}}return"#"}}();